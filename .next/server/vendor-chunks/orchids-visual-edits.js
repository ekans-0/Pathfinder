/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/orchids-visual-edits";
exports.ids = ["vendor-chunks/orchids-visual-edits"];
exports.modules = {

/***/ "(rsc)/./node_modules/orchids-visual-edits/dist/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/orchids-visual-edits/dist/index.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// This file is generated by the Webpack next-flight-loader.\nconst { createProxy } = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js\")\n\nmodule.exports = createProxy(\"/home/user/app/node_modules/orchids-visual-edits/dist/index.js\")\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvb3JjaGlkcy12aXN1YWwtZWRpdHMvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZXMiOlsiX05fRS8uL25vZGVfbW9kdWxlcy9vcmNoaWRzLXZpc3VhbC1lZGl0cy9kaXN0L2luZGV4LmpzL19fbmV4dGpzLWludGVybmFsLXByb3h5LmNqcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGZpbGUgaXMgZ2VuZXJhdGVkIGJ5IHRoZSBXZWJwYWNrIG5leHQtZmxpZ2h0LWxvYWRlci5cbmNvbnN0IHsgY3JlYXRlUHJveHkgfSA9IHJlcXVpcmUoXCJuZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtZmxpZ2h0LWxvYWRlci9tb2R1bGUtcHJveHlcIilcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVQcm94eShcIi9ob21lL3VzZXIvYXBwL25vZGVfbW9kdWxlcy9vcmNoaWRzLXZpc3VhbC1lZGl0cy9kaXN0L2luZGV4LmpzXCIpXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/orchids-visual-edits/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/orchids-visual-edits/dist/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/orchids-visual-edits/dist/index.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("/* __next_internal_client_entry_do_not_use__  cjs */ \nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all)=>{\n    for(var name in all)__defProp(target, name, {\n        get: all[name],\n        enumerable: true\n    });\n};\nvar __copyProps = (to, from, except, desc)=>{\n    if (from && typeof from === \"object\" || typeof from === \"function\") {\n        for (let key of __getOwnPropNames(from))if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n            get: ()=>from[key],\n            enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n        });\n    }\n    return to;\n};\nvar __toESM = (mod, isNodeMode, target)=>(target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(// If the importer is in node compatibility mode or this is not an ESM\n    // file that has been converted to a CommonJS file using a Babel-\n    // compatible transform (i.e. \"__esModule\" has not been set), then set\n    // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n    isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", {\n        value: mod,\n        enumerable: true\n    }) : target, mod));\nvar __toCommonJS = (mod)=>__copyProps(__defProp({}, \"__esModule\", {\n        value: true\n    }), mod);\nvar src_exports = {};\n__export(src_exports, {\n    CHANNEL: ()=>import_messenger2.CHANNEL,\n    VisualEditsMessenger: ()=>import_messenger.default\n});\nmodule.exports = __toCommonJS(src_exports);\nvar import_messenger = __toESM(__webpack_require__(/*! ./messenger */ \"(ssr)/./node_modules/orchids-visual-edits/dist/messenger.js\"));\nvar import_messenger2 = __webpack_require__(/*! ./messenger */ \"(ssr)/./node_modules/orchids-visual-edits/dist/messenger.js\");\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvb3JjaGlkcy12aXN1YWwtZWRpdHMvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0lBQUE7SUFBQTtBQUFBO0FBQUE7QUFRQSx1QkFBZ0Q7QUFDaEQsSUFBQUEsb0JBQXdCIiwic291cmNlcyI6WyIvaG9tZS91c2VyL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIG9yY2hpZHMtdmlzdWFsLWVkaXRzXG4gKiBNYWluIGVudHJ5IHBvaW50IGZvciB0aGUgdmlzdWFsIGVkaXRzIHBhY2thZ2VcbiAqL1xuXG4vLyBOZXh0LmpzIEFwcCBSb3V0ZXIgZGlyZWN0aXZlOiBtYXJrcyByZS1leHBvcnRlZCBjb21wb25lbnRzIGFzIENsaWVudCBDb21wb25lbnRzXG5cInVzZSBjbGllbnRcIjtcblxuZXhwb3J0IHsgZGVmYXVsdCBhcyBWaXN1YWxFZGl0c01lc3NlbmdlciB9IGZyb20gJy4vbWVzc2VuZ2VyJ1xuZXhwb3J0IHsgQ0hBTk5FTCB9IGZyb20gJy4vbWVzc2VuZ2VyJ1xuZXhwb3J0IHR5cGUgeyBQYXJlbnRUb0NoaWxkLCBDaGlsZFRvUGFyZW50IH0gZnJvbSAnLi9tZXNzZW5nZXInXG4iXSwibmFtZXMiOlsiaW1wb3J0X21lc3NlbmdlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/orchids-visual-edits/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/orchids-visual-edits/dist/messenger.js":
/*!*************************************************************!*\
  !*** ./node_modules/orchids-visual-edits/dist/messenger.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("/* __next_internal_client_entry_do_not_use__  cjs */ \nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all)=>{\n    for(var name in all)__defProp(target, name, {\n        get: all[name],\n        enumerable: true\n    });\n};\nvar __copyProps = (to, from, except, desc)=>{\n    if (from && typeof from === \"object\" || typeof from === \"function\") {\n        for (let key of __getOwnPropNames(from))if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n            get: ()=>from[key],\n            enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n        });\n    }\n    return to;\n};\nvar __toCommonJS = (mod)=>__copyProps(__defProp({}, \"__esModule\", {\n        value: true\n    }), mod);\n// src/VisualEditsMessenger.tsx\nvar VisualEditsMessenger_exports = {};\n__export(VisualEditsMessenger_exports, {\n    CHANNEL: ()=>CHANNEL,\n    default: ()=>HoverReceiver\n});\nmodule.exports = __toCommonJS(VisualEditsMessenger_exports);\nvar import_react = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\nvar import_jsx_runtime = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\nvar CHANNEL = \"ORCHIDS_HOVER_v1\";\nvar VISUAL_EDIT_MODE_KEY = \"orchids_visual_edit_mode\";\nvar FOCUSED_ELEMENT_KEY = \"orchids_focused_element\";\nvar _orchidsLastMsg = \"\";\nvar postMessageDedup = (data)=>{\n    try {\n        const key = JSON.stringify(data);\n        if (key === _orchidsLastMsg) return;\n        _orchidsLastMsg = key;\n    } catch  {}\n    window.parent.postMessage(data, \"*\");\n};\nvar BOX_PADDING = 4;\nvar isTextEditable = (element)=>{\n    const tagName = element.tagName.toLowerCase();\n    const editableTags = [\n        \"p\",\n        \"h1\",\n        \"h2\",\n        \"h3\",\n        \"h4\",\n        \"h5\",\n        \"h6\",\n        \"span\",\n        \"div\",\n        \"li\",\n        \"td\",\n        \"th\",\n        \"label\",\n        \"a\",\n        \"button\"\n    ];\n    if (element.contentEditable === \"true\" || tagName === \"input\" || tagName === \"textarea\") {\n        return true;\n    }\n    if (editableTags.includes(tagName) && element.textContent?.trim()) {\n        const hasDirectText = Array.from(element.childNodes).some((node)=>node.nodeType === Node.TEXT_NODE && node.textContent?.trim());\n        if (element.childElementCount === 0 || element.childElementCount <= 1 && hasDirectText) {\n            return true;\n        }\n    }\n    return false;\n};\nvar extractDirectTextContent = (element)=>{\n    let text = \"\";\n    for (const node of element.childNodes){\n        if (node.nodeType === Node.TEXT_NODE) {\n            text += node.textContent || \"\";\n        }\n    }\n    return text;\n};\nvar parseOrchidsId = (orchidsId)=>{\n    const parts = orchidsId.split(\":\");\n    if (parts.length < 3) return null;\n    const column = parseInt(parts.pop() || \"0\");\n    const line = parseInt(parts.pop() || \"0\");\n    const filePath = parts.join(\":\");\n    if (isNaN(line) || isNaN(column)) return null;\n    return {\n        filePath,\n        line,\n        column\n    };\n};\nvar getCurrentStyles = (element)=>{\n    const computed = window.getComputedStyle(element);\n    const normalizeValue = (value, property)=>{\n        if (property === \"backgroundColor\") {\n            if (value === \"rgba(0, 0, 0, 0)\" || value === \"rgb(0, 0, 0, 0)\" || value === \"transparent\" || value === \"\") {\n                return \"transparent\";\n            }\n        }\n        if (property === \"backgroundImage\" && (value === \"none\" || value === \"\")) {\n            return \"none\";\n        }\n        if (property === \"textDecoration\") {\n            if (value.includes(\"none\") || value === \"\") {\n                return \"none\";\n            }\n        }\n        if (property === \"fontStyle\" && (value === \"normal\" || value === \"\")) {\n            return \"normal\";\n        }\n        if (property === \"fontWeight\") {\n            const weight = parseInt(value);\n            if (!isNaN(weight)) {\n                return String(weight);\n            }\n            return value || \"400\";\n        }\n        if (property === \"opacity\" && (value === \"1\" || value === \"\")) {\n            return \"1\";\n        }\n        if ((property.includes(\"padding\") || property.includes(\"margin\")) && (value === \"0px\" || value === \"0\")) {\n            return \"0\";\n        }\n        if (property === \"borderRadius\" && (value === \"0px\" || value === \"0\")) {\n            return \"0\";\n        }\n        if (property === \"letterSpacing\" && (value === \"normal\" || value === \"0px\")) {\n            return \"normal\";\n        }\n        if (property === \"gap\" && (value === \"normal\" || value === \"0px\")) {\n            return \"normal\";\n        }\n        return value;\n    };\n    return {\n        fontSize: normalizeValue(computed.fontSize, \"fontSize\"),\n        color: normalizeValue(computed.color, \"color\"),\n        fontWeight: normalizeValue(computed.fontWeight, \"fontWeight\"),\n        fontStyle: normalizeValue(computed.fontStyle, \"fontStyle\"),\n        textDecoration: normalizeValue(computed.textDecoration, \"textDecoration\"),\n        textAlign: normalizeValue(computed.textAlign, \"textAlign\"),\n        lineHeight: normalizeValue(computed.lineHeight, \"lineHeight\"),\n        letterSpacing: normalizeValue(computed.letterSpacing, \"letterSpacing\"),\n        paddingLeft: normalizeValue(computed.paddingLeft, \"paddingLeft\"),\n        paddingRight: normalizeValue(computed.paddingRight, \"paddingRight\"),\n        paddingTop: normalizeValue(computed.paddingTop, \"paddingTop\"),\n        paddingBottom: normalizeValue(computed.paddingBottom, \"paddingBottom\"),\n        marginLeft: normalizeValue(computed.marginLeft, \"marginLeft\"),\n        marginRight: normalizeValue(computed.marginRight, \"marginRight\"),\n        marginTop: normalizeValue(computed.marginTop, \"marginTop\"),\n        marginBottom: normalizeValue(computed.marginBottom, \"marginBottom\"),\n        backgroundColor: normalizeValue(computed.backgroundColor, \"backgroundColor\"),\n        backgroundImage: normalizeValue(computed.backgroundImage, \"backgroundImage\"),\n        borderRadius: normalizeValue(computed.borderRadius, \"borderRadius\"),\n        fontFamily: normalizeValue(computed.fontFamily, \"fontFamily\"),\n        opacity: normalizeValue(computed.opacity, \"opacity\"),\n        display: normalizeValue(computed.display, \"display\"),\n        flexDirection: normalizeValue(computed.flexDirection, \"flexDirection\"),\n        alignItems: normalizeValue(computed.alignItems, \"alignItems\"),\n        justifyContent: normalizeValue(computed.justifyContent, \"justifyContent\"),\n        gap: normalizeValue(computed.gap, \"gap\")\n    };\n};\nvar normalizeImageSrc = (input)=>{\n    if (!input) return \"\";\n    try {\n        const url = new URL(input, window.location.origin);\n        if (url.pathname === \"/_next/image\") {\n            const real = url.searchParams.get(\"url\");\n            if (real) return decodeURIComponent(real);\n        }\n        return url.href;\n    } catch  {\n        return input;\n    }\n};\nvar wrapMultiline = (text)=>{\n    if (text.includes(\"\\n\")) {\n        const escaped = text.replace(/\\n/g, \"\\\\n\");\n        return `{\\`${escaped}\\`}`;\n    }\n    return text;\n};\nfunction HoverReceiver() {\n    const [hoverBox, setHoverBox] = (0, import_react.useState)(null);\n    const [hoverBoxes, setHoverBoxes] = (0, import_react.useState)([]);\n    const [focusBox, setFocusBox] = (0, import_react.useState)(null);\n    const [focusedElementId, setFocusedElementId] = (0, import_react.useState)(null);\n    const [isVisualEditMode, setIsVisualEditMode] = (0, import_react.useState)(()=>{\n        if (false) {}\n        return false;\n    });\n    const [isResizing, setIsResizing] = (0, import_react.useState)(false);\n    const [resizeHandle, setResizeHandle] = (0, import_react.useState)(null);\n    const [resizeStart, setResizeStart] = (0, import_react.useState)(null);\n    const [isScrolling, setIsScrolling] = (0, import_react.useState)(false);\n    const [hoverTag, setHoverTag] = (0, import_react.useState)(null);\n    const [focusTag, setFocusTag] = (0, import_react.useState)(null);\n    const isResizingRef = (0, import_react.useRef)(false);\n    const lastHitElementRef = (0, import_react.useRef)(null);\n    const lastHitIdRef = (0, import_react.useRef)(null);\n    const focusedElementRef = (0, import_react.useRef)(null);\n    const isVisualEditModeRef = (0, import_react.useRef)(false);\n    const scrollTimeoutRef = (0, import_react.useRef)(null);\n    const originalContentRef = (0, import_react.useRef)(\"\");\n    const originalSrcRef = (0, import_react.useRef)(\"\");\n    const focusedImageElementRef = (0, import_react.useRef)(null);\n    const editingElementRef = (0, import_react.useRef)(null);\n    const wasEditableRef = (0, import_react.useRef)(false);\n    const styleElementRef = (0, import_react.useRef)(null);\n    const originalStylesRef = (0, import_react.useRef)({});\n    const appliedStylesRef = (0, import_react.useRef)(/* @__PURE__ */ new Map());\n    const hasStyleChangesRef = (0, import_react.useRef)(false);\n    const lastClickTimeRef = (0, import_react.useRef)(0);\n    const pendingCleanupRef = (0, import_react.useRef)(null);\n    const loadedFontFamilies = (0, import_react.useRef)(/* @__PURE__ */ new Set());\n    const persistentFontMap = (0, import_react.useRef)(/* @__PURE__ */ new Map());\n    const persistentFontTimeouts = (0, import_react.useRef)(/* @__PURE__ */ new Map());\n    (0, import_react.useEffect)(()=>{\n        isVisualEditModeRef.current = isVisualEditMode;\n        if (false) {}\n    }, [\n        isVisualEditMode\n    ]);\n    (0, import_react.useEffect)(()=>{\n        if (isVisualEditMode) {\n            window.parent.postMessage({\n                type: CHANNEL,\n                msg: \"VISUAL_EDIT_MODE_ACK\",\n                active: true\n            }, \"*\");\n            window.parent.postMessage({\n                type: CHANNEL,\n                msg: \"VISUAL_EDIT_MODE_RESTORED\",\n                active: true\n            }, \"*\");\n            setTimeout(()=>{\n                if (false) {}\n            }, 500);\n        }\n    }, []);\n    const expandBox = (rect)=>({\n            top: rect.top - BOX_PADDING,\n            left: rect.left - BOX_PADDING,\n            width: rect.width + BOX_PADDING * 2,\n            height: rect.height + BOX_PADDING * 2\n        });\n    const updateFocusBox = ()=>{\n        if (focusedElementRef.current) {\n            const r = focusedElementRef.current.getBoundingClientRect();\n            setFocusBox(expandBox(r));\n        }\n    };\n    (0, import_react.useEffect)(()=>{\n        if (isVisualEditMode && !styleElementRef.current) {\n            const style = document.createElement(\"style\");\n            style.textContent = `\n        [contenteditable=\"true\"]:focus {\n          outline: none !important;\n          box-shadow: none !important;\n          border-color: inherit !important;\n        }\n        [contenteditable=\"true\"] {\n          cursor: text !important;\n        }\n        /* Prevent the default blue highlight on contenteditable */\n        [contenteditable=\"true\"]::selection {\n          background-color: rgba(59, 130, 246, 0.3);\n        }\n        [contenteditable=\"true\"]::-moz-selection {\n          background-color: rgba(59, 130, 246, 0.3);\n        }\n        /* Prevent child elements from being editable */\n        [contenteditable=\"true\"] [contenteditable=\"false\"] {\n          user-select: none !important;\n          -webkit-user-select: none !important;\n          -moz-user-select: none !important;\n          -ms-user-select: none !important;\n          opacity: 0.7 !important;\n          cursor: default !important;\n        }\n        /* Ensure protected elements can't be selected */\n        [data-orchids-protected=\"true\"] {\n          user-select: none !important;\n          -webkit-user-select: none !important;\n          -moz-user-select: none !important;\n          -ms-user-select: none !important;\n        }\n        /* Visual edit overlay styles */\n        .orchids-hover-box {\n          position: fixed;\n          pointer-events: none;\n          border: 0.5px dashed #38bdf8;\n          background-color: rgba(191, 219, 254, 0.2);\n          border-radius: 0.125rem;\n        }\n        .orchids-hover-tag {\n          position: fixed;\n          pointer-events: none;\n          font-size: 10px;\n          color: white;\n          background-color: #38bdf8;\n          padding: 0.125rem 0.25rem;\n          border-radius: 0.125rem;\n        }\n        .orchids-focus-tag {\n          position: fixed;\n          font-size: 10px;\n          font-weight: 600;\n          color: white;\n          background-color: #3b82f6;\n          padding: 0 0.25rem;\n          border-radius: 0.125rem;\n          pointer-events: none;\n          user-select: none;\n        }\n        .orchids-focus-box {\n          position: fixed;\n          pointer-events: none;\n          border: 1.5px solid #38bdf8;\n          border-radius: 0.125rem;\n        }\n        .orchids-resize-handle {\n          position: fixed;\n          width: 0.5rem;\n          height: 0.5rem;\n          background-color: #38bdf8;\n          border-radius: 50%;\n          pointer-events: auto;\n        }\n        .orchids-resize-handle-nw {\n          cursor: nw-resize;\n        }\n        .orchids-resize-handle-ne {\n          cursor: ne-resize;\n        }\n        .orchids-resize-handle-sw {\n          cursor: sw-resize;\n        }\n        .orchids-resize-handle-se {\n          cursor: se-resize;\n        }\n        .orchids-resize-handle-n {\n          cursor: n-resize;\n        }\n        .orchids-resize-handle-s {\n          cursor: s-resize;\n        }\n        .orchids-resize-handle-w {\n          cursor: w-resize;\n        }\n        .orchids-resize-handle-e {\n          cursor: e-resize;\n        }\n      `;\n            document.head.appendChild(style);\n            styleElementRef.current = style;\n        } else if (!isVisualEditMode && styleElementRef.current) {\n            styleElementRef.current.remove();\n            styleElementRef.current = null;\n        }\n        return ()=>{\n            if (styleElementRef.current) {\n                styleElementRef.current.remove();\n                styleElementRef.current = null;\n            }\n        };\n    }, [\n        isVisualEditMode\n    ]);\n    const protectChildElements = (element)=>{\n        const childElements = element.querySelectorAll(\"*\");\n        childElements.forEach((child)=>{\n            const childEl = child;\n            childEl.contentEditable = \"false\";\n            childEl.setAttribute(\"data-orchids-protected\", \"true\");\n            childEl.style.userSelect = \"none\";\n            childEl.style.webkitUserSelect = \"none\";\n        });\n    };\n    const restoreChildElements = (element)=>{\n        const protectedElements = element.querySelectorAll('[data-orchids-protected=\"true\"]');\n        protectedElements.forEach((child)=>{\n            const childEl = child;\n            childEl.removeAttribute(\"contenteditable\");\n            childEl.removeAttribute(\"data-orchids-protected\");\n            childEl.style.userSelect = \"\";\n            childEl.style.webkitUserSelect = \"\";\n        });\n    };\n    const handleTextChange = (element)=>{\n        if (element !== editingElementRef.current) {\n            console.warn(\"Attempting to handle text change for non-editing element\");\n            return;\n        }\n        const orchidsId = element.getAttribute(\"data-orchids-id\");\n        if (!orchidsId) return;\n        let newText;\n        let oldText;\n        if (element.childElementCount > 0) {\n            newText = extractDirectTextContent(element);\n            oldText = originalContentRef.current;\n        } else {\n            newText = element.innerText || element.textContent || \"\";\n            oldText = originalContentRef.current;\n        }\n        if (newText !== oldText) {\n            const parsed = parseOrchidsId(orchidsId);\n            if (!parsed) return;\n            const msg = {\n                type: CHANNEL,\n                msg: \"TEXT_CHANGED\",\n                id: orchidsId,\n                oldText: wrapMultiline(oldText),\n                newText: wrapMultiline(newText),\n                filePath: parsed.filePath,\n                line: parsed.line,\n                column: parsed.column\n            };\n            postMessageDedup(msg);\n            originalContentRef.current = newText;\n        }\n    };\n    const handleStyleChange = (element, styles)=>{\n        const orchidsId = element.getAttribute(\"data-orchids-id\");\n        if (!orchidsId) return;\n        const parsed = parseOrchidsId(orchidsId);\n        if (!parsed) return;\n        const allMatchingElements = document.querySelectorAll(`[data-orchids-id=\"${orchidsId}\"]`);\n        allMatchingElements.forEach((el)=>{\n            Object.entries(styles).forEach(([property, value])=>{\n                const cssProp = property.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n                let finalValue = value;\n                if (property === \"backgroundColor\" && (value === \"transparent\" || value === \"rgba(0, 0, 0, 0)\" || value === \"rgb(0, 0, 0, 0)\")) {\n                    finalValue = \"transparent\";\n                }\n                if (property === \"backgroundColor\" && finalValue === \"transparent\" || property === \"backgroundImage\" && value === \"none\" || property === \"textDecoration\" && value === \"none\" || property === \"fontStyle\" && value === \"normal\" || property === \"opacity\" && value === \"1\" || (property.includes(\"padding\") || property.includes(\"margin\")) && value === \"0\" || property === \"borderRadius\" && value === \"0\" || property === \"letterSpacing\" && value === \"normal\" || property === \"gap\" && value === \"normal\") {\n                    el.style.removeProperty(cssProp);\n                } else {\n                    el.style.setProperty(cssProp, finalValue, \"important\");\n                }\n            });\n        });\n        const existingStyles = appliedStylesRef.current.get(orchidsId) || {};\n        appliedStylesRef.current.set(orchidsId, {\n            ...existingStyles,\n            ...styles\n        });\n        hasStyleChangesRef.current = true;\n        requestAnimationFrame(()=>{\n            updateFocusBox();\n        });\n    };\n    const handleStyleBlur = (element)=>{\n        if (!hasStyleChangesRef.current) return;\n        const orchidsId = element.getAttribute(\"data-orchids-id\");\n        if (!orchidsId) return;\n        const parsed = parseOrchidsId(orchidsId);\n        if (!parsed) return;\n        const appliedStyles = appliedStylesRef.current.get(orchidsId);\n        if (!appliedStyles || Object.keys(appliedStyles).length === 0) return;\n        const className = element.getAttribute(\"class\") || \"\";\n        const msg = {\n            type: CHANNEL,\n            msg: \"STYLE_BLUR\",\n            id: orchidsId,\n            styles: appliedStyles,\n            className,\n            filePath: parsed.filePath,\n            line: parsed.line,\n            column: parsed.column\n        };\n        postMessageDedup(msg);\n        hasStyleChangesRef.current = false;\n    };\n    const flushImageSrcChange = ()=>{\n        const imgElement = focusedImageElementRef.current;\n        if (!imgElement) return;\n        const orchidsId = imgElement.getAttribute(\"data-orchids-id\");\n        if (!orchidsId) return;\n        const parsed = parseOrchidsId(orchidsId);\n        if (!parsed) return;\n        const newSrc = normalizeImageSrc(imgElement.src);\n        const oldSrc = normalizeImageSrc(originalSrcRef.current);\n        if (!newSrc || newSrc === oldSrc) return;\n        const msg = {\n            type: CHANNEL,\n            msg: \"IMAGE_BLUR\",\n            id: orchidsId,\n            oldSrc,\n            newSrc,\n            filePath: parsed.filePath,\n            line: parsed.line,\n            column: parsed.column\n        };\n        postMessageDedup(msg);\n        originalSrcRef.current = newSrc;\n        focusedImageElementRef.current = null;\n    };\n    (0, import_react.useEffect)(()=>{\n        function handleMessage(e) {\n            if (e.data?.type === \"ORCHIDS_STYLE_UPDATE\") {\n                const { elementId, styles } = e.data;\n                const allMatchingElements = document.querySelectorAll(`[data-orchids-id=\"${elementId}\"]`);\n                if (allMatchingElements.length > 0) {\n                    const fam = styles.fontFamily || styles[\"fontFamily\"];\n                    if (fam) {\n                        const familyKey = fam.replace(/['\\s]+/g, \"+\");\n                        if (!loadedFontFamilies.current.has(familyKey)) {\n                            const link = document.createElement(\"link\");\n                            link.rel = \"stylesheet\";\n                            link.href = `https://fonts.googleapis.com/css2?family=${familyKey}:wght@400&display=swap`;\n                            document.head.appendChild(link);\n                            loadedFontFamilies.current.add(familyKey);\n                        }\n                    }\n                    if (fam) {\n                        persistentFontMap.current.set(elementId, fam);\n                        const existingTimeout = persistentFontTimeouts.current.get(elementId);\n                        if (existingTimeout) {\n                            clearTimeout(existingTimeout);\n                        }\n                        const timeoutId = window.setTimeout(()=>{\n                            persistentFontMap.current.delete(elementId);\n                            persistentFontTimeouts.current.delete(elementId);\n                        }, 2e3);\n                        persistentFontTimeouts.current.set(elementId, timeoutId);\n                    }\n                    allMatchingElements.forEach((element)=>{\n                        if (focusedElementRef.current === element) {\n                            handleStyleChange(element, styles);\n                        } else {\n                            Object.entries(styles).forEach(([property, value])=>{\n                                const cssProp = property.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n                                let finalValue = String(value);\n                                if (property === \"backgroundColor\" && (value === \"transparent\" || value === \"rgba(0, 0, 0, 0)\" || value === \"rgb(0, 0, 0, 0)\")) {\n                                    finalValue = \"transparent\";\n                                }\n                                if (property === \"backgroundColor\" && finalValue === \"transparent\" || property === \"backgroundImage\" && value === \"none\" || property === \"textDecoration\" && value === \"none\" || property === \"fontStyle\" && value === \"normal\" || property === \"opacity\" && value === \"1\" || (property.includes(\"padding\") || property.includes(\"margin\")) && value === \"0\" || property === \"borderRadius\" && value === \"0\" || property === \"letterSpacing\" && value === \"normal\" || property === \"gap\" && value === \"normal\") {\n                                    element.style.removeProperty(cssProp);\n                                } else {\n                                    element.style.setProperty(cssProp, finalValue, \"important\");\n                                }\n                            });\n                        }\n                    });\n                }\n            } else if (e.data?.type === \"ORCHIDS_IMAGE_UPDATE\") {\n                const { elementId, src, oldSrc } = e.data;\n                let element = null;\n                const candidates = document.querySelectorAll(`[data-orchids-id=\"${elementId}\"]`);\n                candidates.forEach((el)=>{\n                    if (el.tagName.toLowerCase() === \"img\") {\n                        const img = el;\n                        const norm = normalizeImageSrc(img.src);\n                        if (!element) element = img;\n                        if (oldSrc && normalizeImageSrc(oldSrc) === norm) {\n                            element = img;\n                        }\n                    }\n                });\n                if (!element) return;\n                if (element.tagName.toLowerCase() === \"img\") {\n                    const imgEl = element;\n                    {\n                        imgEl.removeAttribute(\"srcset\");\n                        imgEl.srcset = \"\";\n                        imgEl.src = src;\n                        originalSrcRef.current = normalizeImageSrc(src);\n                        focusedImageElementRef.current = imgEl;\n                        imgEl.onload = ()=>updateFocusBox();\n                    }\n                }\n            } else if (e.data?.type === \"RESIZE_ELEMENT\") {\n                const { elementId, width, height } = e.data;\n                const element = document.querySelector(`[data-orchids-id=\"${elementId}\"]`);\n                if (element && focusedElementRef.current === element) {\n                    element.style.setProperty(\"width\", `${width}px`, \"important\");\n                    element.style.setProperty(\"height\", `${height}px`, \"important\");\n                    updateFocusBox();\n                }\n            }\n        }\n        window.addEventListener(\"message\", handleMessage);\n        return ()=>window.removeEventListener(\"message\", handleMessage);\n    }, []);\n    const handleResizeStart = (e, handle)=>{\n        if (!focusedElementRef.current) return;\n        e.preventDefault();\n        e.stopPropagation();\n        const rect = focusedElementRef.current.getBoundingClientRect();\n        setHoverBox(null);\n        lastHitElementRef.current = null;\n        document.body.style.pointerEvents = \"none\";\n        const resizeHandles = document.querySelectorAll(\".resize-handle\");\n        resizeHandles.forEach((handle2)=>{\n            handle2.style.pointerEvents = \"auto\";\n        });\n        setIsResizing(true);\n        isResizingRef.current = true;\n        setResizeHandle(handle);\n        setResizeStart({\n            x: e.clientX,\n            y: e.clientY,\n            width: rect.width,\n            height: rect.height\n        });\n    };\n    (0, import_react.useEffect)(()=>{\n        if (!isResizing || !resizeStart || !resizeHandle || !focusedElementRef.current) return;\n        const handleMouseMove = (e)=>{\n            const dx = e.clientX - resizeStart.x;\n            const dy = e.clientY - resizeStart.y;\n            let newWidth = resizeStart.width;\n            let newHeight = resizeStart.height;\n            if (resizeHandle.includes(\"e\")) newWidth = resizeStart.width + dx;\n            if (resizeHandle.includes(\"w\")) newWidth = resizeStart.width - dx;\n            if (resizeHandle.includes(\"s\")) newHeight = resizeStart.height + dy;\n            if (resizeHandle.includes(\"n\")) newHeight = resizeStart.height - dy;\n            const parent = focusedElementRef.current?.parentElement;\n            if (parent) {\n                const parentRect = parent.getBoundingClientRect();\n                const parentStyles = window.getComputedStyle(parent);\n                const parentPaddingLeft = parseFloat(parentStyles.paddingLeft) || 0;\n                const parentPaddingRight = parseFloat(parentStyles.paddingRight) || 0;\n                const parentPaddingTop = parseFloat(parentStyles.paddingTop) || 0;\n                const parentPaddingBottom = parseFloat(parentStyles.paddingBottom) || 0;\n                const maxWidth = parentRect.width - parentPaddingLeft - parentPaddingRight;\n                const maxHeight = parentRect.height - parentPaddingTop - parentPaddingBottom;\n                const exceedsWidth = newWidth > maxWidth;\n                const exceedsHeight = newHeight > maxHeight;\n                newWidth = Math.max(20, exceedsWidth ? newWidth : Math.min(newWidth, maxWidth));\n                newHeight = Math.max(20, exceedsHeight ? newHeight : Math.min(newHeight, maxHeight));\n            } else {\n                newWidth = Math.max(20, newWidth);\n                newHeight = Math.max(20, newHeight);\n            }\n            if (hoverBox) {\n                setHoverBox(null);\n            }\n            if (focusedElementId) {\n                window.parent.postMessage({\n                    type: CHANNEL,\n                    msg: \"RESIZE_ELEMENT\",\n                    elementId: focusedElementId,\n                    width: Math.round(newWidth),\n                    height: Math.round(newHeight)\n                }, \"*\");\n            }\n        };\n        const handleMouseUp = ()=>{\n            if (focusedElementRef.current && focusedElementId) {\n                const element = focusedElementRef.current;\n                const computedStyle = window.getComputedStyle(element);\n                const width = parseFloat(computedStyle.width) || element.offsetWidth;\n                const height = parseFloat(computedStyle.height) || element.offsetHeight;\n                const maxWidth = computedStyle.maxWidth;\n                const maxHeight = computedStyle.maxHeight;\n                const hasMaxWidth = maxWidth && maxWidth !== \"none\" && maxWidth !== \"initial\";\n                const hasMaxHeight = maxHeight && maxHeight !== \"none\" && maxHeight !== \"initial\";\n                const parent = element.parentElement;\n                let widthValue = `${Math.round(width)}px`;\n                let heightValue = `${Math.round(height)}px`;\n                if (parent) {\n                    const parentRect = parent.getBoundingClientRect();\n                    const parentStyles = window.getComputedStyle(parent);\n                    const parentPaddingLeft = parseFloat(parentStyles.paddingLeft) || 0;\n                    const parentPaddingRight = parseFloat(parentStyles.paddingRight) || 0;\n                    const parentPaddingTop = parseFloat(parentStyles.paddingTop) || 0;\n                    const parentPaddingBottom = parseFloat(parentStyles.paddingBottom) || 0;\n                    const parentInnerWidth = parentRect.width - parentPaddingLeft - parentPaddingRight;\n                    const parentInnerHeight = parentRect.height - parentPaddingTop - parentPaddingBottom;\n                    const widthPercent = width / parentInnerWidth * 100;\n                    const heightPercent = height / parentInnerHeight * 100;\n                    if (Math.abs(widthPercent - Math.round(widthPercent)) < 0.1 || [\n                        25,\n                        33.333,\n                        50,\n                        66.667,\n                        75,\n                        100\n                    ].some((v)=>Math.abs(widthPercent - v) < 0.5)) {\n                        widthValue = `${Math.round(widthPercent * 10) / 10}%`;\n                    }\n                    if (Math.abs(heightPercent - Math.round(heightPercent)) < 0.1 && [\n                        25,\n                        50,\n                        75,\n                        100\n                    ].includes(Math.round(heightPercent))) {\n                        heightValue = `${Math.round(heightPercent)}%`;\n                    }\n                }\n                const styles = {};\n                styles.width = widthValue;\n                styles.height = heightValue;\n                if (hasMaxWidth) {\n                    styles.maxWidth = widthValue;\n                }\n                if (hasMaxHeight) {\n                    styles.maxHeight = heightValue;\n                }\n                const msg = {\n                    type: CHANNEL,\n                    msg: \"STYLE_BLUR\",\n                    id: focusedElementId,\n                    styles,\n                    filePath: \"\",\n                    line: 0,\n                    column: 0,\n                    className: element.getAttribute(\"class\") || \"\"\n                };\n                const orchidsId = element.getAttribute(\"data-orchids-id\");\n                if (orchidsId) {\n                    const parsed = parseOrchidsId(orchidsId);\n                    if (parsed) {\n                        msg.filePath = parsed.filePath;\n                        msg.line = parsed.line;\n                        msg.column = parsed.column;\n                    }\n                }\n                window.parent.postMessage(msg, \"*\");\n            }\n            setIsResizing(false);\n            isResizingRef.current = false;\n            setResizeHandle(null);\n            setResizeStart(null);\n            document.body.style.pointerEvents = \"\";\n            lastHitElementRef.current = null;\n        };\n        document.addEventListener(\"mousemove\", handleMouseMove);\n        document.addEventListener(\"mouseup\", handleMouseUp);\n        return ()=>{\n            document.removeEventListener(\"mousemove\", handleMouseMove);\n            document.removeEventListener(\"mouseup\", handleMouseUp);\n        };\n    }, [\n        isResizing,\n        resizeStart,\n        resizeHandle,\n        focusedElementId,\n        hoverBox\n    ]);\n    const cleanupEditingElement = ()=>{\n        if (editingElementRef.current) {\n            const element = editingElementRef.current;\n            editingElementRef.current = null;\n            handleStyleBlur(element);\n            handleTextChange(element);\n            if (element.childElementCount > 0) {\n                restoreChildElements(element);\n            }\n            if (!wasEditableRef.current) {\n                element.contentEditable = \"false\";\n            }\n            const currentStyle = element.getAttribute(\"style\") || \"\";\n            const cleanedStyle = currentStyle.replace(/outline:\\s*none\\s*!important;?/gi, \"\").replace(/box-shadow:\\s*none\\s*!important;?/gi, \"\").trim().replace(/;\\s*;/g, \";\").replace(/^;|;$/g, \"\");\n            if (cleanedStyle) {\n                element.setAttribute(\"style\", cleanedStyle);\n            } else {\n                element.removeAttribute(\"style\");\n            }\n            element.blur();\n            const handlers = element._editHandlers;\n            if (handlers) {\n                element.removeEventListener(\"focus\", handlers.focus);\n                element.removeEventListener(\"blur\", handlers.blur);\n                element.removeEventListener(\"input\", handlers.input);\n                delete element._editHandlers;\n            }\n            wasEditableRef.current = false;\n            originalContentRef.current = \"\";\n        }\n    };\n    (0, import_react.useEffect)(()=>{\n        if (!isVisualEditMode) return;\n        const preventLinkClick = (e)=>{\n            const target = e.target;\n            const link = target.closest(\"a\");\n            if (link && !link.isContentEditable) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        };\n        const preventFormSubmit = (e)=>{\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        document.addEventListener(\"click\", preventLinkClick, true);\n        document.addEventListener(\"submit\", preventFormSubmit, true);\n        return ()=>{\n            document.removeEventListener(\"click\", preventLinkClick, true);\n            document.removeEventListener(\"submit\", preventFormSubmit, true);\n        };\n    }, [\n        isVisualEditMode\n    ]);\n    (0, import_react.useEffect)(()=>{\n        if (!isVisualEditMode) {\n            cleanupEditingElement();\n            appliedStylesRef.current.clear();\n            hasStyleChangesRef.current = false;\n            focusedImageElementRef.current = null;\n        }\n    }, [\n        isVisualEditMode\n    ]);\n    (0, import_react.useEffect)(()=>{\n        if (focusedElementRef.current) {\n            const handleUpdate = ()=>{\n                updateFocusBox();\n                if (focusedElementRef.current && focusedElementId) {\n                    const fr = focusedElementRef.current.getBoundingClientRect();\n                    const fBox = expandBox(fr);\n                    if (fBox) {\n                        const focMsg = {\n                            type: CHANNEL,\n                            msg: \"FOCUS_MOVED\",\n                            id: focusedElementId,\n                            rect: {\n                                top: fBox.top,\n                                left: fBox.left,\n                                width: fBox.width,\n                                height: fBox.height\n                            }\n                        };\n                        postMessageDedup(focMsg);\n                    }\n                }\n            };\n            window.addEventListener(\"scroll\", handleUpdate, true);\n            window.addEventListener(\"resize\", handleUpdate);\n            const resizeObserver = new ResizeObserver(handleUpdate);\n            resizeObserver.observe(focusedElementRef.current);\n            return ()=>{\n                window.removeEventListener(\"scroll\", handleUpdate, true);\n                window.removeEventListener(\"resize\", handleUpdate);\n                resizeObserver.disconnect();\n            };\n        }\n    }, [\n        focusedElementId\n    ]);\n    (0, import_react.useEffect)(()=>{\n        function onPointerMove(e) {\n            if (isResizingRef.current) {\n                return;\n            }\n            if (!isVisualEditModeRef.current) return;\n            if (isScrolling) return;\n            const hit = document.elementFromPoint(e.clientX, e.clientY)?.closest(\"[data-orchids-id]\") ?? null;\n            if (hit !== lastHitElementRef.current) {\n                lastHitElementRef.current = hit;\n                if (!hit) {\n                    setHoverBox(null);\n                    setHoverBoxes([]);\n                    setHoverTag(null);\n                    lastHitIdRef.current = null;\n                    flushImageSrcChange();\n                    const msg2 = {\n                        type: CHANNEL,\n                        msg: \"HIT\",\n                        id: null,\n                        tag: null,\n                        rect: null\n                    };\n                    postMessageDedup(msg2);\n                    return;\n                }\n                const hitId = hit.getAttribute(\"data-orchids-id\");\n                if (hitId === lastHitIdRef.current) {\n                    return;\n                }\n                lastHitIdRef.current = hitId;\n                const tagName = hit.getAttribute(\"data-orchids-name\") || hit.tagName.toLowerCase();\n                const allMatchingElements = document.querySelectorAll(`[data-orchids-id=\"${hitId}\"]`);\n                const boxes = [];\n                allMatchingElements.forEach((element)=>{\n                    const elementId = element.getAttribute(\"data-orchids-id\");\n                    if (elementId === focusedElementId) {\n                        return;\n                    }\n                    const rect = element.getBoundingClientRect();\n                    boxes.push(expandBox(rect));\n                });\n                setHoverBoxes(boxes);\n                if (hitId !== focusedElementId) {\n                    const r = hit.getBoundingClientRect();\n                    const expandedBox = expandBox(r);\n                    setHoverBox(expandedBox);\n                } else {\n                    setHoverBox(null);\n                }\n                setHoverTag(tagName);\n                const msg = {\n                    type: CHANNEL,\n                    msg: \"HIT\",\n                    id: hitId,\n                    tag: tagName,\n                    rect: hitId !== focusedElementId ? expandBox(hit.getBoundingClientRect()) : null\n                };\n                postMessageDedup(msg);\n            }\n        }\n        function onPointerLeave() {\n            if (!isVisualEditModeRef.current) return;\n            if (isResizingRef.current) return;\n            setHoverBox(null);\n            setHoverBoxes([]);\n            setHoverTag(null);\n            flushImageSrcChange();\n            lastHitElementRef.current = null;\n            lastHitIdRef.current = null;\n            const msg = {\n                type: CHANNEL,\n                msg: \"HIT\",\n                id: null,\n                tag: null,\n                rect: null\n            };\n            postMessageDedup(msg);\n        }\n        function onMouseDownCapture(e) {\n            if (isResizingRef.current) return;\n            if (!isVisualEditModeRef.current) return;\n            const hit = e.target?.closest(\"[data-orchids-id]\");\n            if (hit && isTextEditable(hit)) {\n                wasEditableRef.current = hit.contentEditable === \"true\";\n                if (!wasEditableRef.current) {\n                    const currentStyle = hit.getAttribute(\"style\") || \"\";\n                    hit.setAttribute(\"style\", `${currentStyle}; outline: none !important; box-shadow: none !important;`);\n                    hit.contentEditable = \"true\";\n                    if (hit.childElementCount > 0) {\n                        protectChildElements(hit);\n                    }\n                }\n            }\n        }\n        function onClickCapture(e) {\n            if (isResizingRef.current) return;\n            if (!isVisualEditModeRef.current) return;\n            const now = Date.now();\n            if (now - lastClickTimeRef.current < 100) {\n                return;\n            }\n            lastClickTimeRef.current = now;\n            const target = e.target;\n            const hit = target.closest(\"[data-orchids-id]\");\n            if (hit) {\n                const tagName = hit.getAttribute(\"data-orchids-name\") || hit.tagName.toLowerCase();\n                const hitId = hit.getAttribute(\"data-orchids-id\");\n                const isEditable = isTextEditable(hit);\n                const isLink = hit.tagName.toLowerCase() === \"a\" || !!hit.closest(\"a\");\n                const isButton = hit.tagName.toLowerCase() === \"button\" || hit.getAttribute(\"role\") === \"button\";\n                if (isLink || isButton || !isEditable) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                const prevFocused = focusedElementRef.current;\n                focusedElementRef.current = hit;\n                setFocusedElementId(hitId);\n                setFocusTag(tagName);\n                if (hitId && \"undefined\" !== \"undefined\") {}\n                const allMatchingElements = document.querySelectorAll(`[data-orchids-id=\"${hitId}\"]`);\n                const boxes = [];\n                allMatchingElements.forEach((element)=>{\n                    if (element === hit) {\n                        return;\n                    }\n                    const rect = element.getBoundingClientRect();\n                    boxes.push(expandBox(rect));\n                });\n                setHoverBoxes(boxes);\n                if (boxes.length > 0) {\n                    setHoverTag(tagName);\n                }\n                if (hit.tagName.toLowerCase() === \"img\") {\n                    focusedImageElementRef.current = hit;\n                } else {\n                    focusedImageElementRef.current = null;\n                }\n                originalStylesRef.current = getCurrentStyles(hit);\n                if (isEditable) {\n                    if (pendingCleanupRef.current) {\n                        clearTimeout(pendingCleanupRef.current);\n                        pendingCleanupRef.current = null;\n                    }\n                    if (editingElementRef.current && editingElementRef.current !== hit) {\n                        editingElementRef.current.blur();\n                        cleanupEditingElement();\n                    }\n                    if (hit !== editingElementRef.current) {\n                        editingElementRef.current = hit;\n                        if (hit.childElementCount > 0) {\n                            originalContentRef.current = extractDirectTextContent(hit);\n                        } else {\n                            originalContentRef.current = hit.innerText || hit.textContent || \"\";\n                        }\n                        const createHandlers = (element)=>{\n                            const handleFocus = ()=>{\n                                if (element !== editingElementRef.current) return;\n                                handleStyleBlur(element);\n                                if (element.childElementCount > 0) {\n                                    originalContentRef.current = extractDirectTextContent(element);\n                                } else {\n                                    originalContentRef.current = element.innerText || element.textContent || \"\";\n                                }\n                                hasStyleChangesRef.current = false;\n                            };\n                            const handleBlur = ()=>{\n                                if (element !== editingElementRef.current) return;\n                                handleStyleBlur(element);\n                                handleTextChange(element);\n                            };\n                            const handleInput = ()=>{\n                                if (element !== editingElementRef.current) return;\n                            };\n                            return {\n                                handleFocus,\n                                handleBlur,\n                                handleInput\n                            };\n                        };\n                        const handlers = createHandlers(hit);\n                        hit.addEventListener(\"focus\", handlers.handleFocus);\n                        hit.addEventListener(\"blur\", handlers.handleBlur);\n                        hit.addEventListener(\"input\", handlers.handleInput);\n                        hit._editHandlers = {\n                            focus: handlers.handleFocus,\n                            blur: handlers.handleBlur,\n                            input: handlers.handleInput\n                        };\n                    }\n                }\n                const r = hit.getBoundingClientRect();\n                const expandedBox = expandBox(r);\n                setFocusBox(expandedBox);\n                setHoverBox(null);\n                const className = hit.getAttribute(\"class\") || \"\";\n                const srcRaw = hit.tagName.toLowerCase() === \"img\" ? hit.src : void 0;\n                if (srcRaw) {\n                    originalSrcRef.current = normalizeImageSrc(srcRaw);\n                }\n                const computedStyles = getCurrentStyles(hit);\n                const msg = {\n                    type: CHANNEL,\n                    msg: \"ELEMENT_CLICKED\",\n                    id: hitId,\n                    tag: tagName,\n                    rect: expandedBox ? {\n                        top: expandedBox.top,\n                        left: expandedBox.left,\n                        width: expandedBox.width,\n                        height: expandedBox.height\n                    } : {\n                        top: 0,\n                        left: 0,\n                        width: 0,\n                        height: 0\n                    },\n                    clickPosition: {\n                        x: e.clientX,\n                        y: e.clientY\n                    },\n                    isEditable,\n                    currentStyles: computedStyles,\n                    className,\n                    src: srcRaw\n                };\n                postMessageDedup(msg);\n                setTimeout(()=>{\n                    flushImageSrcChange();\n                    if (prevFocused && prevFocused !== hit) {\n                        handleStyleBlur(prevFocused);\n                    }\n                    if (editingElementRef.current && editingElementRef.current !== hit) {\n                        cleanupEditingElement();\n                    }\n                }, 0);\n            } else {\n                if (focusedElementRef.current) {\n                    flushImageSrcChange();\n                    handleStyleBlur(focusedElementRef.current);\n                    cleanupEditingElement();\n                    focusedElementRef.current = null;\n                    setFocusedElementId(null);\n                    setFocusTag(null);\n                    setFocusBox(null);\n                    setHoverBox(null);\n                    setHoverBoxes([]);\n                    setHoverTag(null);\n                    if (false) {}\n                    const msg = {\n                        type: CHANNEL,\n                        msg: \"ELEMENT_CLICKED\",\n                        id: null,\n                        tag: null,\n                        rect: {\n                            top: 0,\n                            left: 0,\n                            width: 0,\n                            height: 0\n                        },\n                        clickPosition: {\n                            x: e.clientX,\n                            y: e.clientY\n                        },\n                        isEditable: false,\n                        currentStyles: {},\n                        className: \"\"\n                    };\n                    postMessageDedup(msg);\n                }\n            }\n        }\n        function onMsg(e) {\n            if (e.data?.type !== CHANNEL) return;\n            if (e.data.msg === \"PREVIEW_FONT\" && \"elementId\" in e.data) {\n                const { elementId, fontFamily } = e.data;\n                if (persistentFontMap.current.has(elementId)) {\n                    return;\n                }\n                const element = document.querySelector(`[data-orchids-id=\"${elementId}\"]`);\n                if (!element) return;\n                const familyKey = fontFamily.replace(/\\s+/g, \"+\");\n                if (!loadedFontFamilies.current.has(familyKey)) {\n                    const link = document.createElement(\"link\");\n                    link.rel = \"stylesheet\";\n                    link.href = `https://fonts.googleapis.com/css2?family=${familyKey}:wght@400&display=swap`;\n                    document.head.appendChild(link);\n                    loadedFontFamilies.current.add(familyKey);\n                }\n                element.style.fontFamily = `'${fontFamily}', sans-serif`;\n                return;\n            }\n            if (e.data.msg === \"SCROLL\" && \"dx\" in e.data && \"dy\" in e.data) {\n                window.scrollBy(e.data.dx, e.data.dy);\n            }\n            if (e.data.msg === \"VISUAL_EDIT_MODE\" && \"active\" in e.data) {\n                const newMode = e.data.active;\n                setIsVisualEditMode(newMode);\n                if (!newMode && \"undefined\" !== \"undefined\") {}\n                window.parent.postMessage({\n                    type: CHANNEL,\n                    msg: \"VISUAL_EDIT_MODE_ACK\",\n                    active: newMode\n                }, \"*\");\n                if (!newMode) {\n                    flushImageSrcChange();\n                    cleanupEditingElement();\n                    focusedImageElementRef.current = null;\n                    setHoverBox(null);\n                    setHoverBoxes([]);\n                    setFocusBox(null);\n                    setFocusedElementId(null);\n                    lastHitElementRef.current = null;\n                    focusedElementRef.current = null;\n                    hasStyleChangesRef.current = false;\n                    setHoverTag(null);\n                    setFocusTag(null);\n                    const msg = {\n                        type: CHANNEL,\n                        msg: \"HIT\",\n                        id: null,\n                        tag: null,\n                        rect: null\n                    };\n                    postMessageDedup(msg);\n                }\n            }\n            if (e.data.msg === \"CLEAR_INLINE_STYLES\" && \"elementId\" in e.data) {\n                const allMatchingElements = document.querySelectorAll(`[data-orchids-id=\"${e.data.elementId}\"]`);\n                allMatchingElements.forEach((element)=>{\n                    const stylesToClear = [\n                        \"fontSize\",\n                        \"color\",\n                        \"fontWeight\",\n                        \"fontStyle\",\n                        \"textDecoration\",\n                        \"textAlign\",\n                        \"paddingLeft\",\n                        \"paddingRight\",\n                        \"paddingTop\",\n                        \"paddingBottom\",\n                        \"marginLeft\",\n                        \"marginRight\",\n                        \"marginTop\",\n                        \"marginBottom\",\n                        \"backgroundColor\",\n                        \"backgroundImage\"\n                    ];\n                    stylesToClear.forEach((prop)=>{\n                        element.style[prop] = \"\";\n                    });\n                });\n                appliedStylesRef.current.delete(e.data.elementId);\n            }\n            if (e.data.msg === \"SHOW_ELEMENT_HOVER\" && \"elementId\" in e.data) {\n                const { elementId } = e.data;\n                if (!elementId) {\n                    setHoverBoxes([]);\n                    setHoverTag(null);\n                    return;\n                }\n                const allMatchingElements = document.querySelectorAll(`[data-orchids-id=\"${elementId}\"]`);\n                if (allMatchingElements.length > 0) {\n                    const boxes = [];\n                    let tagName = \"\";\n                    allMatchingElements.forEach((element)=>{\n                        if (element === focusedElementRef.current) {\n                            return;\n                        }\n                        const rect = element.getBoundingClientRect();\n                        boxes.push(expandBox(rect));\n                        if (!tagName) {\n                            tagName = element.getAttribute(\"data-orchids-name\") || element.tagName.toLowerCase();\n                        }\n                    });\n                    setHoverBoxes(boxes);\n                    setHoverTag(boxes.length > 0 ? tagName : null);\n                }\n            }\n        }\n        function onScroll() {\n            if (isResizingRef.current) return;\n            if (!isVisualEditModeRef.current) return;\n            setIsScrolling(true);\n            setHoverBox(null);\n            setHoverBoxes([]);\n            const scrollMsg = {\n                type: CHANNEL,\n                msg: \"SCROLL_STARTED\"\n            };\n            postMessageDedup(scrollMsg);\n            if (scrollTimeoutRef.current) {\n                clearTimeout(scrollTimeoutRef.current);\n            }\n            scrollTimeoutRef.current = window.setTimeout(()=>{\n                setIsScrolling(false);\n                const scrollStopMsg = {\n                    type: CHANNEL,\n                    msg: \"SCROLL_STOPPED\"\n                };\n                postMessageDedup(scrollStopMsg);\n            }, 16);\n        }\n        document.addEventListener(\"pointermove\", onPointerMove, {\n            passive: true\n        });\n        document.addEventListener(\"pointerleave\", onPointerLeave);\n        document.addEventListener(\"mousedown\", onMouseDownCapture, {\n            capture: true\n        });\n        document.addEventListener(\"click\", onClickCapture, {\n            capture: true\n        });\n        window.addEventListener(\"message\", onMsg);\n        window.addEventListener(\"scroll\", onScroll, true);\n        return ()=>{\n            document.removeEventListener(\"pointermove\", onPointerMove);\n            document.removeEventListener(\"pointerleave\", onPointerLeave);\n            document.removeEventListener(\"mousedown\", onMouseDownCapture, true);\n            document.removeEventListener(\"click\", onClickCapture, true);\n            window.removeEventListener(\"message\", onMsg);\n            window.removeEventListener(\"scroll\", onScroll, true);\n            if (scrollTimeoutRef.current) clearTimeout(scrollTimeoutRef.current);\n        };\n    }, [\n        focusedElementId,\n        isResizing\n    ]);\n    return /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, {\n        children: [\n            isVisualEditMode && !isResizing && /* @__PURE__ */ (0, import_jsx_runtime.jsx)(import_jsx_runtime.Fragment, {\n                children: hoverBoxes.filter((box)=>box !== null).map((box, index)=>/* @__PURE__ */ (0, import_jsx_runtime.jsxs)(\"div\", {\n                        children: [\n                            /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                                className: \"orchids-hover-box\",\n                                style: {\n                                    zIndex: 1e5,\n                                    left: box.left,\n                                    top: box.top,\n                                    width: box.width,\n                                    height: box.height\n                                }\n                            }),\n                            hoverTag && /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                                className: \"orchids-hover-tag\",\n                                style: {\n                                    zIndex: 100001,\n                                    left: box.left,\n                                    top: box.top - 20\n                                },\n                                children: hoverTag\n                            })\n                        ]\n                    }, index))\n            }),\n            isVisualEditMode && focusBox && /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, {\n                children: [\n                    focusTag && /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                        className: \"orchids-focus-tag\",\n                        style: {\n                            zIndex: 100003,\n                            left: focusBox.left - 4,\n                            top: focusBox.top - 16\n                        },\n                        children: focusTag\n                    }),\n                    /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                        className: \"orchids-focus-box\",\n                        style: {\n                            zIndex: 100001,\n                            left: focusBox.left,\n                            top: focusBox.top,\n                            width: focusBox.width,\n                            height: focusBox.height\n                        }\n                    }),\n                    !isResizing && /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, {\n                        children: [\n                            /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                                className: \"orchids-resize-handle orchids-resize-handle-nw resize-handle\",\n                                style: {\n                                    zIndex: 100002,\n                                    left: focusBox.left - 4,\n                                    top: focusBox.top - 4\n                                },\n                                onMouseDown: (e)=>handleResizeStart(e, \"nw\")\n                            }),\n                            /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                                className: \"orchids-resize-handle orchids-resize-handle-ne resize-handle\",\n                                style: {\n                                    zIndex: 100002,\n                                    left: focusBox.left + focusBox.width - 4,\n                                    top: focusBox.top - 4\n                                },\n                                onMouseDown: (e)=>handleResizeStart(e, \"ne\")\n                            }),\n                            /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                                className: \"orchids-resize-handle orchids-resize-handle-sw resize-handle\",\n                                style: {\n                                    zIndex: 100002,\n                                    left: focusBox.left - 4,\n                                    top: focusBox.top + focusBox.height - 4\n                                },\n                                onMouseDown: (e)=>handleResizeStart(e, \"sw\")\n                            }),\n                            /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                                className: \"orchids-resize-handle orchids-resize-handle-se resize-handle\",\n                                style: {\n                                    zIndex: 100002,\n                                    left: focusBox.left + focusBox.width - 4,\n                                    top: focusBox.top + focusBox.height - 4\n                                },\n                                onMouseDown: (e)=>handleResizeStart(e, \"se\")\n                            }),\n                            /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                                className: \"orchids-resize-handle orchids-resize-handle-n resize-handle\",\n                                style: {\n                                    zIndex: 100002,\n                                    left: focusBox.left + focusBox.width / 2 - 4,\n                                    top: focusBox.top - 4\n                                },\n                                onMouseDown: (e)=>handleResizeStart(e, \"n\")\n                            }),\n                            /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                                className: \"orchids-resize-handle orchids-resize-handle-s resize-handle\",\n                                style: {\n                                    zIndex: 100002,\n                                    left: focusBox.left + focusBox.width / 2 - 4,\n                                    top: focusBox.top + focusBox.height - 4\n                                },\n                                onMouseDown: (e)=>handleResizeStart(e, \"s\")\n                            }),\n                            /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                                className: \"orchids-resize-handle orchids-resize-handle-w resize-handle\",\n                                style: {\n                                    zIndex: 100002,\n                                    left: focusBox.left - 4,\n                                    top: focusBox.top + focusBox.height / 2 - 4\n                                },\n                                onMouseDown: (e)=>handleResizeStart(e, \"w\")\n                            }),\n                            /* @__PURE__ */ (0, import_jsx_runtime.jsx)(\"div\", {\n                                className: \"orchids-resize-handle orchids-resize-handle-e resize-handle\",\n                                style: {\n                                    zIndex: 100002,\n                                    left: focusBox.left + focusBox.width - 4,\n                                    top: focusBox.top + focusBox.height / 2 - 4\n                                },\n                                onMouseDown: (e)=>handleResizeStart(e, \"e\")\n                            })\n                        ]\n                    })\n                ]\n            })\n        ]\n    });\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0); //# sourceMappingURL=messenger.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvb3JjaGlkcy12aXN1YWwtZWRpdHMvZGlzdC9tZXNzZW5nZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtJQUFBO0lBQUE7QUFBQTtBQUFBO0FBTUEsbUJBQTRDLHFIQUFPO0FBNGhFM0M7QUExaEVELElBQU0sVUFBVTtBQUN2QixJQUFNLHVCQUF1QjtBQUM3QixJQUFNLHNCQUFzQjtBQUk1QixJQUFJLGtCQUFrQjtBQUN0QixJQUFNLG1CQUFtQixDQUFDO0lBQ3hCLElBQUk7UUFDRixNQUFNLE1BQU0sS0FBSyxVQUFVLElBQUk7UUFDL0IsSUFBSSxRQUFRLGdCQUFpQjtRQUM3QixrQkFBa0I7SUFDcEIsU0FBUSxDQUVSO0lBQ0EsT0FBTyxPQUFPLFlBQVksTUFBTSxHQUFHO0FBQ3JDO0FBNkhBLElBQU0sY0FBYztBQUdwQixJQUFNLGlCQUFpQixDQUFDO0lBQ3RCLE1BQU0sVUFBVSxRQUFRLFFBQVEsWUFBWTtJQUU1QyxNQUFNLGVBQWU7UUFDbkI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0Y7SUFHQSxJQUNFLFFBQVEsb0JBQW9CLFVBQzVCLFlBQVksV0FDWixZQUFZLFlBQ1o7UUFDQSxPQUFPO0lBQ1Q7SUFJQSxJQUFJLGFBQWEsU0FBUyxPQUFPLEtBQUssUUFBUSxhQUFhLEtBQUssR0FBRztRQUVqRSxNQUFNLGdCQUFnQixNQUFNLEtBQUssUUFBUSxVQUFVLEVBQUUsS0FDbkQsQ0FBQyxPQUFTLEtBQUssYUFBYSxLQUFLLGFBQWEsS0FBSyxhQUFhLEtBQUs7UUFNdkUsSUFDRSxRQUFRLHNCQUFzQixLQUM3QixRQUFRLHFCQUFxQixLQUFLLGVBQ25DO1lBQ0EsT0FBTztRQUNUO0lBQ0Y7SUFFQSxPQUFPO0FBQ1Q7QUFHQSxJQUFNLDJCQUEyQixDQUFDO0lBQ2hDLElBQUksT0FBTztJQUNY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QztnQ0FDQyxXQUFVO2dDQUNWLE9BQU87b0NBQ0wsUUFBUTtvQ0FDUixNQUFNLFNBQVMsT0FBTyxTQUFTLFFBQVEsSUFBSTtvQ0FDM0MsS0FBSyxTQUFTLE1BQU0sU0FBUyxTQUFTO2dDQUN4QztnQ0FDQSxhQUFhLENBQUMsSUFBTSxrQkFBa0IsR0FBRyxHQUFHOzRCQUFBOzRCQUU5Qyw0Q0FBQztnQ0FDQyxXQUFVO2dDQUNWLE9BQU87b0NBQ0wsUUFBUTtvQ0FDUixNQUFNLFNBQVMsT0FBTztvQ0FDdEIsS0FBSyxTQUFTLE1BQU0sU0FBUyxTQUFTLElBQUk7Z0NBQzVDO2dDQUNBLGFBQWEsQ0FBQyxJQUFNLGtCQUFrQixHQUFHLEdBQUc7NEJBQUE7NEJBRTlDLDRDQUFDO2dDQUNDLFdBQVU7Z0NBQ1YsT0FBTztvQ0FDTCxRQUFRO29DQUNSLE1BQU0sU0FBUyxPQUFPLFNBQVMsUUFBUTtvQ0FDdkMsS0FBSyxTQUFTLE1BQU0sU0FBUyxTQUFTLElBQUk7Z0NBQzVDO2dDQUNBLGFBQWEsQ0FBQyxJQUFNLGtCQUFrQixHQUFHLEdBQUc7NEJBQUE7eUJBQzlDO29CQUFBLENBQ0Y7aUJBQUE7WUFBQSxDQUVKO1NBQUE7SUFBQSxDQUVKO0FBRUoiLCJzb3VyY2VzIjpbIi9ob21lL3VzZXIvc3JjL1Zpc3VhbEVkaXRzTWVzc2VuZ2VyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBOZXh0LmpzIEFwcCBSb3V0ZXIgZGlyZWN0aXZlOiBtYXJrcyB0aGlzIGFzIGEgQ2xpZW50IENvbXBvbmVudFxuLy8gUmVxdWlyZWQgZm9yIGNvbXBvbmVudHMgdXNpbmcgUmVhY3QgaG9va3MgYW5kIGJyb3dzZXIgQVBJc1xuLy8gSGFybWxlc3MgaW4gb3RoZXIgUmVhY3QgZnJhbWV3b3JrcyAoaWdub3JlZCBhcyBhIHN0cmluZyBsaXRlcmFsKVxuXCJ1c2UgY2xpZW50XCI7XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgY29uc3QgQ0hBTk5FTCA9IFwiT1JDSElEU19IT1ZFUl92MVwiIGFzIGNvbnN0O1xuY29uc3QgVklTVUFMX0VESVRfTU9ERV9LRVkgPSBcIm9yY2hpZHNfdmlzdWFsX2VkaXRfbW9kZVwiIGFzIGNvbnN0O1xuY29uc3QgRk9DVVNFRF9FTEVNRU5UX0tFWSA9IFwib3JjaGlkc19mb2N1c2VkX2VsZW1lbnRcIiBhcyBjb25zdDtcblxuLy8gRGVkdXBsaWNhdGUgaGVscGVyIGZvciBoaWdoLWZyZXF1ZW5jeSB0cmFmZmljIChISVQgLyBGT0NVU19NT1ZFRCAvIFNDUk9MTClcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5sZXQgX29yY2hpZHNMYXN0TXNnID0gXCJcIjtcbmNvbnN0IHBvc3RNZXNzYWdlRGVkdXAgPSAoZGF0YTogYW55KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgaWYgKGtleSA9PT0gX29yY2hpZHNMYXN0TXNnKSByZXR1cm47IC8vIGlkZW50aWNhbCDigJMgZHJvcFxuICAgIF9vcmNoaWRzTGFzdE1zZyA9IGtleTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gaWYgc3RyaW5naWZ5IGZhaWxzLCBmYWxsIHRocm91Z2hcbiAgfVxuICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKGRhdGEsIFwiKlwiKTtcbn07XG5cbmV4cG9ydCB0eXBlIFBhcmVudFRvQ2hpbGQgPVxuICB8IHsgdHlwZTogdHlwZW9mIENIQU5ORUw7IG1zZzogXCJQT0lOVEVSXCI7IHg6IG51bWJlcjsgeTogbnVtYmVyIH1cbiAgfCB7IHR5cGU6IHR5cGVvZiBDSEFOTkVMOyBtc2c6IFwiVklTVUFMX0VESVRfTU9ERVwiOyBhY3RpdmU6IGJvb2xlYW4gfVxuICB8IHsgdHlwZTogdHlwZW9mIENIQU5ORUw7IG1zZzogXCJTQ1JPTExcIjsgZHg6IG51bWJlcjsgZHk6IG51bWJlciB9XG4gIHwgeyB0eXBlOiB0eXBlb2YgQ0hBTk5FTDsgbXNnOiBcIkNMRUFSX0lOTElORV9TVFlMRVNcIjsgZWxlbWVudElkOiBzdHJpbmcgfVxuICB8IHtcbiAgICAgIHR5cGU6IHR5cGVvZiBDSEFOTkVMO1xuICAgICAgbXNnOiBcIlBSRVZJRVdfRk9OVFwiO1xuICAgICAgZWxlbWVudElkOiBzdHJpbmc7XG4gICAgICBmb250RmFtaWx5OiBzdHJpbmc7XG4gICAgfVxuICB8IHtcbiAgICAgIHR5cGU6IHR5cGVvZiBDSEFOTkVMO1xuICAgICAgbXNnOiBcIlJFU0laRV9FTEVNRU5UXCI7XG4gICAgICBlbGVtZW50SWQ6IHN0cmluZztcbiAgICAgIHdpZHRoOiBudW1iZXI7XG4gICAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogdHlwZW9mIENIQU5ORUw7XG4gICAgICBtc2c6IFwiU0hPV19FTEVNRU5UX0hPVkVSXCI7XG4gICAgICBlbGVtZW50SWQ6IHN0cmluZyB8IG51bGw7XG4gICAgfTtcblxuZXhwb3J0IHR5cGUgQ2hpbGRUb1BhcmVudCA9XG4gIHwge1xuICAgICAgdHlwZTogdHlwZW9mIENIQU5ORUw7XG4gICAgICBtc2c6IFwiSElUXCI7XG4gICAgICBpZDogc3RyaW5nIHwgbnVsbDtcbiAgICAgIHRhZzogc3RyaW5nIHwgbnVsbDtcbiAgICAgIHJlY3Q6IHsgdG9wOiBudW1iZXI7IGxlZnQ6IG51bWJlcjsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXIgfSB8IG51bGw7XG4gICAgfVxuICB8IHtcbiAgICAgIHR5cGU6IHR5cGVvZiBDSEFOTkVMO1xuICAgICAgbXNnOiBcIkVMRU1FTlRfQ0xJQ0tFRFwiO1xuICAgICAgaWQ6IHN0cmluZyB8IG51bGw7XG4gICAgICB0YWc6IHN0cmluZyB8IG51bGw7XG4gICAgICByZWN0OiB7IHRvcDogbnVtYmVyOyBsZWZ0OiBudW1iZXI7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH07XG4gICAgICBjbGlja1Bvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XG4gICAgICBpc0VkaXRhYmxlPzogYm9vbGVhbjtcbiAgICAgIGN1cnJlbnRTdHlsZXM/OiB7XG4gICAgICAgIGZvbnRTaXplPzogc3RyaW5nO1xuICAgICAgICBjb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9udFdlaWdodD86IHN0cmluZztcbiAgICAgICAgZm9udFN0eWxlPzogc3RyaW5nO1xuICAgICAgICB0ZXh0RGVjb3JhdGlvbj86IHN0cmluZztcbiAgICAgICAgdGV4dEFsaWduPzogc3RyaW5nO1xuICAgICAgICBsaW5lSGVpZ2h0Pzogc3RyaW5nO1xuICAgICAgICBsZXR0ZXJTcGFjaW5nPzogc3RyaW5nO1xuICAgICAgICBwYWRkaW5nTGVmdD86IHN0cmluZztcbiAgICAgICAgcGFkZGluZ1JpZ2h0Pzogc3RyaW5nO1xuICAgICAgICBwYWRkaW5nVG9wPzogc3RyaW5nO1xuICAgICAgICBwYWRkaW5nQm90dG9tPzogc3RyaW5nO1xuICAgICAgICBtYXJnaW5MZWZ0Pzogc3RyaW5nO1xuICAgICAgICBtYXJnaW5SaWdodD86IHN0cmluZztcbiAgICAgICAgbWFyZ2luVG9wPzogc3RyaW5nO1xuICAgICAgICBtYXJnaW5Cb3R0b20/OiBzdHJpbmc7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICAgICAgYmFja2dyb3VuZEltYWdlPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRGYW1pbHk/OiBzdHJpbmc7XG4gICAgICAgIG9wYWNpdHk/OiBzdHJpbmc7XG4gICAgICAgIGRpc3BsYXk/OiBzdHJpbmc7XG4gICAgICAgIGZsZXhEaXJlY3Rpb24/OiBzdHJpbmc7XG4gICAgICAgIGFsaWduSXRlbXM/OiBzdHJpbmc7XG4gICAgICAgIGp1c3RpZnlDb250ZW50Pzogc3RyaW5nO1xuICAgICAgICBnYXA/OiBzdHJpbmc7XG4gICAgICB9O1xuICAgICAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICAgICAgc3JjPzogc3RyaW5nO1xuICAgIH1cbiAgfCB7IHR5cGU6IHR5cGVvZiBDSEFOTkVMOyBtc2c6IFwiU0NST0xMX1NUQVJURURcIiB9XG4gIHwgeyB0eXBlOiB0eXBlb2YgQ0hBTk5FTDsgbXNnOiBcIlNDUk9MTF9TVE9QUEVEXCIgfVxuICB8IHtcbiAgICAgIHR5cGU6IHR5cGVvZiBDSEFOTkVMO1xuICAgICAgbXNnOiBcIlRFWFRfQ0hBTkdFRFwiO1xuICAgICAgaWQ6IHN0cmluZztcbiAgICAgIG9sZFRleHQ6IHN0cmluZztcbiAgICAgIG5ld1RleHQ6IHN0cmluZztcbiAgICAgIGZpbGVQYXRoOiBzdHJpbmc7XG4gICAgICBsaW5lOiBudW1iZXI7XG4gICAgICBjb2x1bW46IG51bWJlcjtcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogdHlwZW9mIENIQU5ORUw7XG4gICAgICBtc2c6IFwiU1RZTEVfQ0hBTkdFRFwiO1xuICAgICAgaWQ6IHN0cmluZztcbiAgICAgIHN0eWxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgICAgIGZpbGVQYXRoOiBzdHJpbmc7XG4gICAgICBsaW5lOiBudW1iZXI7XG4gICAgICBjb2x1bW46IG51bWJlcjtcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogdHlwZW9mIENIQU5ORUw7XG4gICAgICBtc2c6IFwiU1RZTEVfQkxVUlwiO1xuICAgICAgaWQ6IHN0cmluZztcbiAgICAgIHN0eWxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgICAgIGZpbGVQYXRoOiBzdHJpbmc7XG4gICAgICBsaW5lOiBudW1iZXI7XG4gICAgICBjb2x1bW46IG51bWJlcjtcbiAgICAgIGNsYXNzTmFtZTogc3RyaW5nO1xuICAgIH1cbiAgfCB7XG4gICAgICB0eXBlOiB0eXBlb2YgQ0hBTk5FTDtcbiAgICAgIG1zZzogXCJJTUFHRV9CTFVSXCI7XG4gICAgICBpZDogc3RyaW5nO1xuICAgICAgb2xkU3JjOiBzdHJpbmc7XG4gICAgICBuZXdTcmM6IHN0cmluZztcbiAgICAgIGZpbGVQYXRoOiBzdHJpbmc7XG4gICAgICBsaW5lOiBudW1iZXI7XG4gICAgICBjb2x1bW46IG51bWJlcjtcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogdHlwZW9mIENIQU5ORUw7XG4gICAgICBtc2c6IFwiRk9DVVNfTU9WRURcIjtcbiAgICAgIGlkOiBzdHJpbmc7XG4gICAgICByZWN0OiB7IHRvcDogbnVtYmVyOyBsZWZ0OiBudW1iZXI7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH07XG4gICAgfVxuICB8IHsgdHlwZTogdHlwZW9mIENIQU5ORUw7IG1zZzogXCJWSVNVQUxfRURJVF9NT0RFX0FDS1wiOyBhY3RpdmU6IGJvb2xlYW4gfVxuICB8IHsgdHlwZTogdHlwZW9mIENIQU5ORUw7IG1zZzogXCJWSVNVQUxfRURJVF9NT0RFX1JFU1RPUkVEXCI7IGFjdGl2ZTogYm9vbGVhbiB9O1xuXG50eXBlIEJveCA9IG51bGwgfCB7IHRvcDogbnVtYmVyOyBsZWZ0OiBudW1iZXI7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH07XG5cbmNvbnN0IEJPWF9QQURESU5HID0gNDsgLy8gUGl4ZWxzIHRvIGV4cGFuZCB0aGUgYm94IG9uIGVhY2ggc2lkZVxuXG4vLyBIZWxwZXIgdG8gY2hlY2sgaWYgZWxlbWVudCBjYW4gYmUgbWFkZSBjb250ZW50RWRpdGFibGVcbmNvbnN0IGlzVGV4dEVkaXRhYmxlID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgLy8gRWxlbWVudHMgdGhhdCB0eXBpY2FsbHkgY29udGFpbiB0ZXh0IGFuZCBjYW4gYmUgbWFkZSBjb250ZW50RWRpdGFibGVcbiAgY29uc3QgZWRpdGFibGVUYWdzID0gW1xuICAgIFwicFwiLFxuICAgIFwiaDFcIixcbiAgICBcImgyXCIsXG4gICAgXCJoM1wiLFxuICAgIFwiaDRcIixcbiAgICBcImg1XCIsXG4gICAgXCJoNlwiLFxuICAgIFwic3BhblwiLFxuICAgIFwiZGl2XCIsXG4gICAgXCJsaVwiLFxuICAgIFwidGRcIixcbiAgICBcInRoXCIsXG4gICAgXCJsYWJlbFwiLFxuICAgIFwiYVwiLFxuICAgIFwiYnV0dG9uXCIsXG4gIF07XG5cbiAgLy8gQ2hlY2sgaWYgaXQncyBhbHJlYWR5IGNvbnRlbnRFZGl0YWJsZSBvciBhbiBpbnB1dC90ZXh0YXJlYVxuICBpZiAoXG4gICAgZWxlbWVudC5jb250ZW50RWRpdGFibGUgPT09IFwidHJ1ZVwiIHx8XG4gICAgdGFnTmFtZSA9PT0gXCJpbnB1dFwiIHx8XG4gICAgdGFnTmFtZSA9PT0gXCJ0ZXh0YXJlYVwiXG4gICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gQWxsb3cgZWRpdGluZyBpZiBlbGVtZW50IGNvbnRhaW5zIHRleHQgYW5kIGlzIGFuIGVkaXRhYmxlIHRhZ1xuICAvLyBPbmx5IGFsbG93IGVkaXRpbmcgaWYgZWxlbWVudCBoYXMgYXQgbW9zdCAxIGNoaWxkIE9SIGhhcyBkaXJlY3QgdGV4dCBjb250ZW50XG4gIGlmIChlZGl0YWJsZVRhZ3MuaW5jbHVkZXModGFnTmFtZSkgJiYgZWxlbWVudC50ZXh0Q29udGVudD8udHJpbSgpKSB7XG4gICAgLy8gQ2hlY2sgaWYgZWxlbWVudCBoYXMgZGlyZWN0IHRleHQgbm9kZXMgKG5vdCBqdXN0IHRleHQgZnJvbSBjaGlsZHJlbilcbiAgICBjb25zdCBoYXNEaXJlY3RUZXh0ID0gQXJyYXkuZnJvbShlbGVtZW50LmNoaWxkTm9kZXMpLnNvbWUoXG4gICAgICAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUgJiYgbm9kZS50ZXh0Q29udGVudD8udHJpbSgpXG4gICAgKTtcblxuICAgIC8vIEFsbG93IGVkaXRpbmcgaWY6XG4gICAgLy8gMS4gRWxlbWVudCBoYXMgbm8gY2hpbGRyZW4gKHB1cmUgdGV4dCBlbGVtZW50KVxuICAgIC8vIDIuIEVsZW1lbnQgaGFzIDEgb3IgZmV3ZXIgY2hpbGRyZW4gQU5EIGhhcyBkaXJlY3QgdGV4dCBjb250ZW50XG4gICAgaWYgKFxuICAgICAgZWxlbWVudC5jaGlsZEVsZW1lbnRDb3VudCA9PT0gMCB8fFxuICAgICAgKGVsZW1lbnQuY2hpbGRFbGVtZW50Q291bnQgPD0gMSAmJiBoYXNEaXJlY3RUZXh0KVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLy8gSGVscGVyIHRvIGV4dHJhY3Qgb25seSB0ZXh0IG5vZGVzIGZyb20gYW4gZWxlbWVudCAoZXhjbHVkaW5nIGNoaWxkIGVsZW1lbnQgdGV4dClcbmNvbnN0IGV4dHJhY3REaXJlY3RUZXh0Q29udGVudCA9IChlbGVtZW50OiBIVE1MRWxlbWVudCk6IHN0cmluZyA9PiB7XG4gIGxldCB0ZXh0ID0gXCJcIjtcbiAgZm9yIChjb25zdCBub2RlIG9mIGVsZW1lbnQuY2hpbGROb2Rlcykge1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgdGV4dCArPSBub2RlLnRleHRDb250ZW50IHx8IFwiXCI7XG4gICAgfVxuICB9XG4gIHJldHVybiB0ZXh0O1xufTtcblxuLy8gSGVscGVyIHRvIHBhcnNlIGRhdGEtb3JjaGlkcy1pZCB0byBleHRyYWN0IGZpbGUgcGF0aCwgbGluZSwgYW5kIGNvbHVtblxuY29uc3QgcGFyc2VPcmNoaWRzSWQgPSAoXG4gIG9yY2hpZHNJZDogc3RyaW5nXG4pOiB7IGZpbGVQYXRoOiBzdHJpbmc7IGxpbmU6IG51bWJlcjsgY29sdW1uOiBudW1iZXIgfSB8IG51bGwgPT4ge1xuICAvLyBGb3JtYXQ6IFwiZmlsZXBhdGg6bGluZTpjb2x1bW5cIlxuICBjb25zdCBwYXJ0cyA9IG9yY2hpZHNJZC5zcGxpdChcIjpcIik7XG4gIGlmIChwYXJ0cy5sZW5ndGggPCAzKSByZXR1cm4gbnVsbDtcblxuICAvLyBUaGUgZmlsZSBwYXRoIG1pZ2h0IGNvbnRhaW4gY29sb25zLCBzbyB3ZSBuZWVkIHRvIGhhbmRsZSB0aGF0XG4gIGNvbnN0IGNvbHVtbiA9IHBhcnNlSW50KHBhcnRzLnBvcCgpIHx8IFwiMFwiKTtcbiAgY29uc3QgbGluZSA9IHBhcnNlSW50KHBhcnRzLnBvcCgpIHx8IFwiMFwiKTtcbiAgY29uc3QgZmlsZVBhdGggPSBwYXJ0cy5qb2luKFwiOlwiKTsgLy8gUmVqb2luIHRoZSByZW1haW5pbmcgcGFydHMgYXMgdGhlIGZpbGUgcGF0aFxuXG4gIGlmIChpc05hTihsaW5lKSB8fCBpc05hTihjb2x1bW4pKSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4geyBmaWxlUGF0aCwgbGluZSwgY29sdW1uIH07XG59O1xuXG4vLyBIZWxwZXIgdG8gZ2V0IGN1cnJlbnQgc3R5bGVzIG9mIGFuIGVsZW1lbnQgKGluY2x1ZGluZyBpbmxpbmUgc3R5bGVzKVxuY29uc3QgZ2V0Q3VycmVudFN0eWxlcyA9IChcbiAgZWxlbWVudDogSFRNTEVsZW1lbnRcbik6IHtcbiAgZm9udFNpemU/OiBzdHJpbmc7XG4gIGNvbG9yPzogc3RyaW5nO1xuICBmb250V2VpZ2h0Pzogc3RyaW5nO1xuICBmb250U3R5bGU/OiBzdHJpbmc7XG4gIHRleHREZWNvcmF0aW9uPzogc3RyaW5nO1xuICB0ZXh0QWxpZ24/OiBzdHJpbmc7XG4gIGxpbmVIZWlnaHQ/OiBzdHJpbmc7XG4gIGxldHRlclNwYWNpbmc/OiBzdHJpbmc7XG4gIHBhZGRpbmdMZWZ0Pzogc3RyaW5nO1xuICBwYWRkaW5nUmlnaHQ/OiBzdHJpbmc7XG4gIHBhZGRpbmdUb3A/OiBzdHJpbmc7XG4gIHBhZGRpbmdCb3R0b20/OiBzdHJpbmc7XG4gIG1hcmdpbkxlZnQ/OiBzdHJpbmc7XG4gIG1hcmdpblJpZ2h0Pzogc3RyaW5nO1xuICBtYXJnaW5Ub3A/OiBzdHJpbmc7XG4gIG1hcmdpbkJvdHRvbT86IHN0cmluZztcbiAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICBiYWNrZ3JvdW5kSW1hZ2U/OiBzdHJpbmc7XG4gIGJvcmRlclJhZGl1cz86IHN0cmluZztcbiAgZm9udEZhbWlseT86IHN0cmluZztcbiAgb3BhY2l0eT86IHN0cmluZztcbiAgZGlzcGxheT86IHN0cmluZztcbiAgZmxleERpcmVjdGlvbj86IHN0cmluZztcbiAgYWxpZ25JdGVtcz86IHN0cmluZztcbiAganVzdGlmeUNvbnRlbnQ/OiBzdHJpbmc7XG4gIGdhcD86IHN0cmluZztcbn0gPT4ge1xuICBjb25zdCBjb21wdXRlZCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXG4gIC8vIEhlbHBlciB0byBub3JtYWxpemUgdmFsdWVzIGFuZCBwcm92aWRlIGRlZmF1bHRzXG4gIGNvbnN0IG5vcm1hbGl6ZVZhbHVlID0gKHZhbHVlOiBzdHJpbmcsIHByb3BlcnR5OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgIC8vIEhhbmRsZSBiYWNrZ3JvdW5kIGNvbG9yIC0gaWYgaXQncyB0cmFuc3BhcmVudCBvciByZ2JhKDAsMCwwLDApLCByZXR1cm4gXCJ0cmFuc3BhcmVudFwiXG4gICAgaWYgKHByb3BlcnR5ID09PSBcImJhY2tncm91bmRDb2xvclwiKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHZhbHVlID09PSBcInJnYmEoMCwgMCwgMCwgMClcIiB8fFxuICAgICAgICB2YWx1ZSA9PT0gXCJyZ2IoMCwgMCwgMCwgMClcIiB8fFxuICAgICAgICB2YWx1ZSA9PT0gXCJ0cmFuc3BhcmVudFwiIHx8XG4gICAgICAgIHZhbHVlID09PSBcIlwiXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIFwidHJhbnNwYXJlbnRcIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgYmFja2dyb3VuZCBpbWFnZSAtIGlmIG5vbmUsIHJldHVybiBcIm5vbmVcIlxuICAgIGlmIChwcm9wZXJ0eSA9PT0gXCJiYWNrZ3JvdW5kSW1hZ2VcIiAmJiAodmFsdWUgPT09IFwibm9uZVwiIHx8IHZhbHVlID09PSBcIlwiKSkge1xuICAgICAgcmV0dXJuIFwibm9uZVwiO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSB0ZXh0IGRlY29yYXRpb24gLSBpZiBub25lLCByZXR1cm4gXCJub25lXCJcbiAgICBpZiAocHJvcGVydHkgPT09IFwidGV4dERlY29yYXRpb25cIikge1xuICAgICAgLy8gU29tZSBicm93c2VycyByZXR1cm4gY29tcGxleCB2YWx1ZXMgbGlrZSBcIm5vbmUgc29saWQgcmdiKDAsIDAsIDApXCJcbiAgICAgIGlmICh2YWx1ZS5pbmNsdWRlcyhcIm5vbmVcIikgfHwgdmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIFwibm9uZVwiO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBmb250IHN0eWxlIC0gaWYgbm9ybWFsLCByZXR1cm4gXCJub3JtYWxcIlxuICAgIGlmIChwcm9wZXJ0eSA9PT0gXCJmb250U3R5bGVcIiAmJiAodmFsdWUgPT09IFwibm9ybWFsXCIgfHwgdmFsdWUgPT09IFwiXCIpKSB7XG4gICAgICByZXR1cm4gXCJub3JtYWxcIjtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgZm9udCB3ZWlnaHQgLSBub3JtYWxpemUgdG8gc3RhbmRhcmQgdmFsdWVzXG4gICAgaWYgKHByb3BlcnR5ID09PSBcImZvbnRXZWlnaHRcIikge1xuICAgICAgY29uc3Qgd2VpZ2h0ID0gcGFyc2VJbnQodmFsdWUpO1xuICAgICAgaWYgKCFpc05hTih3ZWlnaHQpKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcod2VpZ2h0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZSB8fCBcIjQwMFwiO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBvcGFjaXR5IC0gaWYgMSwgcmV0dXJuIFwiMVwiXG4gICAgaWYgKHByb3BlcnR5ID09PSBcIm9wYWNpdHlcIiAmJiAodmFsdWUgPT09IFwiMVwiIHx8IHZhbHVlID09PSBcIlwiKSkge1xuICAgICAgcmV0dXJuIFwiMVwiO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBzcGFjaW5nIHZhbHVlcyAocGFkZGluZy9tYXJnaW4pIC0gaWYgMHB4LCByZXR1cm4gXCIwXCJcbiAgICBpZiAoXG4gICAgICAocHJvcGVydHkuaW5jbHVkZXMoXCJwYWRkaW5nXCIpIHx8IHByb3BlcnR5LmluY2x1ZGVzKFwibWFyZ2luXCIpKSAmJlxuICAgICAgKHZhbHVlID09PSBcIjBweFwiIHx8IHZhbHVlID09PSBcIjBcIilcbiAgICApIHtcbiAgICAgIHJldHVybiBcIjBcIjtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgYm9yZGVyIHJhZGl1cyAtIGlmIDBweCwgcmV0dXJuIFwiMFwiXG4gICAgaWYgKHByb3BlcnR5ID09PSBcImJvcmRlclJhZGl1c1wiICYmICh2YWx1ZSA9PT0gXCIwcHhcIiB8fCB2YWx1ZSA9PT0gXCIwXCIpKSB7XG4gICAgICByZXR1cm4gXCIwXCI7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGxldHRlciBzcGFjaW5nIC0gaWYgbm9ybWFsLCByZXR1cm4gXCJub3JtYWxcIlxuICAgIGlmIChcbiAgICAgIHByb3BlcnR5ID09PSBcImxldHRlclNwYWNpbmdcIiAmJlxuICAgICAgKHZhbHVlID09PSBcIm5vcm1hbFwiIHx8IHZhbHVlID09PSBcIjBweFwiKVxuICAgICkge1xuICAgICAgcmV0dXJuIFwibm9ybWFsXCI7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGdhcCAtIGlmIG5vcm1hbCwgcmV0dXJuIFwibm9ybWFsXCJcbiAgICBpZiAocHJvcGVydHkgPT09IFwiZ2FwXCIgJiYgKHZhbHVlID09PSBcIm5vcm1hbFwiIHx8IHZhbHVlID09PSBcIjBweFwiKSkge1xuICAgICAgcmV0dXJuIFwibm9ybWFsXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZm9udFNpemU6IG5vcm1hbGl6ZVZhbHVlKGNvbXB1dGVkLmZvbnRTaXplLCBcImZvbnRTaXplXCIpLFxuICAgIGNvbG9yOiBub3JtYWxpemVWYWx1ZShjb21wdXRlZC5jb2xvciwgXCJjb2xvclwiKSxcbiAgICBmb250V2VpZ2h0OiBub3JtYWxpemVWYWx1ZShjb21wdXRlZC5mb250V2VpZ2h0LCBcImZvbnRXZWlnaHRcIiksXG4gICAgZm9udFN0eWxlOiBub3JtYWxpemVWYWx1ZShjb21wdXRlZC5mb250U3R5bGUsIFwiZm9udFN0eWxlXCIpLFxuICAgIHRleHREZWNvcmF0aW9uOiBub3JtYWxpemVWYWx1ZShjb21wdXRlZC50ZXh0RGVjb3JhdGlvbiwgXCJ0ZXh0RGVjb3JhdGlvblwiKSxcbiAgICB0ZXh0QWxpZ246IG5vcm1hbGl6ZVZhbHVlKGNvbXB1dGVkLnRleHRBbGlnbiwgXCJ0ZXh0QWxpZ25cIiksXG4gICAgbGluZUhlaWdodDogbm9ybWFsaXplVmFsdWUoY29tcHV0ZWQubGluZUhlaWdodCwgXCJsaW5lSGVpZ2h0XCIpLFxuICAgIGxldHRlclNwYWNpbmc6IG5vcm1hbGl6ZVZhbHVlKGNvbXB1dGVkLmxldHRlclNwYWNpbmcsIFwibGV0dGVyU3BhY2luZ1wiKSxcbiAgICBwYWRkaW5nTGVmdDogbm9ybWFsaXplVmFsdWUoY29tcHV0ZWQucGFkZGluZ0xlZnQsIFwicGFkZGluZ0xlZnRcIiksXG4gICAgcGFkZGluZ1JpZ2h0OiBub3JtYWxpemVWYWx1ZShjb21wdXRlZC5wYWRkaW5nUmlnaHQsIFwicGFkZGluZ1JpZ2h0XCIpLFxuICAgIHBhZGRpbmdUb3A6IG5vcm1hbGl6ZVZhbHVlKGNvbXB1dGVkLnBhZGRpbmdUb3AsIFwicGFkZGluZ1RvcFwiKSxcbiAgICBwYWRkaW5nQm90dG9tOiBub3JtYWxpemVWYWx1ZShjb21wdXRlZC5wYWRkaW5nQm90dG9tLCBcInBhZGRpbmdCb3R0b21cIiksXG4gICAgbWFyZ2luTGVmdDogbm9ybWFsaXplVmFsdWUoY29tcHV0ZWQubWFyZ2luTGVmdCwgXCJtYXJnaW5MZWZ0XCIpLFxuICAgIG1hcmdpblJpZ2h0OiBub3JtYWxpemVWYWx1ZShjb21wdXRlZC5tYXJnaW5SaWdodCwgXCJtYXJnaW5SaWdodFwiKSxcbiAgICBtYXJnaW5Ub3A6IG5vcm1hbGl6ZVZhbHVlKGNvbXB1dGVkLm1hcmdpblRvcCwgXCJtYXJnaW5Ub3BcIiksXG4gICAgbWFyZ2luQm90dG9tOiBub3JtYWxpemVWYWx1ZShjb21wdXRlZC5tYXJnaW5Cb3R0b20sIFwibWFyZ2luQm90dG9tXCIpLFxuICAgIGJhY2tncm91bmRDb2xvcjogbm9ybWFsaXplVmFsdWUoXG4gICAgICBjb21wdXRlZC5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICBcImJhY2tncm91bmRDb2xvclwiXG4gICAgKSxcbiAgICBiYWNrZ3JvdW5kSW1hZ2U6IG5vcm1hbGl6ZVZhbHVlKFxuICAgICAgY29tcHV0ZWQuYmFja2dyb3VuZEltYWdlLFxuICAgICAgXCJiYWNrZ3JvdW5kSW1hZ2VcIlxuICAgICksXG4gICAgYm9yZGVyUmFkaXVzOiBub3JtYWxpemVWYWx1ZShjb21wdXRlZC5ib3JkZXJSYWRpdXMsIFwiYm9yZGVyUmFkaXVzXCIpLFxuICAgIGZvbnRGYW1pbHk6IG5vcm1hbGl6ZVZhbHVlKGNvbXB1dGVkLmZvbnRGYW1pbHksIFwiZm9udEZhbWlseVwiKSxcbiAgICBvcGFjaXR5OiBub3JtYWxpemVWYWx1ZShjb21wdXRlZC5vcGFjaXR5LCBcIm9wYWNpdHlcIiksXG4gICAgZGlzcGxheTogbm9ybWFsaXplVmFsdWUoY29tcHV0ZWQuZGlzcGxheSwgXCJkaXNwbGF5XCIpLFxuICAgIGZsZXhEaXJlY3Rpb246IG5vcm1hbGl6ZVZhbHVlKGNvbXB1dGVkLmZsZXhEaXJlY3Rpb24sIFwiZmxleERpcmVjdGlvblwiKSxcbiAgICBhbGlnbkl0ZW1zOiBub3JtYWxpemVWYWx1ZShjb21wdXRlZC5hbGlnbkl0ZW1zLCBcImFsaWduSXRlbXNcIiksXG4gICAganVzdGlmeUNvbnRlbnQ6IG5vcm1hbGl6ZVZhbHVlKGNvbXB1dGVkLmp1c3RpZnlDb250ZW50LCBcImp1c3RpZnlDb250ZW50XCIpLFxuICAgIGdhcDogbm9ybWFsaXplVmFsdWUoY29tcHV0ZWQuZ2FwLCBcImdhcFwiKSxcbiAgfTtcbn07XG5cbi8vIE5vcm1hbGl6ZSBpbWFnZSBzcmMgZm9yIGNvbXBhcmlzb24gKGhhbmRsZXMgTmV4dC5qcyBvcHRpbWl6YXRpb24gd3JhcHBlcnMpXG5jb25zdCBub3JtYWxpemVJbWFnZVNyYyA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgaWYgKCFpbnB1dCkgcmV0dXJuIFwiXCI7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChpbnB1dCwgd2luZG93LmxvY2F0aW9uLm9yaWdpbik7XG4gICAgLy8gSGFuZGxlIE5leHQuanMgPEltYWdlPiBvcHRpbWl6YXRpb24gd3JhcHBlclxuICAgIGlmICh1cmwucGF0aG5hbWUgPT09IFwiL19uZXh0L2ltYWdlXCIpIHtcbiAgICAgIGNvbnN0IHJlYWwgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcInVybFwiKTtcbiAgICAgIGlmIChyZWFsKSByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlYWwpO1xuICAgIH1cbiAgICByZXR1cm4gdXJsLmhyZWY7IC8vIGFic29sdXRlIGZvcm1cbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG59O1xuXG4vLyBIZWxwZXIgdG8gd3JhcCBtdWx0aWxpbmUgdGV4dCBvbmx5IHdoZW4gaXQgY29udGFpbnMgbGluZSBicmVha3NcbmNvbnN0IHdyYXBNdWx0aWxpbmUgPSAodGV4dDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgaWYgKHRleHQuaW5jbHVkZXMoXCJcXG5cIikpIHtcbiAgICBjb25zdCBlc2NhcGVkID0gdGV4dC5yZXBsYWNlKC9cXG4vZywgXCJcXFxcblwiKTtcbiAgICAvLyBXcmFwIGluIHtgIC4uLiBgfSBzbyBKU1ggd2lsbCBpbnRlcnByZXQgaXQgYXMgYSB0ZW1wbGF0ZSBsaXRlcmFsXG4gICAgcmV0dXJuIGB7XFxgJHtlc2NhcGVkfVxcYH1gO1xuICB9XG4gIHJldHVybiB0ZXh0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSG92ZXJSZWNlaXZlcigpIHtcbiAgY29uc3QgW2hvdmVyQm94LCBzZXRIb3ZlckJveF0gPSB1c2VTdGF0ZTxCb3g+KG51bGwpO1xuICBjb25zdCBbaG92ZXJCb3hlcywgc2V0SG92ZXJCb3hlc10gPSB1c2VTdGF0ZTxCb3hbXT4oW10pO1xuICBjb25zdCBbZm9jdXNCb3gsIHNldEZvY3VzQm94XSA9IHVzZVN0YXRlPEJveD4obnVsbCk7XG4gIGNvbnN0IFtmb2N1c2VkRWxlbWVudElkLCBzZXRGb2N1c2VkRWxlbWVudElkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNWaXN1YWxFZGl0TW9kZSwgc2V0SXNWaXN1YWxFZGl0TW9kZV0gPSB1c2VTdGF0ZSgoKSA9PiB7XG4gICAgLy8gSW5pdGlhbGl6ZSBmcm9tIGxvY2FsU3RvcmFnZSBpZiBhdmFpbGFibGVcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY29uc3Qgc3RvcmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVklTVUFMX0VESVRfTU9ERV9LRVkpO1xuICAgICAgcmV0dXJuIHN0b3JlZCA9PT0gXCJ0cnVlXCI7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG4gIGNvbnN0IFtpc1Jlc2l6aW5nLCBzZXRJc1Jlc2l6aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Jlc2l6ZUhhbmRsZSwgc2V0UmVzaXplSGFuZGxlXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbcmVzaXplU3RhcnQsIHNldFJlc2l6ZVN0YXJ0XSA9IHVzZVN0YXRlPHtcbiAgICB4OiBudW1iZXI7XG4gICAgeTogbnVtYmVyO1xuICAgIHdpZHRoOiBudW1iZXI7XG4gICAgaGVpZ2h0OiBudW1iZXI7XG4gIH0gfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzU2Nyb2xsaW5nLCBzZXRJc1Njcm9sbGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gVGFnIGxhYmVscyBmb3IgaG92ZXIgYW5kIGZvY3VzIG92ZXJsYXlzXG4gIGNvbnN0IFtob3ZlclRhZywgc2V0SG92ZXJUYWddID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtmb2N1c1RhZywgc2V0Rm9jdXNUYWddID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGlzUmVzaXppbmdSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCBsYXN0SGl0RWxlbWVudFJlZiA9IHVzZVJlZjxIVE1MRWxlbWVudCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBsYXN0SGl0SWRSZWYgPSB1c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGZvY3VzZWRFbGVtZW50UmVmID0gdXNlUmVmPEhUTUxFbGVtZW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGlzVmlzdWFsRWRpdE1vZGVSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCBzY3JvbGxUaW1lb3V0UmVmID0gdXNlUmVmPG51bWJlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBvcmlnaW5hbENvbnRlbnRSZWYgPSB1c2VSZWY8c3RyaW5nPihcIlwiKTtcbiAgY29uc3Qgb3JpZ2luYWxTcmNSZWYgPSB1c2VSZWY8c3RyaW5nPihcIlwiKTsgLy8gdHJhY2sgb3JpZ2luYWwgaW1nIHNyY1xuICBjb25zdCBmb2N1c2VkSW1hZ2VFbGVtZW50UmVmID0gdXNlUmVmPEhUTUxJbWFnZUVsZW1lbnQgfCBudWxsPihudWxsKTsgLy8gdHJhY2sgdGhlIGFjdHVhbCBpbWcgZWxlbWVudFxuICBjb25zdCBlZGl0aW5nRWxlbWVudFJlZiA9IHVzZVJlZjxIVE1MRWxlbWVudCB8IG51bGw+KG51bGwpO1xuICBjb25zdCB3YXNFZGl0YWJsZVJlZiA9IHVzZVJlZjxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IHN0eWxlRWxlbWVudFJlZiA9IHVzZVJlZjxIVE1MU3R5bGVFbGVtZW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IG9yaWdpbmFsU3R5bGVzUmVmID0gdXNlUmVmPFJlY29yZDxzdHJpbmcsIHN0cmluZz4+KHt9KTtcbiAgY29uc3QgYXBwbGllZFN0eWxlc1JlZiA9IHVzZVJlZjxNYXA8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+Pj4oXG4gICAgbmV3IE1hcCgpXG4gICk7XG4gIGNvbnN0IGhhc1N0eWxlQ2hhbmdlc1JlZiA9IHVzZVJlZjxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IGxhc3RDbGlja1RpbWVSZWYgPSB1c2VSZWY8bnVtYmVyPigwKTtcbiAgY29uc3QgcGVuZGluZ0NsZWFudXBSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcblxuICAvLyBDYWNoZSBvZiBsb2FkZWQgZm9udHNcbiAgY29uc3QgbG9hZGVkRm9udEZhbWlsaWVzID0gdXNlUmVmPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpO1xuICAvLyBNYXAgb2YgZWxlbWVudElkIHRoYXQgYWxyZWFkeSBoYXMgYSBwZXJzaXN0ZW50IGZvbnQgc2V0XG4gIGNvbnN0IHBlcnNpc3RlbnRGb250TWFwID0gdXNlUmVmPE1hcDxzdHJpbmcsIHN0cmluZz4+KG5ldyBNYXAoKSk7XG4gIC8vIFRpbWVvdXQgcmVmcyBmb3IgY2xlYXJpbmcgcGVyc2lzdGVudCBmb250IG1hcFxuICBjb25zdCBwZXJzaXN0ZW50Rm9udFRpbWVvdXRzID0gdXNlUmVmPE1hcDxzdHJpbmcsIG51bWJlcj4+KG5ldyBNYXAoKSk7XG5cbiAgLy8gS2VlcCByZWYgaW4gc3luYyB3aXRoIHN0YXRlIGFuZCBwZXJzaXN0IHRvIGxvY2FsU3RvcmFnZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlzVmlzdWFsRWRpdE1vZGVSZWYuY3VycmVudCA9IGlzVmlzdWFsRWRpdE1vZGU7XG4gICAgLy8gUGVyc2lzdCB0byBsb2NhbFN0b3JhZ2VcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oVklTVUFMX0VESVRfTU9ERV9LRVksIFN0cmluZyhpc1Zpc3VhbEVkaXRNb2RlKSk7XG4gICAgfVxuICB9LCBbaXNWaXN1YWxFZGl0TW9kZV0pO1xuXG4gIC8vIE9uIG1vdW50LCBub3RpZnkgcGFyZW50IGlmIHZpc3VhbCBlZGl0IG1vZGUgd2FzIHJlc3RvcmVkIGZyb20gbG9jYWxTdG9yYWdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzVmlzdWFsRWRpdE1vZGUpIHtcbiAgICAgIC8vIFNlbmQgYWNrbm93bGVkZ2VtZW50IHRvIHBhcmVudCB0aGF0IHZpc3VhbCBlZGl0IG1vZGUgaXMgYWN0aXZlXG4gICAgICAvLyBUaGlzIHdpbGwgc3luYyB0aGUgcGFyZW50J3Mgc3RhdGUgd2l0aCBvdXIgcmVzdG9yZWQgc3RhdGVcbiAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoXG4gICAgICAgIHsgdHlwZTogQ0hBTk5FTCwgbXNnOiBcIlZJU1VBTF9FRElUX01PREVfQUNLXCIsIGFjdGl2ZTogdHJ1ZSB9LFxuICAgICAgICBcIipcIlxuICAgICAgKTtcblxuICAgICAgLy8gQWxzbyBzZW5kIGEgc3BlY2lhbCBtZXNzYWdlIHRvIGluZGljYXRlIHRoaXMgd2FzIHJlc3RvcmVkIGZyb20gbG9jYWxTdG9yYWdlXG4gICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKFxuICAgICAgICB7IHR5cGU6IENIQU5ORUwsIG1zZzogXCJWSVNVQUxfRURJVF9NT0RFX1JFU1RPUkVEXCIsIGFjdGl2ZTogdHJ1ZSB9LFxuICAgICAgICBcIipcIlxuICAgICAgKTtcblxuICAgICAgLy8gUmVzdG9yZSBmb2N1c2VkIGVsZW1lbnQgYWZ0ZXIgYSBzaG9ydCBkZWxheSB0byBlbnN1cmUgRE9NIGlzIHJlYWR5XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAvLyBSZXN0b3JlIGZvY3VzZWQgZWxlbWVudFxuICAgICAgICAgIGNvbnN0IGZvY3VzZWREYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oRk9DVVNFRF9FTEVNRU5UX0tFWSk7XG4gICAgICAgICAgaWYgKGZvY3VzZWREYXRhKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCB7IGlkIH0gPSBKU09OLnBhcnNlKGZvY3VzZWREYXRhKTtcbiAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgYFtkYXRhLW9yY2hpZHMtaWQ9XCIke2lkfVwiXWBcbiAgICAgICAgICAgICAgKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIC8vIFNpbXVsYXRlIGEgY2xpY2sgb24gdGhlIGVsZW1lbnQgdG8gcmVzdG9yZSBmb2N1c1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsaWNrRXZlbnQgPSBuZXcgTW91c2VFdmVudChcImNsaWNrXCIsIHtcbiAgICAgICAgICAgICAgICAgIGNsaWVudFg6IHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyLFxuICAgICAgICAgICAgICAgICAgY2xpZW50WTogcmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDIsXG4gICAgICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoY2xpY2tFdmVudCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAvLyBJZ25vcmUgcGFyc2luZyBlcnJvcnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIDUwMCk7IC8vIFdhaXQgNTAwbXMgZm9yIERPTSB0byBiZSBmdWxseSByZWFkeVxuICAgIH1cbiAgfSwgW10pOyAvLyBSdW4gb25seSBvbiBtb3VudFxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBleHBhbmQgYm94IGRpbWVuc2lvbnNcbiAgY29uc3QgZXhwYW5kQm94ID0gKHJlY3Q6IERPTVJlY3QpOiBCb3ggPT4gKHtcbiAgICB0b3A6IHJlY3QudG9wIC0gQk9YX1BBRERJTkcsXG4gICAgbGVmdDogcmVjdC5sZWZ0IC0gQk9YX1BBRERJTkcsXG4gICAgd2lkdGg6IHJlY3Qud2lkdGggKyBCT1hfUEFERElORyAqIDIsXG4gICAgaGVpZ2h0OiByZWN0LmhlaWdodCArIEJPWF9QQURESU5HICogMixcbiAgfSk7XG5cbiAgLy8gSGVscGVyIHRvIHVwZGF0ZSBmb2N1cyBib3ggcG9zaXRpb25cbiAgY29uc3QgdXBkYXRlRm9jdXNCb3ggPSAoKSA9PiB7XG4gICAgaWYgKGZvY3VzZWRFbGVtZW50UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHIgPSBmb2N1c2VkRWxlbWVudFJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgc2V0Rm9jdXNCb3goZXhwYW5kQm94KHIpKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQWRkIGdsb2JhbCBzdHlsZXMgZm9yIGNvbnRlbnRFZGl0YWJsZSBlbGVtZW50c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc1Zpc3VhbEVkaXRNb2RlICYmICFzdHlsZUVsZW1lbnRSZWYuY3VycmVudCkge1xuICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgW2NvbnRlbnRlZGl0YWJsZT1cInRydWVcIl06Zm9jdXMge1xuICAgICAgICAgIG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiBpbmhlcml0ICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgW2NvbnRlbnRlZGl0YWJsZT1cInRydWVcIl0ge1xuICAgICAgICAgIGN1cnNvcjogdGV4dCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIC8qIFByZXZlbnQgdGhlIGRlZmF1bHQgYmx1ZSBoaWdobGlnaHQgb24gY29udGVudGVkaXRhYmxlICovXG4gICAgICAgIFtjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCJdOjpzZWxlY3Rpb24ge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoNTksIDEzMCwgMjQ2LCAwLjMpO1xuICAgICAgICB9XG4gICAgICAgIFtjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCJdOjotbW96LXNlbGVjdGlvbiB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg1OSwgMTMwLCAyNDYsIDAuMyk7XG4gICAgICAgIH1cbiAgICAgICAgLyogUHJldmVudCBjaGlsZCBlbGVtZW50cyBmcm9tIGJlaW5nIGVkaXRhYmxlICovXG4gICAgICAgIFtjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCJdIFtjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiXSB7XG4gICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICAgIG9wYWNpdHk6IDAuNyAhaW1wb3J0YW50O1xuICAgICAgICAgIGN1cnNvcjogZGVmYXVsdCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIC8qIEVuc3VyZSBwcm90ZWN0ZWQgZWxlbWVudHMgY2FuJ3QgYmUgc2VsZWN0ZWQgKi9cbiAgICAgICAgW2RhdGEtb3JjaGlkcy1wcm90ZWN0ZWQ9XCJ0cnVlXCJdIHtcbiAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLyogVmlzdWFsIGVkaXQgb3ZlcmxheSBzdHlsZXMgKi9cbiAgICAgICAgLm9yY2hpZHMtaG92ZXItYm94IHtcbiAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgYm9yZGVyOiAwLjVweCBkYXNoZWQgIzM4YmRmODtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDE5MSwgMjE5LCAyNTQsIDAuMik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4xMjVyZW07XG4gICAgICAgIH1cbiAgICAgICAgLm9yY2hpZHMtaG92ZXItdGFnIHtcbiAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzhiZGY4O1xuICAgICAgICAgIHBhZGRpbmc6IDAuMTI1cmVtIDAuMjVyZW07XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4xMjVyZW07XG4gICAgICAgIH1cbiAgICAgICAgLm9yY2hpZHMtZm9jdXMtdGFnIHtcbiAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMzYjgyZjY7XG4gICAgICAgICAgcGFkZGluZzogMCAwLjI1cmVtO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAuMTI1cmVtO1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICB9XG4gICAgICAgIC5vcmNoaWRzLWZvY3VzLWJveCB7XG4gICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgIGJvcmRlcjogMS41cHggc29saWQgIzM4YmRmODtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjEyNXJlbTtcbiAgICAgICAgfVxuICAgICAgICAub3JjaGlkcy1yZXNpemUtaGFuZGxlIHtcbiAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgd2lkdGg6IDAuNXJlbTtcbiAgICAgICAgICBoZWlnaHQ6IDAuNXJlbTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzhiZGY4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgfVxuICAgICAgICAub3JjaGlkcy1yZXNpemUtaGFuZGxlLW53IHtcbiAgICAgICAgICBjdXJzb3I6IG53LXJlc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAub3JjaGlkcy1yZXNpemUtaGFuZGxlLW5lIHtcbiAgICAgICAgICBjdXJzb3I6IG5lLXJlc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAub3JjaGlkcy1yZXNpemUtaGFuZGxlLXN3IHtcbiAgICAgICAgICBjdXJzb3I6IHN3LXJlc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAub3JjaGlkcy1yZXNpemUtaGFuZGxlLXNlIHtcbiAgICAgICAgICBjdXJzb3I6IHNlLXJlc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAub3JjaGlkcy1yZXNpemUtaGFuZGxlLW4ge1xuICAgICAgICAgIGN1cnNvcjogbi1yZXNpemU7XG4gICAgICAgIH1cbiAgICAgICAgLm9yY2hpZHMtcmVzaXplLWhhbmRsZS1zIHtcbiAgICAgICAgICBjdXJzb3I6IHMtcmVzaXplO1xuICAgICAgICB9XG4gICAgICAgIC5vcmNoaWRzLXJlc2l6ZS1oYW5kbGUtdyB7XG4gICAgICAgICAgY3Vyc29yOiB3LXJlc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAub3JjaGlkcy1yZXNpemUtaGFuZGxlLWUge1xuICAgICAgICAgIGN1cnNvcjogZS1yZXNpemU7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgIHN0eWxlRWxlbWVudFJlZi5jdXJyZW50ID0gc3R5bGU7XG4gICAgfSBlbHNlIGlmICghaXNWaXN1YWxFZGl0TW9kZSAmJiBzdHlsZUVsZW1lbnRSZWYuY3VycmVudCkge1xuICAgICAgc3R5bGVFbGVtZW50UmVmLmN1cnJlbnQucmVtb3ZlKCk7XG4gICAgICBzdHlsZUVsZW1lbnRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChzdHlsZUVsZW1lbnRSZWYuY3VycmVudCkge1xuICAgICAgICBzdHlsZUVsZW1lbnRSZWYuY3VycmVudC5yZW1vdmUoKTtcbiAgICAgICAgc3R5bGVFbGVtZW50UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtpc1Zpc3VhbEVkaXRNb2RlXSk7XG5cbiAgLy8gSGVscGVyIHRvIG1ha2Ugb25seSB0ZXh0IG5vZGVzIGVkaXRhYmxlIGFuZCBwcm90ZWN0IGNoaWxkIGVsZW1lbnRzXG4gIGNvbnN0IHByb3RlY3RDaGlsZEVsZW1lbnRzID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgLy8gTWFrZSBhbGwgY2hpbGQgZWxlbWVudHMgbm9uLWVkaXRhYmxlXG4gICAgY29uc3QgY2hpbGRFbGVtZW50cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIipcIik7XG4gICAgY2hpbGRFbGVtZW50cy5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgY29uc3QgY2hpbGRFbCA9IGNoaWxkIGFzIEhUTUxFbGVtZW50O1xuICAgICAgY2hpbGRFbC5jb250ZW50RWRpdGFibGUgPSBcImZhbHNlXCI7XG4gICAgICAvLyBBZGQgYSBkYXRhIGF0dHJpYnV0ZSB0byBtYXJrIHByb3RlY3RlZCBlbGVtZW50c1xuICAgICAgY2hpbGRFbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW9yY2hpZHMtcHJvdGVjdGVkXCIsIFwidHJ1ZVwiKTtcbiAgICAgIC8vIE9ubHkgcHJldmVudCB0ZXh0IHNlbGVjdGlvbiB3aXRoaW4gdGhlIGNoaWxkIGVsZW1lbnRzIHdoZW4gcGFyZW50IGlzIGJlaW5nIGVkaXRlZFxuICAgICAgLy8gQnV0IHN0aWxsIGFsbG93IHBvaW50ZXIgZXZlbnRzIGZvciBob3ZlcmluZyBhbmQgY2xpY2tpbmdcbiAgICAgIGNoaWxkRWwuc3R5bGUudXNlclNlbGVjdCA9IFwibm9uZVwiO1xuICAgICAgY2hpbGRFbC5zdHlsZS53ZWJraXRVc2VyU2VsZWN0ID0gXCJub25lXCI7XG4gICAgICAvLyBEb24ndCBzZXQgcG9pbnRlckV2ZW50cyB0byBub25lIC0gd2Ugd2FudCB0byBhbGxvdyBob3ZlciBhbmQgY2xpY2tcbiAgICB9KTtcbiAgfTtcblxuICAvLyBIZWxwZXIgdG8gcmVzdG9yZSBjaGlsZCBlbGVtZW50cyBhZnRlciBlZGl0aW5nXG4gIGNvbnN0IHJlc3RvcmVDaGlsZEVsZW1lbnRzID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgcHJvdGVjdGVkRWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAnW2RhdGEtb3JjaGlkcy1wcm90ZWN0ZWQ9XCJ0cnVlXCJdJ1xuICAgICk7XG4gICAgcHJvdGVjdGVkRWxlbWVudHMuZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgIGNvbnN0IGNoaWxkRWwgPSBjaGlsZCBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGNoaWxkRWwucmVtb3ZlQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpO1xuICAgICAgY2hpbGRFbC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLW9yY2hpZHMtcHJvdGVjdGVkXCIpO1xuICAgICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBzdHlsZXNcbiAgICAgIGNoaWxkRWwuc3R5bGUudXNlclNlbGVjdCA9IFwiXCI7XG4gICAgICBjaGlsZEVsLnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSBcIlwiO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEhhbmRsZSB0ZXh0IGNoYW5nZXMgYW5kIHNlbmQgdG8gcGFyZW50XG4gIGNvbnN0IGhhbmRsZVRleHRDaGFuZ2UgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAvLyBEb3VibGUtY2hlY2sgdGhpcyBpcyBzdGlsbCB0aGUgZWRpdGluZyBlbGVtZW50IHRvIGF2b2lkIHN0YWxlIGNsb3N1cmVzXG4gICAgaWYgKGVsZW1lbnQgIT09IGVkaXRpbmdFbGVtZW50UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkF0dGVtcHRpbmcgdG8gaGFuZGxlIHRleHQgY2hhbmdlIGZvciBub24tZWRpdGluZyBlbGVtZW50XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgb3JjaGlkcyBJRCBmcm9tIHRoZSBlbGVtZW50IHRvIGVuc3VyZSB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG9uZVxuICAgIGNvbnN0IG9yY2hpZHNJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1vcmNoaWRzLWlkXCIpO1xuICAgIGlmICghb3JjaGlkc0lkKSByZXR1cm47XG5cbiAgICAvLyBGb3IgZWxlbWVudHMgd2l0aCBjaGlsZHJlbiwgb25seSBleHRyYWN0IGRpcmVjdCB0ZXh0IGNvbnRlbnRcbiAgICBsZXQgbmV3VGV4dDogc3RyaW5nO1xuICAgIGxldCBvbGRUZXh0OiBzdHJpbmc7XG5cbiAgICBpZiAoZWxlbWVudC5jaGlsZEVsZW1lbnRDb3VudCA+IDApIHtcbiAgICAgIC8vIEVsZW1lbnQgaGFzIGNoaWxkcmVuIC0gb25seSB0cmFjayBkaXJlY3QgdGV4dCBub2Rlc1xuICAgICAgbmV3VGV4dCA9IGV4dHJhY3REaXJlY3RUZXh0Q29udGVudChlbGVtZW50KTtcbiAgICAgIC8vIFdlIG5lZWQgdG8gY29tcGFyZSBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBkaXJlY3QgdGV4dCBjb250ZW50XG4gICAgICAvLyBTaW5jZSBvcmlnaW5hbENvbnRlbnRSZWYgc3RvcmVzIHRoZSBmdWxsIHRleHQsIHdlIG5lZWQgdG8gaGFuZGxlIHRoaXMgZGlmZmVyZW50bHlcbiAgICAgIG9sZFRleHQgPSBvcmlnaW5hbENvbnRlbnRSZWYuY3VycmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm8gY2hpbGRyZW4gLSB1c2UgaW5uZXJUZXh0IHRvIHByZXNlcnZlIGxpbmUgYnJlYWtzXG4gICAgICBuZXdUZXh0ID0gZWxlbWVudC5pbm5lclRleHQgfHwgZWxlbWVudC50ZXh0Q29udGVudCB8fCBcIlwiO1xuICAgICAgb2xkVGV4dCA9IG9yaWdpbmFsQ29udGVudFJlZi5jdXJyZW50O1xuICAgIH1cblxuICAgIGlmIChuZXdUZXh0ICE9PSBvbGRUZXh0KSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZU9yY2hpZHNJZChvcmNoaWRzSWQpO1xuICAgICAgaWYgKCFwYXJzZWQpIHJldHVybjtcblxuICAgICAgLy8gU2VuZCB0ZXh0IGNoYW5nZSBtZXNzYWdlIHRvIHBhcmVudFxuICAgICAgY29uc3QgbXNnOiBDaGlsZFRvUGFyZW50ID0ge1xuICAgICAgICB0eXBlOiBDSEFOTkVMLFxuICAgICAgICBtc2c6IFwiVEVYVF9DSEFOR0VEXCIsXG4gICAgICAgIGlkOiBvcmNoaWRzSWQsXG4gICAgICAgIG9sZFRleHQ6IHdyYXBNdWx0aWxpbmUob2xkVGV4dCksXG4gICAgICAgIG5ld1RleHQ6IHdyYXBNdWx0aWxpbmUobmV3VGV4dCksXG4gICAgICAgIGZpbGVQYXRoOiBwYXJzZWQuZmlsZVBhdGgsXG4gICAgICAgIGxpbmU6IHBhcnNlZC5saW5lLFxuICAgICAgICBjb2x1bW46IHBhcnNlZC5jb2x1bW4sXG4gICAgICB9O1xuXG4gICAgICBwb3N0TWVzc2FnZURlZHVwKG1zZyk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgb3JpZ2luYWwgY29udGVudCByZWZlcmVuY2VcbiAgICAgIG9yaWdpbmFsQ29udGVudFJlZi5jdXJyZW50ID0gbmV3VGV4dDtcbiAgICB9XG4gIH07XG5cbiAgLy8gSGFuZGxlIHN0eWxlIGNoYW5nZXMgYW5kIHNlbmQgdG8gcGFyZW50XG4gIGNvbnN0IGhhbmRsZVN0eWxlQ2hhbmdlID0gKFxuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIHN0eWxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuICApID0+IHtcbiAgICBjb25zdCBvcmNoaWRzSWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtb3JjaGlkcy1pZFwiKTtcbiAgICBpZiAoIW9yY2hpZHNJZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VPcmNoaWRzSWQob3JjaGlkc0lkKTtcbiAgICBpZiAoIXBhcnNlZCkgcmV0dXJuO1xuXG4gICAgLy8gRmluZCBBTEwgZWxlbWVudHMgd2l0aCB0aGUgc2FtZSBvcmNoaWRzIElEXG4gICAgY29uc3QgYWxsTWF0Y2hpbmdFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICBgW2RhdGEtb3JjaGlkcy1pZD1cIiR7b3JjaGlkc0lkfVwiXWBcbiAgICApIGFzIE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuXG4gICAgLy8gQXBwbHkgc3R5bGVzIHRvIEFMTCBtYXRjaGluZyBlbGVtZW50cyBmb3IgdmlzdWFsIGZlZWRiYWNrXG4gICAgYWxsTWF0Y2hpbmdFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgT2JqZWN0LmVudHJpZXMoc3R5bGVzKS5mb3JFYWNoKChbcHJvcGVydHksIHZhbHVlXSkgPT4ge1xuICAgICAgICAvLyBDb252ZXJ0IGNhbWVsQ2FzZSB0byBrZWJhYi1jYXNlIGZvciBDU1MgcHJvcGVydHkgbmFtZXNcbiAgICAgICAgY29uc3QgY3NzUHJvcCA9IHByb3BlcnR5LnJlcGxhY2UoLyhbQS1aXSkvZywgXCItJDFcIikudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAvLyBIYW5kbGUgc3BlY2lhbCBjYXNlcyBmb3IgZGVmYXVsdCB2YWx1ZXNcbiAgICAgICAgbGV0IGZpbmFsVmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICAvLyBJZiBiYWNrZ3JvdW5kQ29sb3IgaXMgYmVpbmcgc2V0IHRvIHRyYW5zcGFyZW50LCB1c2UgdHJhbnNwYXJlbnQga2V5d29yZFxuICAgICAgICBpZiAoXG4gICAgICAgICAgcHJvcGVydHkgPT09IFwiYmFja2dyb3VuZENvbG9yXCIgJiZcbiAgICAgICAgICAodmFsdWUgPT09IFwidHJhbnNwYXJlbnRcIiB8fFxuICAgICAgICAgICAgdmFsdWUgPT09IFwicmdiYSgwLCAwLCAwLCAwKVwiIHx8XG4gICAgICAgICAgICB2YWx1ZSA9PT0gXCJyZ2IoMCwgMCwgMCwgMClcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgZmluYWxWYWx1ZSA9IFwidHJhbnNwYXJlbnRcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHJlbW92aW5nIHN0eWxlcyAoc2V0dGluZyB0byBkZWZhdWx0KSwgcmVtb3ZlIHRoZSBwcm9wZXJ0eVxuICAgICAgICBpZiAoXG4gICAgICAgICAgKHByb3BlcnR5ID09PSBcImJhY2tncm91bmRDb2xvclwiICYmIGZpbmFsVmFsdWUgPT09IFwidHJhbnNwYXJlbnRcIikgfHxcbiAgICAgICAgICAocHJvcGVydHkgPT09IFwiYmFja2dyb3VuZEltYWdlXCIgJiYgdmFsdWUgPT09IFwibm9uZVwiKSB8fFxuICAgICAgICAgIChwcm9wZXJ0eSA9PT0gXCJ0ZXh0RGVjb3JhdGlvblwiICYmIHZhbHVlID09PSBcIm5vbmVcIikgfHxcbiAgICAgICAgICAocHJvcGVydHkgPT09IFwiZm9udFN0eWxlXCIgJiYgdmFsdWUgPT09IFwibm9ybWFsXCIpIHx8XG4gICAgICAgICAgKHByb3BlcnR5ID09PSBcIm9wYWNpdHlcIiAmJiB2YWx1ZSA9PT0gXCIxXCIpIHx8XG4gICAgICAgICAgKChwcm9wZXJ0eS5pbmNsdWRlcyhcInBhZGRpbmdcIikgfHwgcHJvcGVydHkuaW5jbHVkZXMoXCJtYXJnaW5cIikpICYmXG4gICAgICAgICAgICB2YWx1ZSA9PT0gXCIwXCIpIHx8XG4gICAgICAgICAgKHByb3BlcnR5ID09PSBcImJvcmRlclJhZGl1c1wiICYmIHZhbHVlID09PSBcIjBcIikgfHxcbiAgICAgICAgICAocHJvcGVydHkgPT09IFwibGV0dGVyU3BhY2luZ1wiICYmIHZhbHVlID09PSBcIm5vcm1hbFwiKSB8fFxuICAgICAgICAgIChwcm9wZXJ0eSA9PT0gXCJnYXBcIiAmJiB2YWx1ZSA9PT0gXCJub3JtYWxcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIHRoZSBwcm9wZXJ0eSB0byBsZXQgdGhlIHN0eWxlc2hlZXQgdmFsdWUgc2hvdyB0aHJvdWdoXG4gICAgICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoY3NzUHJvcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQXBwbHkgd2l0aCAhaW1wb3J0YW50IHNvIGl0IG92ZXJyaWRlcyBleGlzdGluZyBydWxlc1xuICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KGNzc1Byb3AsIGZpbmFsVmFsdWUsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFN0b3JlIHRoZSBhcHBsaWVkIHN0eWxlc1xuICAgIGNvbnN0IGV4aXN0aW5nU3R5bGVzID0gYXBwbGllZFN0eWxlc1JlZi5jdXJyZW50LmdldChvcmNoaWRzSWQpIHx8IHt9O1xuICAgIGFwcGxpZWRTdHlsZXNSZWYuY3VycmVudC5zZXQob3JjaGlkc0lkLCB7IC4uLmV4aXN0aW5nU3R5bGVzLCAuLi5zdHlsZXMgfSk7XG4gICAgaGFzU3R5bGVDaGFuZ2VzUmVmLmN1cnJlbnQgPSB0cnVlO1xuXG4gICAgLy8gVXBkYXRlIHRoZSBmb2N1cyBib3ggYWZ0ZXIgc3R5bGUgY2hhbmdlXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHVwZGF0ZUZvY3VzQm94KCk7XG4gICAgfSk7XG5cbiAgICAvLyBEb24ndCBzZW5kIHRvIHBhcmVudCB5ZXQgLSB3YWl0IGZvciBibHVyXG4gIH07XG5cbiAgLy8gU2VuZCBzdHlsZSBjaGFuZ2VzIG9uIGJsdXJcbiAgY29uc3QgaGFuZGxlU3R5bGVCbHVyID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgaWYgKCFoYXNTdHlsZUNoYW5nZXNSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgb3JjaGlkc0lkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW9yY2hpZHMtaWRcIik7XG4gICAgaWYgKCFvcmNoaWRzSWQpIHJldHVybjtcblxuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlT3JjaGlkc0lkKG9yY2hpZHNJZCk7XG4gICAgaWYgKCFwYXJzZWQpIHJldHVybjtcblxuICAgIGNvbnN0IGFwcGxpZWRTdHlsZXMgPSBhcHBsaWVkU3R5bGVzUmVmLmN1cnJlbnQuZ2V0KG9yY2hpZHNJZCk7XG4gICAgaWYgKCFhcHBsaWVkU3R5bGVzIHx8IE9iamVjdC5rZXlzKGFwcGxpZWRTdHlsZXMpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gR2V0IGNsYXNzTmFtZSBmb3IgYnJlYWtwb2ludCBkZXRlY3Rpb25cbiAgICBjb25zdCBjbGFzc05hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIHx8IFwiXCI7XG5cbiAgICAvLyBTZW5kIHN0eWxlIGJsdXIgbWVzc2FnZSB0byBwYXJlbnQgZm9yIFRhaWx3aW5kIGNvbnZlcnNpb25cbiAgICBjb25zdCBtc2c6IENoaWxkVG9QYXJlbnQgPSB7XG4gICAgICB0eXBlOiBDSEFOTkVMLFxuICAgICAgbXNnOiBcIlNUWUxFX0JMVVJcIixcbiAgICAgIGlkOiBvcmNoaWRzSWQsXG4gICAgICBzdHlsZXM6IGFwcGxpZWRTdHlsZXMsXG4gICAgICBjbGFzc05hbWUsXG4gICAgICBmaWxlUGF0aDogcGFyc2VkLmZpbGVQYXRoLFxuICAgICAgbGluZTogcGFyc2VkLmxpbmUsXG4gICAgICBjb2x1bW46IHBhcnNlZC5jb2x1bW4sXG4gICAgfTtcblxuICAgIHBvc3RNZXNzYWdlRGVkdXAobXNnKTtcblxuICAgIC8vIFJlc2V0IHN0eWxlIGNoYW5nZXMgZmxhZ1xuICAgIGhhc1N0eWxlQ2hhbmdlc1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gIH07XG5cbiAgLy8gRmx1c2ggaW1hZ2Ugc3JjIHVwZGF0ZXMgb24gYmx1ci9mb2N1cyBjaGFuZ2VcbiAgY29uc3QgZmx1c2hJbWFnZVNyY0NoYW5nZSA9ICgpID0+IHtcbiAgICAvLyBVc2UgdGhlIHN0b3JlZCBpbWFnZSBlbGVtZW50IHJlZmVyZW5jZSBpZiBhdmFpbGFibGVcbiAgICBjb25zdCBpbWdFbGVtZW50ID0gZm9jdXNlZEltYWdlRWxlbWVudFJlZi5jdXJyZW50O1xuICAgIGlmICghaW1nRWxlbWVudCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgb3JjaGlkc0lkID0gaW1nRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW9yY2hpZHMtaWRcIik7XG4gICAgaWYgKCFvcmNoaWRzSWQpIHJldHVybjtcblxuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlT3JjaGlkc0lkKG9yY2hpZHNJZCk7XG4gICAgaWYgKCFwYXJzZWQpIHJldHVybjtcblxuICAgIGNvbnN0IG5ld1NyYyA9IG5vcm1hbGl6ZUltYWdlU3JjKGltZ0VsZW1lbnQuc3JjKTtcbiAgICBjb25zdCBvbGRTcmMgPSBub3JtYWxpemVJbWFnZVNyYyhvcmlnaW5hbFNyY1JlZi5jdXJyZW50KTtcblxuICAgIGlmICghbmV3U3JjIHx8IG5ld1NyYyA9PT0gb2xkU3JjKSByZXR1cm47IC8vIG5vdGhpbmcgY2hhbmdlZFxuXG4gICAgY29uc3QgbXNnOiBDaGlsZFRvUGFyZW50ID0ge1xuICAgICAgdHlwZTogQ0hBTk5FTCxcbiAgICAgIG1zZzogXCJJTUFHRV9CTFVSXCIsXG4gICAgICBpZDogb3JjaGlkc0lkLFxuICAgICAgb2xkU3JjLFxuICAgICAgbmV3U3JjLFxuICAgICAgZmlsZVBhdGg6IHBhcnNlZC5maWxlUGF0aCxcbiAgICAgIGxpbmU6IHBhcnNlZC5saW5lLFxuICAgICAgY29sdW1uOiBwYXJzZWQuY29sdW1uLFxuICAgIH07XG5cbiAgICBwb3N0TWVzc2FnZURlZHVwKG1zZyk7XG5cbiAgICBvcmlnaW5hbFNyY1JlZi5jdXJyZW50ID0gbmV3U3JjOyAvLyByZXNldCBiYXNlbGluZVxuICAgIGZvY3VzZWRJbWFnZUVsZW1lbnRSZWYuY3VycmVudCA9IG51bGw7IC8vIGNsZWFyIHJlZmVyZW5jZVxuICB9O1xuXG4gIC8vIExpc3RlbiBmb3Igc3R5bGUgYW5kIGltYWdlIHVwZGF0ZXMgZnJvbSBwYXJlbnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmdW5jdGlvbiBoYW5kbGVNZXNzYWdlKGU6IE1lc3NhZ2VFdmVudCkge1xuICAgICAgaWYgKGUuZGF0YT8udHlwZSA9PT0gXCJPUkNISURTX1NUWUxFX1VQREFURVwiKSB7XG4gICAgICAgIGNvbnN0IHsgZWxlbWVudElkLCBzdHlsZXMgfSA9IGUuZGF0YTtcblxuICAgICAgICAvLyBGaW5kIEFMTCBlbGVtZW50cyB3aXRoIHRoZSBzYW1lIG9yY2hpZHMgSURcbiAgICAgICAgY29uc3QgYWxsTWF0Y2hpbmdFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgICAgYFtkYXRhLW9yY2hpZHMtaWQ9XCIke2VsZW1lbnRJZH1cIl1gXG4gICAgICAgICkgYXMgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG5cbiAgICAgICAgaWYgKGFsbE1hdGNoaW5nRWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIElmIGZvbnRGYW1pbHkgaXMgcHJlc2VudCBlbnN1cmUgc3R5bGVzaGVldCBsb2FkZWQgZmlyc3RcbiAgICAgICAgICBjb25zdCBmYW0gPSBzdHlsZXMuZm9udEZhbWlseSB8fCBzdHlsZXNbXCJmb250RmFtaWx5XCJdO1xuICAgICAgICAgIGlmIChmYW0pIHtcbiAgICAgICAgICAgIGNvbnN0IGZhbWlseUtleSA9IGZhbS5yZXBsYWNlKC9bJ1xcc10rL2csIFwiK1wiKTtcbiAgICAgICAgICAgIGlmICghbG9hZGVkRm9udEZhbWlsaWVzLmN1cnJlbnQuaGFzKGZhbWlseUtleSkpIHtcbiAgICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuICAgICAgICAgICAgICBsaW5rLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuICAgICAgICAgICAgICBsaW5rLmhyZWYgPSBgaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT0ke2ZhbWlseUtleX06d2dodEA0MDAmZGlzcGxheT1zd2FwYDtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgICAgICAgICAgbG9hZGVkRm9udEZhbWlsaWVzLmN1cnJlbnQuYWRkKGZhbWlseUtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgZm9udEZhbWlseSBtYWRlIHBlcnNpc3RlbnQgdmlhIHN0eWxlIHVwZGF0ZSwgcmVtZW1iZXIgc28gcHJldmlld3MgZG9uJ3Qgb3ZlcnJpZGVcbiAgICAgICAgICBpZiAoZmFtKSB7XG4gICAgICAgICAgICBwZXJzaXN0ZW50Rm9udE1hcC5jdXJyZW50LnNldChlbGVtZW50SWQsIGZhbSk7XG5cbiAgICAgICAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyB0aW1lb3V0XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1RpbWVvdXQgPVxuICAgICAgICAgICAgICBwZXJzaXN0ZW50Rm9udFRpbWVvdXRzLmN1cnJlbnQuZ2V0KGVsZW1lbnRJZCk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdUaW1lb3V0KSB7XG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dChleGlzdGluZ1RpbWVvdXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXQgdGltZW91dCB0byBjbGVhciBwZXJzaXN0ZW50IGZvbnQgYWZ0ZXIgMiBzZWNvbmRzLCBhbGxvd2luZyBwcmV2aWV3cyBhZ2FpblxuICAgICAgICAgICAgY29uc3QgdGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBwZXJzaXN0ZW50Rm9udE1hcC5jdXJyZW50LmRlbGV0ZShlbGVtZW50SWQpO1xuICAgICAgICAgICAgICBwZXJzaXN0ZW50Rm9udFRpbWVvdXRzLmN1cnJlbnQuZGVsZXRlKGVsZW1lbnRJZCk7XG4gICAgICAgICAgICB9LCAyMDAwKTtcblxuICAgICAgICAgICAgcGVyc2lzdGVudEZvbnRUaW1lb3V0cy5jdXJyZW50LnNldChlbGVtZW50SWQsIHRpbWVvdXRJZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQXBwbHkgc3R5bGVzIHRvIEFMTCBtYXRjaGluZyBlbGVtZW50c1xuICAgICAgICAgIGFsbE1hdGNoaW5nRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgaGFuZGxlU3R5bGVDaGFuZ2UgZm9yIHRoZSBmb2N1c2VkIGVsZW1lbnQgdG8gdHJhY2sgY2hhbmdlc1xuICAgICAgICAgICAgaWYgKGZvY3VzZWRFbGVtZW50UmVmLmN1cnJlbnQgPT09IGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgaGFuZGxlU3R5bGVDaGFuZ2UoZWxlbWVudCwgc3R5bGVzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIEZvciBvdGhlciBlbGVtZW50cywgYXBwbHkgc3R5bGVzIGRpcmVjdGx5XG4gICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHN0eWxlcykuZm9yRWFjaCgoW3Byb3BlcnR5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjc3NQcm9wID0gcHJvcGVydHlcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oW0EtWl0pL2csIFwiLSQxXCIpXG4gICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBzcGVjaWFsIGNhc2VzIGZvciBkZWZhdWx0IHZhbHVlc1xuICAgICAgICAgICAgICAgIGxldCBmaW5hbFZhbHVlID0gU3RyaW5nKHZhbHVlKTtcblxuICAgICAgICAgICAgICAgIC8vIElmIGJhY2tncm91bmRDb2xvciBpcyBiZWluZyBzZXQgdG8gdHJhbnNwYXJlbnQsIHVzZSB0cmFuc3BhcmVudCBrZXl3b3JkXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPT09IFwiYmFja2dyb3VuZENvbG9yXCIgJiZcbiAgICAgICAgICAgICAgICAgICh2YWx1ZSA9PT0gXCJ0cmFuc3BhcmVudFwiIHx8XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID09PSBcInJnYmEoMCwgMCwgMCwgMClcIiB8fFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCJyZ2IoMCwgMCwgMCwgMClcIilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGZpbmFsVmFsdWUgPSBcInRyYW5zcGFyZW50XCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgcmVtb3Zpbmcgc3R5bGVzIChzZXR0aW5nIHRvIGRlZmF1bHQpLCByZW1vdmUgdGhlIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgKHByb3BlcnR5ID09PSBcImJhY2tncm91bmRDb2xvclwiICYmXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsVmFsdWUgPT09IFwidHJhbnNwYXJlbnRcIikgfHxcbiAgICAgICAgICAgICAgICAgIChwcm9wZXJ0eSA9PT0gXCJiYWNrZ3JvdW5kSW1hZ2VcIiAmJiB2YWx1ZSA9PT0gXCJub25lXCIpIHx8XG4gICAgICAgICAgICAgICAgICAocHJvcGVydHkgPT09IFwidGV4dERlY29yYXRpb25cIiAmJiB2YWx1ZSA9PT0gXCJub25lXCIpIHx8XG4gICAgICAgICAgICAgICAgICAocHJvcGVydHkgPT09IFwiZm9udFN0eWxlXCIgJiYgdmFsdWUgPT09IFwibm9ybWFsXCIpIHx8XG4gICAgICAgICAgICAgICAgICAocHJvcGVydHkgPT09IFwib3BhY2l0eVwiICYmIHZhbHVlID09PSBcIjFcIikgfHxcbiAgICAgICAgICAgICAgICAgICgocHJvcGVydHkuaW5jbHVkZXMoXCJwYWRkaW5nXCIpIHx8XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LmluY2x1ZGVzKFwibWFyZ2luXCIpKSAmJlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gXCIwXCIpIHx8XG4gICAgICAgICAgICAgICAgICAocHJvcGVydHkgPT09IFwiYm9yZGVyUmFkaXVzXCIgJiYgdmFsdWUgPT09IFwiMFwiKSB8fFxuICAgICAgICAgICAgICAgICAgKHByb3BlcnR5ID09PSBcImxldHRlclNwYWNpbmdcIiAmJiB2YWx1ZSA9PT0gXCJub3JtYWxcIikgfHxcbiAgICAgICAgICAgICAgICAgIChwcm9wZXJ0eSA9PT0gXCJnYXBcIiAmJiB2YWx1ZSA9PT0gXCJub3JtYWxcIilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgcHJvcGVydHkgdG8gbGV0IHRoZSBzdHlsZXNoZWV0IHZhbHVlIHNob3cgdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShjc3NQcm9wKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShjc3NQcm9wLCBmaW5hbFZhbHVlLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGUuZGF0YT8udHlwZSA9PT0gXCJPUkNISURTX0lNQUdFX1VQREFURVwiKSB7XG4gICAgICAgIGNvbnN0IHsgZWxlbWVudElkLCBzcmMsIG9sZFNyYyB9ID0gZS5kYXRhO1xuICAgICAgICBsZXQgZWxlbWVudDogSFRNTEltYWdlRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgICAgICBjb25zdCBjYW5kaWRhdGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgICBgW2RhdGEtb3JjaGlkcy1pZD1cIiR7ZWxlbWVudElkfVwiXWBcbiAgICAgICAgKTtcbiAgICAgICAgY2FuZGlkYXRlcy5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW1nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGltZyA9IGVsIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBub3JtID0gbm9ybWFsaXplSW1hZ2VTcmMoaW1nLnNyYyk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIGVsZW1lbnQgPSBpbWc7IC8vIGZpcnN0IGZhbGxiYWNrXG4gICAgICAgICAgICBpZiAob2xkU3JjICYmIG5vcm1hbGl6ZUltYWdlU3JjKG9sZFNyYykgPT09IG5vcm0pIHtcbiAgICAgICAgICAgICAgZWxlbWVudCA9IGltZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xuXG4gICAgICAgIGlmICgoZWxlbWVudCBhcyBIVE1MRWxlbWVudCkudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImltZ1wiKSB7XG4gICAgICAgICAgY29uc3QgaW1nRWwgPSBlbGVtZW50IGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG5cbiAgICAgICAgICB7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogQ2xlYXIgYW55IGV4aXN0aW5nIHJlc3BvbnNpdmUgc291cmNlcyBzbyB0aGUgbmV3bHkgdXBsb2FkZWQgaW1hZ2VcbiAgICAgICAgICAgICAqIGFsd2F5cyBkaXNwbGF5cy4gIFNvbWUgZnJhbWV3b3JrcyAoZS5nLiBOZXh0LmpzKSBhZGQgYSBgc3Jjc2V0YFxuICAgICAgICAgICAgICogYXR0cmlidXRlIHdoaWNoIGNhbiBvdmVycmlkZSBgc3JjYCBpbiBjZXJ0YWluIHZpZXdwb3J0L2RldmljZVxuICAgICAgICAgICAgICogc2NlbmFyaW9zLCBzbyB3ZSBzdHJpcCBpdCBvdXQgYmVmb3JlIHNldHRpbmcgdGhlIG5ldyBzb3VyY2UuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGltZ0VsLnJlbW92ZUF0dHJpYnV0ZShcInNyY3NldFwiKTtcbiAgICAgICAgICAgIGltZ0VsLnNyY3NldCA9IFwiXCI7XG5cbiAgICAgICAgICAgIGltZ0VsLnNyYyA9IHNyYztcblxuICAgICAgICAgICAgLy8gVXBkYXRlIGJhc2VsaW5lIHNyYyBzbyBmbHVzaCBkb2Vzbid0IHRyZWF0IHRoaXMgYXMgcGVuZGluZyBjaGFuZ2VcbiAgICAgICAgICAgIG9yaWdpbmFsU3JjUmVmLmN1cnJlbnQgPSBub3JtYWxpemVJbWFnZVNyYyhzcmMpO1xuICAgICAgICAgICAgZm9jdXNlZEltYWdlRWxlbWVudFJlZi5jdXJyZW50ID0gaW1nRWw7XG5cbiAgICAgICAgICAgIGltZ0VsLm9ubG9hZCA9ICgpID0+IHVwZGF0ZUZvY3VzQm94KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGUuZGF0YT8udHlwZSA9PT0gXCJSRVNJWkVfRUxFTUVOVFwiKSB7XG4gICAgICAgIGNvbnN0IHsgZWxlbWVudElkLCB3aWR0aCwgaGVpZ2h0IH0gPSBlLmRhdGE7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIGBbZGF0YS1vcmNoaWRzLWlkPVwiJHtlbGVtZW50SWR9XCJdYFxuICAgICAgICApIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIGlmIChlbGVtZW50ICYmIGZvY3VzZWRFbGVtZW50UmVmLmN1cnJlbnQgPT09IGVsZW1lbnQpIHtcbiAgICAgICAgICAvLyBBcHBseSB0ZW1wb3JhcnkgcmVzaXplIHN0eWxlc1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJ3aWR0aFwiLCBgJHt3aWR0aH1weGAsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJoZWlnaHRcIiwgYCR7aGVpZ2h0fXB4YCwgXCJpbXBvcnRhbnRcIik7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgZm9jdXMgYm94XG4gICAgICAgICAgdXBkYXRlRm9jdXNCb3goKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBoYW5kbGVNZXNzYWdlKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGhhbmRsZU1lc3NhZ2UpO1xuICB9LCBbXSk7XG5cbiAgLy8gSGFuZGxlIHJlc2l6ZVxuICBjb25zdCBoYW5kbGVSZXNpemVTdGFydCA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50LCBoYW5kbGU6IHN0cmluZykgPT4ge1xuICAgIGlmICghZm9jdXNlZEVsZW1lbnRSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICBjb25zdCByZWN0ID0gZm9jdXNlZEVsZW1lbnRSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIC8vIENsZWFyIGFueSBob3ZlciBvdmVybGF5IHdoZW4gc3RhcnRpbmcgcmVzaXplXG4gICAgc2V0SG92ZXJCb3gobnVsbCk7XG4gICAgbGFzdEhpdEVsZW1lbnRSZWYuY3VycmVudCA9IG51bGw7XG5cbiAgICAvLyBEaXNhYmxlIHBvaW50ZXIgZXZlbnRzIG9uIGJvZHkgdG8gcHJldmVudCBob3ZlciBkZXRlY3Rpb25cbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcbiAgICAvLyBLZWVwIHJlc2l6ZSBoYW5kbGVzIGludGVyYWN0aXZlXG4gICAgY29uc3QgcmVzaXplSGFuZGxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVzaXplLWhhbmRsZVwiKTtcbiAgICByZXNpemVIYW5kbGVzLmZvckVhY2goKGhhbmRsZSkgPT4ge1xuICAgICAgKGhhbmRsZSBhcyBIVE1MRWxlbWVudCkuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYXV0b1wiO1xuICAgIH0pO1xuXG4gICAgc2V0SXNSZXNpemluZyh0cnVlKTtcbiAgICBpc1Jlc2l6aW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgIHNldFJlc2l6ZUhhbmRsZShoYW5kbGUpO1xuICAgIHNldFJlc2l6ZVN0YXJ0KHtcbiAgICAgIHg6IGUuY2xpZW50WCxcbiAgICAgIHk6IGUuY2xpZW50WSxcbiAgICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCxcbiAgICB9KTtcbiAgfTtcblxuICAvLyBIYW5kbGUgcmVzaXplIG1vdmVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoXG4gICAgICAhaXNSZXNpemluZyB8fFxuICAgICAgIXJlc2l6ZVN0YXJ0IHx8XG4gICAgICAhcmVzaXplSGFuZGxlIHx8XG4gICAgICAhZm9jdXNlZEVsZW1lbnRSZWYuY3VycmVudFxuICAgIClcbiAgICAgIHJldHVybjtcblxuICAgIGNvbnN0IGhhbmRsZU1vdXNlTW92ZSA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBkeCA9IGUuY2xpZW50WCAtIHJlc2l6ZVN0YXJ0Lng7XG4gICAgICBjb25zdCBkeSA9IGUuY2xpZW50WSAtIHJlc2l6ZVN0YXJ0Lnk7XG5cbiAgICAgIGxldCBuZXdXaWR0aCA9IHJlc2l6ZVN0YXJ0LndpZHRoO1xuICAgICAgbGV0IG5ld0hlaWdodCA9IHJlc2l6ZVN0YXJ0LmhlaWdodDtcblxuICAgICAgLy8gQ2FsY3VsYXRlIG5ldyBkaW1lbnNpb25zIGJhc2VkIG9uIGhhbmRsZVxuICAgICAgaWYgKHJlc2l6ZUhhbmRsZS5pbmNsdWRlcyhcImVcIikpIG5ld1dpZHRoID0gcmVzaXplU3RhcnQud2lkdGggKyBkeDtcbiAgICAgIGlmIChyZXNpemVIYW5kbGUuaW5jbHVkZXMoXCJ3XCIpKSBuZXdXaWR0aCA9IHJlc2l6ZVN0YXJ0LndpZHRoIC0gZHg7XG4gICAgICBpZiAocmVzaXplSGFuZGxlLmluY2x1ZGVzKFwic1wiKSkgbmV3SGVpZ2h0ID0gcmVzaXplU3RhcnQuaGVpZ2h0ICsgZHk7XG4gICAgICBpZiAocmVzaXplSGFuZGxlLmluY2x1ZGVzKFwiblwiKSkgbmV3SGVpZ2h0ID0gcmVzaXplU3RhcnQuaGVpZ2h0IC0gZHk7XG5cbiAgICAgIC8vIEdldCBwYXJlbnQgY29udGFpbmVyIGZvciBjb25zdHJhaW50c1xuICAgICAgY29uc3QgcGFyZW50ID0gZm9jdXNlZEVsZW1lbnRSZWYuY3VycmVudD8ucGFyZW50RWxlbWVudDtcbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgY29uc3QgcGFyZW50UmVjdCA9IHBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgcGFyZW50U3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocGFyZW50KTtcbiAgICAgICAgY29uc3QgcGFyZW50UGFkZGluZ0xlZnQgPSBwYXJzZUZsb2F0KHBhcmVudFN0eWxlcy5wYWRkaW5nTGVmdCkgfHwgMDtcbiAgICAgICAgY29uc3QgcGFyZW50UGFkZGluZ1JpZ2h0ID0gcGFyc2VGbG9hdChwYXJlbnRTdHlsZXMucGFkZGluZ1JpZ2h0KSB8fCAwO1xuICAgICAgICBjb25zdCBwYXJlbnRQYWRkaW5nVG9wID0gcGFyc2VGbG9hdChwYXJlbnRTdHlsZXMucGFkZGluZ1RvcCkgfHwgMDtcbiAgICAgICAgY29uc3QgcGFyZW50UGFkZGluZ0JvdHRvbSA9IHBhcnNlRmxvYXQocGFyZW50U3R5bGVzLnBhZGRpbmdCb3R0b20pIHx8IDA7XG5cbiAgICAgICAgY29uc3QgbWF4V2lkdGggPVxuICAgICAgICAgIHBhcmVudFJlY3Qud2lkdGggLSBwYXJlbnRQYWRkaW5nTGVmdCAtIHBhcmVudFBhZGRpbmdSaWdodDtcbiAgICAgICAgY29uc3QgbWF4SGVpZ2h0ID1cbiAgICAgICAgICBwYXJlbnRSZWN0LmhlaWdodCAtIHBhcmVudFBhZGRpbmdUb3AgLSBwYXJlbnRQYWRkaW5nQm90dG9tO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIFNvZnQtY2xhbXAgc3RyYXRlZ3k6IHdlIHJlc3BlY3QgdGhlIHBhcmVudOKAmXMgbWF4IHNpemUgdW50aWwgdGhlXG4gICAgICAgICAqIHVzZXLigJlzIGN1cnNvciBhY3R1YWxseSB0cmF2ZWxzIGJleW9uZCB0aGF0IGxpbWl0LiAgQXMgc29vbiBhcyB0aGVcbiAgICAgICAgICogZHJhZyBkaXN0YW5jZSB3b3VsZCBwcm9kdWNlIGEgZGltZW5zaW9uIGxhcmdlciB0aGFuIHRoZSBjb250YWluZXJcbiAgICAgICAgICogY2FuIGFjY29tbW9kYXRlIHdlIHN0b3AgY2xhbXBpbmcgYW5kIGxldCB0aGUgZWxlbWVudCBmb2xsb3cgdGhlXG4gICAgICAgICAqIGN1cnNvciwgZWZmZWN0aXZlbHkgYWxsb3dpbmcgaXQgdG8g4oCcc3BpbGzigJ0gb3V0IG9mIGl0cyBwYXJlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBleGNlZWRzV2lkdGggPSBuZXdXaWR0aCA+IG1heFdpZHRoO1xuICAgICAgICBjb25zdCBleGNlZWRzSGVpZ2h0ID0gbmV3SGVpZ2h0ID4gbWF4SGVpZ2h0O1xuXG4gICAgICAgIG5ld1dpZHRoID0gTWF0aC5tYXgoXG4gICAgICAgICAgMjAsXG4gICAgICAgICAgZXhjZWVkc1dpZHRoID8gbmV3V2lkdGggOiBNYXRoLm1pbihuZXdXaWR0aCwgbWF4V2lkdGgpXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5tYXgoXG4gICAgICAgICAgMjAsXG4gICAgICAgICAgZXhjZWVkc0hlaWdodCA/IG5ld0hlaWdodCA6IE1hdGgubWluKG5ld0hlaWdodCwgbWF4SGVpZ2h0KVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gbWluaW11bSBkaW1lbnNpb25zIGlmIG5vIHBhcmVudFxuICAgICAgICBuZXdXaWR0aCA9IE1hdGgubWF4KDIwLCBuZXdXaWR0aCk7XG4gICAgICAgIG5ld0hlaWdodCA9IE1hdGgubWF4KDIwLCBuZXdIZWlnaHQpO1xuICAgICAgfVxuXG4gICAgICAvLyBFbnN1cmUgaG92ZXIgYm94IHN0YXlzIGhpZGRlbiBkdXJpbmcgcmVzaXplXG4gICAgICBpZiAoaG92ZXJCb3gpIHtcbiAgICAgICAgc2V0SG92ZXJCb3gobnVsbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbmQgcmVzaXplIG1lc3NhZ2UgdG8gcGFyZW50XG4gICAgICBpZiAoZm9jdXNlZEVsZW1lbnRJZCkge1xuICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IENIQU5ORUwsXG4gICAgICAgICAgICBtc2c6IFwiUkVTSVpFX0VMRU1FTlRcIixcbiAgICAgICAgICAgIGVsZW1lbnRJZDogZm9jdXNlZEVsZW1lbnRJZCxcbiAgICAgICAgICAgIHdpZHRoOiBNYXRoLnJvdW5kKG5ld1dpZHRoKSxcbiAgICAgICAgICAgIGhlaWdodDogTWF0aC5yb3VuZChuZXdIZWlnaHQpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCIqXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlTW91c2VVcCA9ICgpID0+IHtcbiAgICAgIGlmIChmb2N1c2VkRWxlbWVudFJlZi5jdXJyZW50ICYmIGZvY3VzZWRFbGVtZW50SWQpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGZvY3VzZWRFbGVtZW50UmVmLmN1cnJlbnQ7XG4gICAgICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGUud2lkdGgpIHx8IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZS5oZWlnaHQpIHx8IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgIC8vIENoZWNrIGlmIGVsZW1lbnQgaGFzIG1heC13aWR0aC9tYXgtaGVpZ2h0IGNvbnN0cmFpbnRzXG4gICAgICAgIGNvbnN0IG1heFdpZHRoID0gY29tcHV0ZWRTdHlsZS5tYXhXaWR0aDtcbiAgICAgICAgY29uc3QgbWF4SGVpZ2h0ID0gY29tcHV0ZWRTdHlsZS5tYXhIZWlnaHQ7XG4gICAgICAgIGNvbnN0IGhhc01heFdpZHRoID1cbiAgICAgICAgICBtYXhXaWR0aCAmJiBtYXhXaWR0aCAhPT0gXCJub25lXCIgJiYgbWF4V2lkdGggIT09IFwiaW5pdGlhbFwiO1xuICAgICAgICBjb25zdCBoYXNNYXhIZWlnaHQgPVxuICAgICAgICAgIG1heEhlaWdodCAmJiBtYXhIZWlnaHQgIT09IFwibm9uZVwiICYmIG1heEhlaWdodCAhPT0gXCJpbml0aWFsXCI7XG5cbiAgICAgICAgLy8gVHJ5IHRvIHVzZSByZWxhdGl2ZSB1bml0cyB3aGVuIHBvc3NpYmxlXG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgbGV0IHdpZHRoVmFsdWUgPSBgJHtNYXRoLnJvdW5kKHdpZHRoKX1weGA7XG4gICAgICAgIGxldCBoZWlnaHRWYWx1ZSA9IGAke01hdGgucm91bmQoaGVpZ2h0KX1weGA7XG5cbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgIGNvbnN0IHBhcmVudFJlY3QgPSBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgY29uc3QgcGFyZW50U3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocGFyZW50KTtcbiAgICAgICAgICBjb25zdCBwYXJlbnRQYWRkaW5nTGVmdCA9IHBhcnNlRmxvYXQocGFyZW50U3R5bGVzLnBhZGRpbmdMZWZ0KSB8fCAwO1xuICAgICAgICAgIGNvbnN0IHBhcmVudFBhZGRpbmdSaWdodCA9IHBhcnNlRmxvYXQocGFyZW50U3R5bGVzLnBhZGRpbmdSaWdodCkgfHwgMDtcbiAgICAgICAgICBjb25zdCBwYXJlbnRQYWRkaW5nVG9wID0gcGFyc2VGbG9hdChwYXJlbnRTdHlsZXMucGFkZGluZ1RvcCkgfHwgMDtcbiAgICAgICAgICBjb25zdCBwYXJlbnRQYWRkaW5nQm90dG9tID1cbiAgICAgICAgICAgIHBhcnNlRmxvYXQocGFyZW50U3R5bGVzLnBhZGRpbmdCb3R0b20pIHx8IDA7XG5cbiAgICAgICAgICBjb25zdCBwYXJlbnRJbm5lcldpZHRoID1cbiAgICAgICAgICAgIHBhcmVudFJlY3Qud2lkdGggLSBwYXJlbnRQYWRkaW5nTGVmdCAtIHBhcmVudFBhZGRpbmdSaWdodDtcbiAgICAgICAgICBjb25zdCBwYXJlbnRJbm5lckhlaWdodCA9XG4gICAgICAgICAgICBwYXJlbnRSZWN0LmhlaWdodCAtIHBhcmVudFBhZGRpbmdUb3AgLSBwYXJlbnRQYWRkaW5nQm90dG9tO1xuXG4gICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgdGFrZXMgdXAgYSBzaWduaWZpY2FudCBwb3J0aW9uIG9mIHBhcmVudCwgdXNlIHBlcmNlbnRhZ2VcbiAgICAgICAgICBjb25zdCB3aWR0aFBlcmNlbnQgPSAod2lkdGggLyBwYXJlbnRJbm5lcldpZHRoKSAqIDEwMDtcbiAgICAgICAgICBjb25zdCBoZWlnaHRQZXJjZW50ID0gKGhlaWdodCAvIHBhcmVudElubmVySGVpZ2h0KSAqIDEwMDtcblxuICAgICAgICAgIC8vIFVzZSBwZXJjZW50YWdlIGlmIGl0J3MgYSByb3VuZCBudW1iZXIgb3IgY2xvc2UgdG8gY29tbW9uIHZhbHVlc1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIE1hdGguYWJzKHdpZHRoUGVyY2VudCAtIE1hdGgucm91bmQod2lkdGhQZXJjZW50KSkgPCAwLjEgfHxcbiAgICAgICAgICAgIFsyNSwgMzMuMzMzLCA1MCwgNjYuNjY3LCA3NSwgMTAwXS5zb21lKFxuICAgICAgICAgICAgICAodikgPT4gTWF0aC5hYnMod2lkdGhQZXJjZW50IC0gdikgPCAwLjVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHdpZHRoVmFsdWUgPSBgJHtNYXRoLnJvdW5kKHdpZHRoUGVyY2VudCAqIDEwKSAvIDEwfSVgO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEZvciBoZWlnaHQsIGJlIG1vcmUgY29uc2VydmF0aXZlIHdpdGggcGVyY2VudGFnZXMgKG9mdGVuIHB4IGlzIHByZWZlcnJlZClcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBNYXRoLmFicyhoZWlnaHRQZXJjZW50IC0gTWF0aC5yb3VuZChoZWlnaHRQZXJjZW50KSkgPCAwLjEgJiZcbiAgICAgICAgICAgIFsyNSwgNTAsIDc1LCAxMDBdLmluY2x1ZGVzKE1hdGgucm91bmQoaGVpZ2h0UGVyY2VudCkpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBoZWlnaHRWYWx1ZSA9IGAke01hdGgucm91bmQoaGVpZ2h0UGVyY2VudCl9JWA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQnVpbGQgc3R5bGVzIG9iamVjdFxuICAgICAgICBjb25zdCBzdHlsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuICAgICAgICAvLyBBbHdheXMgc2V0IGEgZml4ZWQgd2lkdGggYW5kIGhlaWdodCB0byBicmVhayBvdXQgb2YgcmVzcG9uc2l2ZSBjbGFzc2VzLlxuICAgICAgICBzdHlsZXMud2lkdGggPSB3aWR0aFZhbHVlO1xuICAgICAgICBzdHlsZXMuaGVpZ2h0ID0gaGVpZ2h0VmFsdWU7XG5cbiAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaGFkIGEgbWF4LXdpZHRoIGNvbnN0cmFpbnQgKGUuZy4gZnJvbSBgbWF4LXctZnVsbGApLFxuICAgICAgICAvLyB3ZSB1cGRhdGUgaXQgdG8gdGhlIG5ldyB3aWR0aCB0byBlbnN1cmUgdGhlIHJlc2l6ZSBpcyBub3QgY2FwcGVkLlxuICAgICAgICBpZiAoaGFzTWF4V2lkdGgpIHtcbiAgICAgICAgICBzdHlsZXMubWF4V2lkdGggPSB3aWR0aFZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2FtZSBmb3IgaGVpZ2h0LlxuICAgICAgICBpZiAoaGFzTWF4SGVpZ2h0KSB7XG4gICAgICAgICAgc3R5bGVzLm1heEhlaWdodCA9IGhlaWdodFZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2VuZCBmaW5hbCBkaW1lbnNpb25zIGFzIHN0eWxlIGNoYW5nZVxuICAgICAgICBjb25zdCBtc2c6IENoaWxkVG9QYXJlbnQgPSB7XG4gICAgICAgICAgdHlwZTogQ0hBTk5FTCxcbiAgICAgICAgICBtc2c6IFwiU1RZTEVfQkxVUlwiLFxuICAgICAgICAgIGlkOiBmb2N1c2VkRWxlbWVudElkLFxuICAgICAgICAgIHN0eWxlcyxcbiAgICAgICAgICBmaWxlUGF0aDogXCJcIixcbiAgICAgICAgICBsaW5lOiAwLFxuICAgICAgICAgIGNvbHVtbjogMCxcbiAgICAgICAgICBjbGFzc05hbWU6IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIixcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBFeHRyYWN0IGZpbGUgaW5mbyBmcm9tIGRhdGEtb3JjaGlkcy1pZFxuICAgICAgICBjb25zdCBvcmNoaWRzSWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtb3JjaGlkcy1pZFwiKTtcbiAgICAgICAgaWYgKG9yY2hpZHNJZCkge1xuICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlT3JjaGlkc0lkKG9yY2hpZHNJZCk7XG4gICAgICAgICAgaWYgKHBhcnNlZCkge1xuICAgICAgICAgICAgbXNnLmZpbGVQYXRoID0gcGFyc2VkLmZpbGVQYXRoO1xuICAgICAgICAgICAgbXNnLmxpbmUgPSBwYXJzZWQubGluZTtcbiAgICAgICAgICAgIG1zZy5jb2x1bW4gPSBwYXJzZWQuY29sdW1uO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UobXNnLCBcIipcIik7XG4gICAgICB9XG5cbiAgICAgIHNldElzUmVzaXppbmcoZmFsc2UpO1xuICAgICAgaXNSZXNpemluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICBzZXRSZXNpemVIYW5kbGUobnVsbCk7XG4gICAgICBzZXRSZXNpemVTdGFydChudWxsKTtcblxuICAgICAgLy8gUmUtZW5hYmxlIHBvaW50ZXIgZXZlbnRzXG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIlwiO1xuXG4gICAgICAvLyBDbGVhciB0aGUgbGFzdCBoaXQgZWxlbWVudCB0byBmb3JjZSByZS1kZXRlY3Rpb24gYWZ0ZXIgcmVzaXplXG4gICAgICBsYXN0SGl0RWxlbWVudFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBoYW5kbGVNb3VzZU1vdmUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGhhbmRsZU1vdXNlVXApO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgaGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGhhbmRsZU1vdXNlVXApO1xuICAgIH07XG4gIH0sIFtpc1Jlc2l6aW5nLCByZXNpemVTdGFydCwgcmVzaXplSGFuZGxlLCBmb2N1c2VkRWxlbWVudElkLCBob3ZlckJveF0pOyAvLyBBZGRlZCBmb2N1c2VkRWxlbWVudElkIGFuZCBob3ZlckJveCBhcyBkZXBlbmRlbmNpZXNcblxuICAvLyBDbGVhbnVwIGZ1bmN0aW9uIHRvIHJlc3RvcmUgZWxlbWVudCBzdGF0ZVxuICBjb25zdCBjbGVhbnVwRWRpdGluZ0VsZW1lbnQgPSAoKSA9PiB7XG4gICAgaWYgKGVkaXRpbmdFbGVtZW50UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlZGl0aW5nRWxlbWVudFJlZi5jdXJyZW50O1xuXG4gICAgICAvLyBJbW1lZGlhdGVseSBjbGVhciB0aGUgcmVmIHRvIHByZXZlbnQgYW55IGZ1cnRoZXIgb3BlcmF0aW9uc1xuICAgICAgZWRpdGluZ0VsZW1lbnRSZWYuY3VycmVudCA9IG51bGw7XG5cbiAgICAgIC8vIEZsdXNoIHBlbmRpbmcgc3R5bGUgZWRpdHMgZmlyc3QgZm9yIHRoZSBzYW1lIHJlYXNvbiBkZXNjcmliZWQgYWJvdmVcbiAgICAgIGhhbmRsZVN0eWxlQmx1cihlbGVtZW50KTtcblxuICAgICAgLy8gTm93IHByb2Nlc3MgdGV4dCBjaGFuZ2VzXG4gICAgICBoYW5kbGVUZXh0Q2hhbmdlKGVsZW1lbnQpO1xuXG4gICAgICAvLyBSZXN0b3JlIGNoaWxkIGVsZW1lbnRzIGlmIHRoZXkgd2VyZSBwcm90ZWN0ZWRcbiAgICAgIGlmIChlbGVtZW50LmNoaWxkRWxlbWVudENvdW50ID4gMCkge1xuICAgICAgICByZXN0b3JlQ2hpbGRFbGVtZW50cyhlbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gT25seSBzZXQgY29udGVudEVkaXRhYmxlIHRvIGZhbHNlIGlmIHdlIG1hZGUgaXQgdHJ1ZVxuICAgICAgaWYgKCF3YXNFZGl0YWJsZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIGVsZW1lbnQuY29udGVudEVkaXRhYmxlID0gXCJmYWxzZVwiO1xuICAgICAgfVxuXG4gICAgICAvLyBEb24ndCByZXN0b3JlIG9yaWdpbmFsIHN0eWxlcyAtIGtlZXAgdGhlIGFwcGxpZWQgc3R5bGVzXG4gICAgICAvLyBSZW1vdmUgdGhlIG91dGxpbmUgc3VwcHJlc3Npb24gc3R5bGVzIG9ubHlcbiAgICAgIGNvbnN0IGN1cnJlbnRTdHlsZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikgfHwgXCJcIjtcbiAgICAgIGNvbnN0IGNsZWFuZWRTdHlsZSA9IGN1cnJlbnRTdHlsZVxuICAgICAgICAucmVwbGFjZSgvb3V0bGluZTpcXHMqbm9uZVxccyohaW1wb3J0YW50Oz8vZ2ksIFwiXCIpXG4gICAgICAgIC5yZXBsYWNlKC9ib3gtc2hhZG93Olxccypub25lXFxzKiFpbXBvcnRhbnQ7Py9naSwgXCJcIilcbiAgICAgICAgLnRyaW0oKVxuICAgICAgICAucmVwbGFjZSgvO1xccyo7L2csIFwiO1wiKVxuICAgICAgICAucmVwbGFjZSgvXjt8OyQvZywgXCJcIik7XG5cbiAgICAgIGlmIChjbGVhbmVkU3R5bGUpIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBjbGVhbmVkU3R5bGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICAgIH1cblxuICAgICAgZWxlbWVudC5ibHVyKCk7XG5cbiAgICAgIC8vIFJlbW92ZSBldmVudCBoYW5kbGVyc1xuICAgICAgY29uc3QgaGFuZGxlcnMgPSAoZWxlbWVudCBhcyBhbnkpLl9lZGl0SGFuZGxlcnM7XG4gICAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgaGFuZGxlcnMuZm9jdXMpO1xuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGhhbmRsZXJzLmJsdXIpO1xuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBoYW5kbGVycy5pbnB1dCk7XG4gICAgICAgIGRlbGV0ZSAoZWxlbWVudCBhcyBhbnkpLl9lZGl0SGFuZGxlcnM7XG4gICAgICB9XG5cbiAgICAgIHdhc0VkaXRhYmxlUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIC8vIENsZWFyIHRoZSBvcmlnaW5hbCBjb250ZW50IHJlZmVyZW5jZVxuICAgICAgb3JpZ2luYWxDb250ZW50UmVmLmN1cnJlbnQgPSBcIlwiO1xuICAgIH1cbiAgfTtcblxuICAvLyBQcmV2ZW50IGFsbCBuYXZpZ2F0aW9uIGluIHZpc3VhbCBlZGl0IG1vZGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzVmlzdWFsRWRpdE1vZGUpIHJldHVybjtcblxuICAgIC8vIFByZXZlbnQgbGluayBjbGlja3NcbiAgICBjb25zdCBwcmV2ZW50TGlua0NsaWNrID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGNvbnN0IGxpbmsgPSB0YXJnZXQuY2xvc2VzdChcImFcIik7XG4gICAgICBpZiAobGluayAmJiAhbGluay5pc0NvbnRlbnRFZGl0YWJsZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFByZXZlbnQgZm9ybSBzdWJtaXNzaW9uc1xuICAgIGNvbnN0IHByZXZlbnRGb3JtU3VibWl0ID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH07XG5cbiAgICAvLyBBZGQgbGlzdGVuZXJzIGluIGNhcHR1cmUgcGhhc2UgdG8gY2F0Y2ggZXZlbnRzIGVhcmx5XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHByZXZlbnRMaW5rQ2xpY2ssIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgcHJldmVudEZvcm1TdWJtaXQsIHRydWUpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwcmV2ZW50TGlua0NsaWNrLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgcHJldmVudEZvcm1TdWJtaXQsIHRydWUpO1xuICAgIH07XG4gIH0sIFtpc1Zpc3VhbEVkaXRNb2RlXSk7XG5cbiAgLy8gQ2xlYW4gdXAgd2hlbiBleGl0aW5nIHZpc3VhbCBlZGl0IG1vZGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzVmlzdWFsRWRpdE1vZGUpIHtcbiAgICAgIGNsZWFudXBFZGl0aW5nRWxlbWVudCgpO1xuICAgICAgLy8gQ2xlYXIgYXBwbGllZCBzdHlsZXMgdHJhY2tpbmdcbiAgICAgIGFwcGxpZWRTdHlsZXNSZWYuY3VycmVudC5jbGVhcigpO1xuICAgICAgaGFzU3R5bGVDaGFuZ2VzUmVmLmN1cnJlbnQgPSBmYWxzZTtcblxuICAgICAgLy8gQ2xlYXIgaW1hZ2UgZWxlbWVudCByZWZlcmVuY2VcbiAgICAgIGZvY3VzZWRJbWFnZUVsZW1lbnRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICB9LCBbaXNWaXN1YWxFZGl0TW9kZV0pO1xuXG4gIC8vIFVwZGF0ZSBmb2N1cyBib3ggcG9zaXRpb24gd2hlbiBzY3JvbGxpbmcgb3IgcmVzaXppbmdcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZm9jdXNlZEVsZW1lbnRSZWYuY3VycmVudCkge1xuICAgICAgY29uc3QgaGFuZGxlVXBkYXRlID0gKCkgPT4ge1xuICAgICAgICB1cGRhdGVGb2N1c0JveCgpO1xuXG4gICAgICAgIGlmIChmb2N1c2VkRWxlbWVudFJlZi5jdXJyZW50ICYmIGZvY3VzZWRFbGVtZW50SWQpIHtcbiAgICAgICAgICBjb25zdCBmciA9IGZvY3VzZWRFbGVtZW50UmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgY29uc3QgZkJveCA9IGV4cGFuZEJveChmcik7XG4gICAgICAgICAgaWYgKGZCb3gpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvY01zZzogQ2hpbGRUb1BhcmVudCA9IHtcbiAgICAgICAgICAgICAgdHlwZTogQ0hBTk5FTCxcbiAgICAgICAgICAgICAgbXNnOiBcIkZPQ1VTX01PVkVEXCIsXG4gICAgICAgICAgICAgIGlkOiBmb2N1c2VkRWxlbWVudElkLFxuICAgICAgICAgICAgICByZWN0OiB7XG4gICAgICAgICAgICAgICAgdG9wOiBmQm94LnRvcCxcbiAgICAgICAgICAgICAgICBsZWZ0OiBmQm94LmxlZnQsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGZCb3gud2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBmQm94LmhlaWdodCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwb3N0TWVzc2FnZURlZHVwKGZvY01zZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVVcGRhdGUsIHRydWUpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlVXBkYXRlKTtcblxuICAgICAgLy8gQWxzbyBvYnNlcnZlIHRoZSBmb2N1c2VkIGVsZW1lbnQgZm9yIHNpemUgY2hhbmdlc1xuICAgICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoaGFuZGxlVXBkYXRlKTtcbiAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUoZm9jdXNlZEVsZW1lbnRSZWYuY3VycmVudCk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZVVwZGF0ZSwgdHJ1ZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVVwZGF0ZSk7XG4gICAgICAgIHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH07XG4gICAgfVxuICB9LCBbZm9jdXNlZEVsZW1lbnRJZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gSGFuZGxlIHBvaW50ZXIgbW92ZW1lbnQgZGlyZWN0bHkgaW4gdGhlIGlmcmFtZVxuICAgIGZ1bmN0aW9uIG9uUG9pbnRlck1vdmUoZTogUG9pbnRlckV2ZW50KSB7XG4gICAgICBpZiAoaXNSZXNpemluZ1JlZi5jdXJyZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIE9ubHkgdHJhY2sgcG9pbnRlciB3aGVuIHZpc3VhbCBlZGl0IG1vZGUgaXMgYWN0aXZlXG4gICAgICBpZiAoIWlzVmlzdWFsRWRpdE1vZGVSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgICAvLyBEb24ndCBzaG93IGhvdmVyIGJveGVzIHdoaWxlIHNjcm9sbGluZ1xuICAgICAgaWYgKGlzU2Nyb2xsaW5nKSByZXR1cm47XG5cbiAgICAgIC8vIEhpdC10ZXN0aW5nIGF0IHBvaW50ZXIgcG9zaXRpb25cbiAgICAgIGNvbnN0IGhpdCA9XG4gICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgLmVsZW1lbnRGcm9tUG9pbnQoZS5jbGllbnRYLCBlLmNsaWVudFkpXG4gICAgICAgICAgPy5jbG9zZXN0PEhUTUxFbGVtZW50PihcIltkYXRhLW9yY2hpZHMtaWRdXCIpID8/IG51bGw7XG5cbiAgICAgIGlmIChoaXQgIT09IGxhc3RIaXRFbGVtZW50UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgbGFzdEhpdEVsZW1lbnRSZWYuY3VycmVudCA9IGhpdDtcblxuICAgICAgICBpZiAoIWhpdCkge1xuICAgICAgICAgIHNldEhvdmVyQm94KG51bGwpO1xuICAgICAgICAgIHNldEhvdmVyQm94ZXMoW10pO1xuICAgICAgICAgIHNldEhvdmVyVGFnKG51bGwpO1xuICAgICAgICAgIGxhc3RIaXRJZFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAvLyBJZiB3ZSB3ZXJlIHByZXZpb3VzbHkgZm9jdXNlZCBvbiBhbiBpbWFnZSwgZW5zdXJlIGl0cyBzcmMgaXMgZmx1c2hlZFxuICAgICAgICAgIGZsdXNoSW1hZ2VTcmNDaGFuZ2UoKTtcblxuICAgICAgICAgIGNvbnN0IG1zZzogQ2hpbGRUb1BhcmVudCA9IHtcbiAgICAgICAgICAgIHR5cGU6IENIQU5ORUwsXG4gICAgICAgICAgICBtc2c6IFwiSElUXCIsXG4gICAgICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgICAgIHRhZzogbnVsbCxcbiAgICAgICAgICAgIHJlY3Q6IG51bGwsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBwb3N0TWVzc2FnZURlZHVwKG1zZyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG9uJ3Qgc2hvdyBob3ZlciBib3ggaWYgdGhpcyBpcyB0aGUgZm9jdXNlZCBlbGVtZW50XG4gICAgICAgIGNvbnN0IGhpdElkID0gaGl0LmdldEF0dHJpYnV0ZShcImRhdGEtb3JjaGlkcy1pZFwiKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB3ZSdyZSBhbHJlYWR5IHNob3dpbmcgYm94ZXMgZm9yIHRoaXMgSURcbiAgICAgICAgaWYgKGhpdElkID09PSBsYXN0SGl0SWRSZWYuY3VycmVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxhc3RIaXRJZFJlZi5jdXJyZW50ID0gaGl0SWQ7XG5cbiAgICAgICAgY29uc3QgdGFnTmFtZSA9XG4gICAgICAgICAgaGl0LmdldEF0dHJpYnV0ZShcImRhdGEtb3JjaGlkcy1uYW1lXCIpIHx8IGhpdC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGhvdmVyIGJveGVzIGltbWVkaWF0ZWx5IGZvciBpbnN0YW50IGZlZWRiYWNrXG4gICAgICAgIC8vIEZpbmQgQUxMIGVsZW1lbnRzIHdpdGggdGhlIHNhbWUgb3JjaGlkcyBJRFxuICAgICAgICBjb25zdCBhbGxNYXRjaGluZ0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgICBgW2RhdGEtb3JjaGlkcy1pZD1cIiR7aGl0SWR9XCJdYFxuICAgICAgICApIGFzIE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuXG4gICAgICAgIC8vIENyZWF0ZSBob3ZlciBib3hlcyBmb3IgYWxsIG1hdGNoaW5nIGVsZW1lbnRzIGV4Y2VwdCB0aGUgZm9jdXNlZCBvbmVcbiAgICAgICAgY29uc3QgYm94ZXM6IEJveFtdID0gW107XG4gICAgICAgIGFsbE1hdGNoaW5nRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgIC8vIFNraXAgaWYgdGhpcyBlbGVtZW50IGlzIHRoZSBmb2N1c2VkIG9uZVxuICAgICAgICAgIGNvbnN0IGVsZW1lbnRJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1vcmNoaWRzLWlkXCIpO1xuICAgICAgICAgIGlmIChlbGVtZW50SWQgPT09IGZvY3VzZWRFbGVtZW50SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICBib3hlcy5wdXNoKGV4cGFuZEJveChyZWN0KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNldCBtdWx0aXBsZSBob3ZlciBib3hlc1xuICAgICAgICBzZXRIb3ZlckJveGVzKGJveGVzKTtcblxuICAgICAgICAvLyBTZXQgc2luZ2xlIGhvdmVyIGJveCBmb3IgdGhlIHByaW1hcnkgZWxlbWVudCAoZm9yIGNvbXBhdGliaWxpdHkpXG4gICAgICAgIC8vIE9ubHkgc2V0IGlmIGl0J3Mgbm90IHRoZSBmb2N1c2VkIGVsZW1lbnRcbiAgICAgICAgaWYgKGhpdElkICE9PSBmb2N1c2VkRWxlbWVudElkKSB7XG4gICAgICAgICAgY29uc3QgciA9IGhpdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICBjb25zdCBleHBhbmRlZEJveCA9IGV4cGFuZEJveChyKTtcbiAgICAgICAgICBzZXRIb3ZlckJveChleHBhbmRlZEJveCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0SG92ZXJCb3gobnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRIb3ZlclRhZyh0YWdOYW1lKTtcblxuICAgICAgICBjb25zdCBtc2c6IENoaWxkVG9QYXJlbnQgPSB7XG4gICAgICAgICAgdHlwZTogQ0hBTk5FTCxcbiAgICAgICAgICBtc2c6IFwiSElUXCIsXG4gICAgICAgICAgaWQ6IGhpdElkLFxuICAgICAgICAgIHRhZzogdGFnTmFtZSxcbiAgICAgICAgICByZWN0OlxuICAgICAgICAgICAgaGl0SWQgIT09IGZvY3VzZWRFbGVtZW50SWRcbiAgICAgICAgICAgICAgPyBleHBhbmRCb3goaGl0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKVxuICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIHBvc3RNZXNzYWdlRGVkdXAobXNnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcG9pbnRlciBsZWF2aW5nIHRoZSBkb2N1bWVudFxuICAgIGZ1bmN0aW9uIG9uUG9pbnRlckxlYXZlKCkge1xuICAgICAgaWYgKCFpc1Zpc3VhbEVkaXRNb2RlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgICAgaWYgKGlzUmVzaXppbmdSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgICBzZXRIb3ZlckJveChudWxsKTtcbiAgICAgIHNldEhvdmVyQm94ZXMoW10pO1xuICAgICAgc2V0SG92ZXJUYWcobnVsbCk7XG5cbiAgICAgIC8vIEZsdXNoIGltYWdlIHNyYyBjaGFuZ2Ugd2hlbiBjdXJzb3IgbGVhdmVzIGlmcmFtZSBhbHRvZ2V0aGVyXG4gICAgICBmbHVzaEltYWdlU3JjQ2hhbmdlKCk7XG5cbiAgICAgIGxhc3RIaXRFbGVtZW50UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgbGFzdEhpdElkUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgY29uc3QgbXNnOiBDaGlsZFRvUGFyZW50ID0ge1xuICAgICAgICB0eXBlOiBDSEFOTkVMLFxuICAgICAgICBtc2c6IFwiSElUXCIsXG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICB0YWc6IG51bGwsXG4gICAgICAgIHJlY3Q6IG51bGwsXG4gICAgICB9O1xuICAgICAgcG9zdE1lc3NhZ2VEZWR1cChtc2cpO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBtb3VzZWRvd24gdG8gcHJlcGFyZSBlbGVtZW50IGZvciBlZGl0aW5nXG4gICAgZnVuY3Rpb24gb25Nb3VzZURvd25DYXB0dXJlKGU6IE1vdXNlRXZlbnQpIHtcbiAgICAgIGlmIChpc1Jlc2l6aW5nUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgIC8vIE9ubHkgaGFuZGxlIGlmIHZpc3VhbCBlZGl0IG1vZGUgaXMgYWN0aXZlXG4gICAgICBpZiAoIWlzVmlzdWFsRWRpdE1vZGVSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBoaXQgPSAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpPy5jbG9zZXN0PEhUTUxFbGVtZW50PihcbiAgICAgICAgXCJbZGF0YS1vcmNoaWRzLWlkXVwiXG4gICAgICApO1xuXG4gICAgICBpZiAoaGl0ICYmIGlzVGV4dEVkaXRhYmxlKGhpdCkpIHtcbiAgICAgICAgLy8gU3RvcmUgd2hldGhlciBpdCB3YXMgYWxyZWFkeSBlZGl0YWJsZVxuICAgICAgICB3YXNFZGl0YWJsZVJlZi5jdXJyZW50ID0gaGl0LmNvbnRlbnRFZGl0YWJsZSA9PT0gXCJ0cnVlXCI7XG5cbiAgICAgICAgLy8gTWFrZSBlbGVtZW50IGVkaXRhYmxlIEJFRk9SRSB0aGUgY2xpY2sgZ29lcyB0aHJvdWdoXG4gICAgICAgIGlmICghd2FzRWRpdGFibGVSZWYuY3VycmVudCkge1xuICAgICAgICAgIC8vIEFwcGx5IGlubGluZSBzdHlsZXMgdG8gcmVtb3ZlIGZvY3VzIHJpbmdcbiAgICAgICAgICBjb25zdCBjdXJyZW50U3R5bGUgPSBoaXQuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikgfHwgXCJcIjtcbiAgICAgICAgICBoaXQuc2V0QXR0cmlidXRlKFxuICAgICAgICAgICAgXCJzdHlsZVwiLFxuICAgICAgICAgICAgYCR7Y3VycmVudFN0eWxlfTsgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50OyBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7YFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBoaXQuY29udGVudEVkaXRhYmxlID0gXCJ0cnVlXCI7XG5cbiAgICAgICAgICAvLyBJZiB0aGUgZWxlbWVudCBoYXMgY2hpbGRyZW4sIHByb3RlY3QgdGhlbSBmcm9tIGJlaW5nIGVkaXRlZFxuICAgICAgICAgIGlmIChoaXQuY2hpbGRFbGVtZW50Q291bnQgPiAwKSB7XG4gICAgICAgICAgICBwcm90ZWN0Q2hpbGRFbGVtZW50cyhoaXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjbGlja3MgdG8gZm9jdXMgZWxlbWVudHNcbiAgICBmdW5jdGlvbiBvbkNsaWNrQ2FwdHVyZShlOiBNb3VzZUV2ZW50KSB7XG4gICAgICBpZiAoaXNSZXNpemluZ1JlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICAvLyBPbmx5IGhhbmRsZSBpZiB2aXN1YWwgZWRpdCBtb2RlIGlzIGFjdGl2ZVxuICAgICAgaWYgKCFpc1Zpc3VhbEVkaXRNb2RlUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgICAgLy8gRGVib3VuY2UgcmFwaWQgY2xpY2tzXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgaWYgKG5vdyAtIGxhc3RDbGlja1RpbWVSZWYuY3VycmVudCA8IDEwMCkge1xuICAgICAgICByZXR1cm47IC8vIElnbm9yZSBjbGlja3Mgd2l0aGluIDEwMG1zIG9mIGVhY2ggb3RoZXJcbiAgICAgIH1cbiAgICAgIGxhc3RDbGlja1RpbWVSZWYuY3VycmVudCA9IG5vdztcblxuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBjb25zdCBoaXQgPSB0YXJnZXQuY2xvc2VzdDxIVE1MRWxlbWVudD4oXCJbZGF0YS1vcmNoaWRzLWlkXVwiKTtcblxuICAgICAgaWYgKGhpdCkge1xuICAgICAgICBjb25zdCB0YWdOYW1lID1cbiAgICAgICAgICBoaXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1vcmNoaWRzLW5hbWVcIikgfHwgaGl0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBjb25zdCBoaXRJZCA9IGhpdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW9yY2hpZHMtaWRcIik7XG4gICAgICAgIGNvbnN0IGlzRWRpdGFibGUgPSBpc1RleHRFZGl0YWJsZShoaXQpO1xuXG4gICAgICAgIC8vIEFsd2F5cyBwcmV2ZW50IGRlZmF1bHQgZm9yIG5vbi10ZXh0IGludGVyYWN0aW9uc1xuICAgICAgICBjb25zdCBpc0xpbmsgPSBoaXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImFcIiB8fCAhIWhpdC5jbG9zZXN0KFwiYVwiKTtcbiAgICAgICAgY29uc3QgaXNCdXR0b24gPVxuICAgICAgICAgIGhpdC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiYnV0dG9uXCIgfHxcbiAgICAgICAgICBoaXQuZ2V0QXR0cmlidXRlKFwicm9sZVwiKSA9PT0gXCJidXR0b25cIjtcblxuICAgICAgICAvLyBQcmV2ZW50IG5hdmlnYXRpb24gYW5kIGJ1dHRvbiBhY3Rpb25zXG4gICAgICAgIGlmIChpc0xpbmsgfHwgaXNCdXR0b24gfHwgIWlzRWRpdGFibGUpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhcHR1cmUgcHJldmlvdXNseSBmb2N1c2VkIGVsZW1lbnQgYmVmb3JlIHVwZGF0aW5nXG4gICAgICAgIGNvbnN0IHByZXZGb2N1c2VkID0gZm9jdXNlZEVsZW1lbnRSZWYuY3VycmVudDtcblxuICAgICAgICAvLyBVcGRhdGUgZm9jdXNlZCBlbGVtZW50XG4gICAgICAgIGZvY3VzZWRFbGVtZW50UmVmLmN1cnJlbnQgPSBoaXQ7XG4gICAgICAgIHNldEZvY3VzZWRFbGVtZW50SWQoaGl0SWQpO1xuICAgICAgICBzZXRGb2N1c1RhZyh0YWdOYW1lKTtcblxuICAgICAgICAvLyBTYXZlIGZvY3VzZWQgZWxlbWVudCBpbmZvIHRvIGxvY2FsU3RvcmFnZVxuICAgICAgICBpZiAoaGl0SWQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGNvbnN0IGZvY3VzZWRFbGVtZW50RGF0YSA9IHtcbiAgICAgICAgICAgIGlkOiBoaXRJZCxcbiAgICAgICAgICAgIHRhZzogdGFnTmFtZSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAgICAgRk9DVVNFRF9FTEVNRU5UX0tFWSxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGZvY3VzZWRFbGVtZW50RGF0YSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmluZCBBTEwgb3RoZXIgZWxlbWVudHMgd2l0aCB0aGUgc2FtZSBvcmNoaWRzIElEIGFuZCBzaG93IGhvdmVyIGJveGVzXG4gICAgICAgIGNvbnN0IGFsbE1hdGNoaW5nRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgICAgIGBbZGF0YS1vcmNoaWRzLWlkPVwiJHtoaXRJZH1cIl1gXG4gICAgICAgICkgYXMgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG5cbiAgICAgICAgLy8gQ3JlYXRlIGhvdmVyIGJveGVzIGZvciBhbGwgbWF0Y2hpbmcgZWxlbWVudHMgZXhjZXB0IHRoZSBmb2N1c2VkIG9uZVxuICAgICAgICBjb25zdCBib3hlczogQm94W10gPSBbXTtcbiAgICAgICAgYWxsTWF0Y2hpbmdFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgLy8gU2tpcCB0aGUgZm9jdXNlZCBlbGVtZW50IGl0c2VsZlxuICAgICAgICAgIGlmIChlbGVtZW50ID09PSBoaXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICBib3hlcy5wdXNoKGV4cGFuZEJveChyZWN0KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNldCBob3ZlciBib3hlcyBmb3Igb3RoZXIgbWF0Y2hpbmcgZWxlbWVudHNcbiAgICAgICAgc2V0SG92ZXJCb3hlcyhib3hlcyk7XG4gICAgICAgIC8vIFNldCB0aGUgaG92ZXIgdGFnIHRvIHNob3cgb24gb3RoZXIgZWxlbWVudHNcbiAgICAgICAgaWYgKGJveGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzZXRIb3ZlclRhZyh0YWdOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyYWNrIGltYWdlIGVsZW1lbnQgc3BlY2lmaWNhbGx5XG4gICAgICAgIGlmIChoaXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImltZ1wiKSB7XG4gICAgICAgICAgZm9jdXNlZEltYWdlRWxlbWVudFJlZi5jdXJyZW50ID0gaGl0IGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9jdXNlZEltYWdlRWxlbWVudFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0b3JlIG9yaWdpbmFsIHN0eWxlcyBmb3IgdGhlIGZvY3VzZWQgZWxlbWVudFxuICAgICAgICBvcmlnaW5hbFN0eWxlc1JlZi5jdXJyZW50ID0gZ2V0Q3VycmVudFN0eWxlcyhoaXQpO1xuXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYW4gZWRpdGFibGUgZWxlbWVudCwgc2V0IGl0IHVwXG4gICAgICAgIGlmIChpc0VkaXRhYmxlKSB7XG4gICAgICAgICAgLy8gQ2FuY2VsIGFueSBwZW5kaW5nIGNsZWFudXBcbiAgICAgICAgICBpZiAocGVuZGluZ0NsZWFudXBSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHBlbmRpbmdDbGVhbnVwUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgcGVuZGluZ0NsZWFudXBSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ2xlYW4gdXAgYW55IHByZXZpb3VzIGVkaXRpbmcgZWxlbWVudCBmaXJzdFxuICAgICAgICAgIGlmIChlZGl0aW5nRWxlbWVudFJlZi5jdXJyZW50ICYmIGVkaXRpbmdFbGVtZW50UmVmLmN1cnJlbnQgIT09IGhpdCkge1xuICAgICAgICAgICAgLy8gRm9yY2UgYmx1ciBvbiB0aGUgcHJldmlvdXMgZWxlbWVudCB0byB0cmlnZ2VyIGhhbmRsZXJzXG4gICAgICAgICAgICBlZGl0aW5nRWxlbWVudFJlZi5jdXJyZW50LmJsdXIoKTtcbiAgICAgICAgICAgIGNsZWFudXBFZGl0aW5nRWxlbWVudCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE9ubHkgc2V0IHVwIGlmIHRoaXMgaXMgYSBuZXcgZWxlbWVudFxuICAgICAgICAgIGlmIChoaXQgIT09IGVkaXRpbmdFbGVtZW50UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGVkaXRpbmdFbGVtZW50UmVmLmN1cnJlbnQgPSBoaXQ7XG4gICAgICAgICAgICAvLyBTdG9yZSBvcmlnaW5hbCBjb250ZW50IC0gZm9yIGVsZW1lbnRzIHdpdGggY2hpbGRyZW4sIG9ubHkgc3RvcmUgZGlyZWN0IHRleHRcbiAgICAgICAgICAgIGlmIChoaXQuY2hpbGRFbGVtZW50Q291bnQgPiAwKSB7XG4gICAgICAgICAgICAgIG9yaWdpbmFsQ29udGVudFJlZi5jdXJyZW50ID0gZXh0cmFjdERpcmVjdFRleHRDb250ZW50KGhpdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBvcmlnaW5hbENvbnRlbnRSZWYuY3VycmVudCA9XG4gICAgICAgICAgICAgICAgaGl0LmlubmVyVGV4dCB8fCBoaXQudGV4dENvbnRlbnQgfHwgXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGhhbmRsZXJzIHdpdGggY3VycmVudCBlbGVtZW50IHJlZmVyZW5jZVxuICAgICAgICAgICAgY29uc3QgY3JlYXRlSGFuZGxlcnMgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgaGFuZGxlRm9jdXMgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRG91YmxlLWNoZWNrIHRoaXMgaXMgc3RpbGwgdGhlIGVkaXRpbmcgZWxlbWVudFxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBlZGl0aW5nRWxlbWVudFJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBhcHBsaWVkIGlubGluZSBzdHlsZSBlZGl0cyAqKmJlZm9yZSoqIGVudGVyaW5nIHRleHRcbiAgICAgICAgICAgICAgICAvLyBlZGl0aW5nIG1vZGUsIG1ha2Ugc3VyZSB3ZSBjb21taXQgdGhlbSByaWdodCBhd2F5IHNvIHRoYXQgdGhlXG4gICAgICAgICAgICAgICAgLy8gc3Vic2VxdWVudCB0ZXh0IGVkaXRzIG9wZXJhdGUgb24gdGhlIHVwZGF0ZWQgc291cmNlLlxuICAgICAgICAgICAgICAgIGhhbmRsZVN0eWxlQmx1cihlbGVtZW50KTtcblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBvcmlnaW5hbCBjb250ZW50IC0gZm9yIGVsZW1lbnRzIHdpdGggY2hpbGRyZW4sIG9ubHkgc3RvcmUgZGlyZWN0IHRleHRcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jaGlsZEVsZW1lbnRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIG9yaWdpbmFsQ29udGVudFJlZi5jdXJyZW50ID1cbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdERpcmVjdFRleHRDb250ZW50KGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBvcmlnaW5hbENvbnRlbnRSZWYuY3VycmVudCA9XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJUZXh0IHx8IGVsZW1lbnQudGV4dENvbnRlbnQgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTdHlsZSBibHVyIGFib3ZlIHJlc2V0cyB0aGUgZmxhZyDigJMga2VlcCBpdCBpbiBzeW5jLlxuICAgICAgICAgICAgICAgIGhhc1N0eWxlQ2hhbmdlc1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgY29uc3QgaGFuZGxlQmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBEb3VibGUtY2hlY2sgdGhpcyBpcyBzdGlsbCB0aGUgZWRpdGluZyBlbGVtZW50XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IGVkaXRpbmdFbGVtZW50UmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgICAgICAgICAgICAgIC8vIEZsdXNoIHN0eWxlIGNoYW5nZXMgKmJlZm9yZSogdGV4dCBjaGFuZ2VzIHNvIHRoYXQgdGhlIHN0eWxlXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGlzIGNvbW1pdHRlZCB3aXRoIHRoZSBvcmlnaW5hbCBsaW5lL2NvbHVtbiBvZmZzZXRzLlxuICAgICAgICAgICAgICAgIC8vIEEgc3Vic2VxdWVudCB0ZXh0IHVwZGF0ZSBtYXkgc2hpZnQgdGhlIHNvdXJjZSBjb2RlIHdoaWNoIHdvdWxkXG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGNhdXNlIHRoZSBsYXRlciBzdHlsZSBlZGl0IHRvIGZhaWwuXG4gICAgICAgICAgICAgICAgaGFuZGxlU3R5bGVCbHVyKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGhhbmRsZVRleHRDaGFuZ2UoZWxlbWVudCk7XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgY29uc3QgaGFuZGxlSW5wdXQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRG91YmxlLWNoZWNrIHRoaXMgaXMgc3RpbGwgdGhlIGVkaXRpbmcgZWxlbWVudFxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBlZGl0aW5nRWxlbWVudFJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gT3B0aW9uYWxseSBoYW5kbGUgcmVhbC10aW1lIHVwZGF0ZXNcbiAgICAgICAgICAgICAgICAvLyBoYW5kbGVUZXh0Q2hhbmdlKGVsZW1lbnQpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHJldHVybiB7IGhhbmRsZUZvY3VzLCBoYW5kbGVCbHVyLCBoYW5kbGVJbnB1dCB9O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgaGFuZGxlcnMgPSBjcmVhdGVIYW5kbGVycyhoaXQpO1xuICAgICAgICAgICAgaGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBoYW5kbGVycy5oYW5kbGVGb2N1cyk7XG4gICAgICAgICAgICBoaXQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgaGFuZGxlcnMuaGFuZGxlQmx1cik7XG4gICAgICAgICAgICBoaXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGhhbmRsZXJzLmhhbmRsZUlucHV0KTtcblxuICAgICAgICAgICAgLy8gU3RvcmUgaGFuZGxlcnMgZm9yIGNsZWFudXBcbiAgICAgICAgICAgIChoaXQgYXMgYW55KS5fZWRpdEhhbmRsZXJzID0ge1xuICAgICAgICAgICAgICBmb2N1czogaGFuZGxlcnMuaGFuZGxlRm9jdXMsXG4gICAgICAgICAgICAgIGJsdXI6IGhhbmRsZXJzLmhhbmRsZUJsdXIsXG4gICAgICAgICAgICAgIGlucHV0OiBoYW5kbGVycy5oYW5kbGVJbnB1dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIGZvY3VzIGJveCB3aXRoIGV4cGFuZGVkIGRpbWVuc2lvbnNcbiAgICAgICAgY29uc3QgciA9IGhpdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgZXhwYW5kZWRCb3ggPSBleHBhbmRCb3gocik7XG4gICAgICAgIHNldEZvY3VzQm94KGV4cGFuZGVkQm94KTtcblxuICAgICAgICAvLyBDbGVhciBob3ZlciBib3ggc2luY2Ugd2UncmUgZm9jdXNpbmdcbiAgICAgICAgc2V0SG92ZXJCb3gobnVsbCk7XG5cbiAgICAgICAgLy8gR2V0IGNsYXNzTmFtZSBmb3IgVGFpbHdpbmQgZXh0cmFjdGlvblxuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBoaXQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIjtcblxuICAgICAgICAvLyBHZXQgc3JjIGZvciBpbWFnZXMgJiB0cmFjayBvcmlnaW5hbFxuICAgICAgICBjb25zdCBzcmNSYXcgPVxuICAgICAgICAgIGhpdC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW1nXCJcbiAgICAgICAgICAgID8gKGhpdCBhcyBIVE1MSW1hZ2VFbGVtZW50KS5zcmNcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmIChzcmNSYXcpIHtcbiAgICAgICAgICBvcmlnaW5hbFNyY1JlZi5jdXJyZW50ID0gbm9ybWFsaXplSW1hZ2VTcmMoc3JjUmF3KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCBjdXJyZW50IHN0eWxlcyBpbW1lZGlhdGVseVxuICAgICAgICBjb25zdCBjb21wdXRlZFN0eWxlcyA9IGdldEN1cnJlbnRTdHlsZXMoaGl0KTtcblxuICAgICAgICAvLyBTZW5kIGNsaWNrIGV2ZW50IHRvIHBhcmVudCB3aXRoIGNvb3JkaW5hdGVzIGFuZCBjdXJyZW50IHN0eWxlc1xuICAgICAgICBjb25zdCBtc2c6IENoaWxkVG9QYXJlbnQgPSB7XG4gICAgICAgICAgdHlwZTogQ0hBTk5FTCxcbiAgICAgICAgICBtc2c6IFwiRUxFTUVOVF9DTElDS0VEXCIsXG4gICAgICAgICAgaWQ6IGhpdElkLFxuICAgICAgICAgIHRhZzogdGFnTmFtZSxcbiAgICAgICAgICByZWN0OiBleHBhbmRlZEJveFxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgdG9wOiBleHBhbmRlZEJveC50b3AsXG4gICAgICAgICAgICAgICAgbGVmdDogZXhwYW5kZWRCb3gubGVmdCxcbiAgICAgICAgICAgICAgICB3aWR0aDogZXhwYW5kZWRCb3gud2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBleHBhbmRlZEJveC5oZWlnaHQsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICBjbGlja1Bvc2l0aW9uOiB7XG4gICAgICAgICAgICB4OiBlLmNsaWVudFgsXG4gICAgICAgICAgICB5OiBlLmNsaWVudFksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpc0VkaXRhYmxlLFxuICAgICAgICAgIGN1cnJlbnRTdHlsZXM6IGNvbXB1dGVkU3R5bGVzLFxuICAgICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgICBzcmM6IHNyY1JhdyxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTZW5kIG1lc3NhZ2Ugd2l0aCBhbGwgZGF0YSBhdCBvbmNlXG4gICAgICAgIHBvc3RNZXNzYWdlRGVkdXAobXNnKTtcblxuICAgICAgICAvLyBNb3ZlIGNsZWFudXAgb3BlcmF0aW9ucyB0byBhZnRlciBtZXNzYWdlIGlzIHNlbnRcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgLy8gQmVmb3JlIGNoYW5naW5nIGZvY3VzLCBmbHVzaCBwZW5kaW5nIGltYWdlIHNyYyBjaGFuZ2VcbiAgICAgICAgICBmbHVzaEltYWdlU3JjQ2hhbmdlKCk7XG5cbiAgICAgICAgICAvLyBGbHVzaCBzdHlsZSBjaGFuZ2VzIGZvciB0aGUgcHJldmlvdXNseSBmb2N1c2VkIGVsZW1lbnQgKGlmIGFueSlcbiAgICAgICAgICBpZiAocHJldkZvY3VzZWQgJiYgcHJldkZvY3VzZWQgIT09IGhpdCkge1xuICAgICAgICAgICAgaGFuZGxlU3R5bGVCbHVyKHByZXZGb2N1c2VkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDbGVhbiB1cCBhbnkgcHJldmlvdXMgZWRpdGluZyBlbGVtZW50IChpZiBpdCdzIGRpZmZlcmVudClcbiAgICAgICAgICBpZiAoZWRpdGluZ0VsZW1lbnRSZWYuY3VycmVudCAmJiBlZGl0aW5nRWxlbWVudFJlZi5jdXJyZW50ICE9PSBoaXQpIHtcbiAgICAgICAgICAgIGNsZWFudXBFZGl0aW5nRWxlbWVudCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDbGlja2VkIG9uIGVtcHR5IHNwYWNlIG9yIGVsZW1lbnQgd2l0aG91dCBkYXRhLW9yY2hpZHMtaWRcbiAgICAgICAgLy8gQ2xlYXIgZm9jdXMgYW5kIGhvdmVyIGJveGVzXG4gICAgICAgIGlmIChmb2N1c2VkRWxlbWVudFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgLy8gRmx1c2ggYW55IHBlbmRpbmcgY2hhbmdlc1xuICAgICAgICAgIGZsdXNoSW1hZ2VTcmNDaGFuZ2UoKTtcbiAgICAgICAgICBoYW5kbGVTdHlsZUJsdXIoZm9jdXNlZEVsZW1lbnRSZWYuY3VycmVudCk7XG4gICAgICAgICAgY2xlYW51cEVkaXRpbmdFbGVtZW50KCk7XG5cbiAgICAgICAgICAvLyBDbGVhciBhbGwgZm9jdXMgYW5kIGhvdmVyIHN0YXRlc1xuICAgICAgICAgIGZvY3VzZWRFbGVtZW50UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIHNldEZvY3VzZWRFbGVtZW50SWQobnVsbCk7XG4gICAgICAgICAgc2V0Rm9jdXNUYWcobnVsbCk7XG4gICAgICAgICAgc2V0Rm9jdXNCb3gobnVsbCk7XG4gICAgICAgICAgc2V0SG92ZXJCb3gobnVsbCk7XG4gICAgICAgICAgc2V0SG92ZXJCb3hlcyhbXSk7XG4gICAgICAgICAgc2V0SG92ZXJUYWcobnVsbCk7XG5cbiAgICAgICAgICAvLyBDbGVhciBmb2N1c2VkIGVsZW1lbnQgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oRk9DVVNFRF9FTEVNRU5UX0tFWSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gTm90aWZ5IHBhcmVudCB0aGF0IGZvY3VzIHdhcyBjbGVhcmVkXG4gICAgICAgICAgY29uc3QgbXNnOiBDaGlsZFRvUGFyZW50ID0ge1xuICAgICAgICAgICAgdHlwZTogQ0hBTk5FTCxcbiAgICAgICAgICAgIG1zZzogXCJFTEVNRU5UX0NMSUNLRURcIixcbiAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgdGFnOiBudWxsLFxuICAgICAgICAgICAgcmVjdDoge1xuICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xpY2tQb3NpdGlvbjoge1xuICAgICAgICAgICAgICB4OiBlLmNsaWVudFgsXG4gICAgICAgICAgICAgIHk6IGUuY2xpZW50WSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0VkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGN1cnJlbnRTdHlsZXM6IHt9LFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIlwiLFxuICAgICAgICAgIH07XG4gICAgICAgICAgcG9zdE1lc3NhZ2VEZWR1cChtc2cpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIG1lc3NhZ2VzIGZyb20gcGFyZW50XG4gICAgZnVuY3Rpb24gb25Nc2coZTogTWVzc2FnZUV2ZW50PFBhcmVudFRvQ2hpbGQ+KSB7XG4gICAgICBpZiAoZS5kYXRhPy50eXBlICE9PSBDSEFOTkVMKSByZXR1cm47XG5cbiAgICAgIC8vIEhhbmRsZSBwcmV2aWV3IGZvbnQgcmVxdWVzdCBmcm9tIHBhcmVudFxuICAgICAgaWYgKGUuZGF0YS5tc2cgPT09IFwiUFJFVklFV19GT05UXCIgJiYgXCJlbGVtZW50SWRcIiBpbiBlLmRhdGEpIHtcbiAgICAgICAgY29uc3QgeyBlbGVtZW50SWQsIGZvbnRGYW1pbHkgfSA9IGUuZGF0YTtcblxuICAgICAgICAvLyBTa2lwIGlmIGZvbnQgYWxyZWFkeSBwZXJzaXN0ZWQgZm9yIHRoaXMgZWxlbWVudCB0byBhdm9pZCByYWNlIGNvbmRpdGlvblxuICAgICAgICBpZiAocGVyc2lzdGVudEZvbnRNYXAuY3VycmVudC5oYXMoZWxlbWVudElkKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIGBbZGF0YS1vcmNoaWRzLWlkPVwiJHtlbGVtZW50SWR9XCJdYFxuICAgICAgICApIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47XG5cbiAgICAgICAgLy8gRW5zdXJlIGZvbnQgc3R5bGVzaGVldCBpcyBsb2FkZWRcbiAgICAgICAgY29uc3QgZmFtaWx5S2V5ID0gZm9udEZhbWlseS5yZXBsYWNlKC9cXHMrL2csIFwiK1wiKTtcbiAgICAgICAgaWYgKCFsb2FkZWRGb250RmFtaWxpZXMuY3VycmVudC5oYXMoZmFtaWx5S2V5KSkge1xuICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgICAgICAgICBsaW5rLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuICAgICAgICAgIGxpbmsuaHJlZiA9IGBodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PSR7ZmFtaWx5S2V5fTp3Z2h0QDQwMCZkaXNwbGF5PXN3YXBgO1xuICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgbG9hZGVkRm9udEZhbWlsaWVzLmN1cnJlbnQuYWRkKGZhbWlseUtleSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBcHBseSBmb250IGZhbWlseSB0byBlbGVtZW50IGlubGluZSBmb3IgcHJldmlld1xuICAgICAgICBlbGVtZW50LnN0eWxlLmZvbnRGYW1pbHkgPSBgJyR7Zm9udEZhbWlseX0nLCBzYW5zLXNlcmlmYDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBIYW5kbGUgc2Nyb2xsIG1lc3NhZ2VzIGZyb20gcGFyZW50XG4gICAgICBpZiAoZS5kYXRhLm1zZyA9PT0gXCJTQ1JPTExcIiAmJiBcImR4XCIgaW4gZS5kYXRhICYmIFwiZHlcIiBpbiBlLmRhdGEpIHtcbiAgICAgICAgd2luZG93LnNjcm9sbEJ5KGUuZGF0YS5keCwgZS5kYXRhLmR5KTtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIHZpc3VhbCBlZGl0IG1vZGUgc3RhdGUgY2hhbmdlc1xuICAgICAgaWYgKGUuZGF0YS5tc2cgPT09IFwiVklTVUFMX0VESVRfTU9ERVwiICYmIFwiYWN0aXZlXCIgaW4gZS5kYXRhKSB7XG4gICAgICAgIGNvbnN0IG5ld01vZGUgPSBlLmRhdGEuYWN0aXZlO1xuICAgICAgICBzZXRJc1Zpc3VhbEVkaXRNb2RlKG5ld01vZGUpO1xuXG4gICAgICAgIC8vIENsZWFyIGxvY2FsU3RvcmFnZSBpZiB2aXN1YWwgZWRpdCBtb2RlIGlzIGJlaW5nIHR1cm5lZCBvZmZcbiAgICAgICAgaWYgKCFuZXdNb2RlICYmIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShWSVNVQUxfRURJVF9NT0RFX0tFWSk7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oRk9DVVNFRF9FTEVNRU5UX0tFWSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZW5kIGFja25vd2xlZGdlbWVudCBiYWNrIHRvIHBhcmVudCBzbyBpdCBrbm93cyB3ZSByZWNlaXZlZCB0aGUgbW9kZSBjaGFuZ2VcbiAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZShcbiAgICAgICAgICB7IHR5cGU6IENIQU5ORUwsIG1zZzogXCJWSVNVQUxfRURJVF9NT0RFX0FDS1wiLCBhY3RpdmU6IG5ld01vZGUgfSxcbiAgICAgICAgICBcIipcIlxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghbmV3TW9kZSkge1xuICAgICAgICAgIC8vIGFscmVhZHkgaGFuZGxlZCwgZmx1c2ggdG9vXG4gICAgICAgICAgLy8gRmx1c2ggaW1hZ2Ugc3JjIGNoYW5nZSBmb3IgY3VycmVudCBmb2N1c1xuICAgICAgICAgIGZsdXNoSW1hZ2VTcmNDaGFuZ2UoKTtcblxuICAgICAgICAgIC8vIENsZWFuIHVwIGFueSBlZGl0aW5nIGVsZW1lbnRcbiAgICAgICAgICBjbGVhbnVwRWRpdGluZ0VsZW1lbnQoKTtcblxuICAgICAgICAgIC8vIENsZWFyIGltYWdlIGVsZW1lbnQgcmVmZXJlbmNlXG4gICAgICAgICAgZm9jdXNlZEltYWdlRWxlbWVudFJlZi5jdXJyZW50ID0gbnVsbDtcblxuICAgICAgICAgIC8vIENsZWFyIGV2ZXJ5dGhpbmcgd2hlbiBleGl0aW5nIHZpc3VhbCBlZGl0IG1vZGVcbiAgICAgICAgICBzZXRIb3ZlckJveChudWxsKTtcbiAgICAgICAgICBzZXRIb3ZlckJveGVzKFtdKTtcbiAgICAgICAgICBzZXRGb2N1c0JveChudWxsKTtcbiAgICAgICAgICBzZXRGb2N1c2VkRWxlbWVudElkKG51bGwpO1xuICAgICAgICAgIGxhc3RIaXRFbGVtZW50UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIGZvY3VzZWRFbGVtZW50UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIGhhc1N0eWxlQ2hhbmdlc1JlZi5jdXJyZW50ID0gZmFsc2U7XG5cbiAgICAgICAgICBzZXRIb3ZlclRhZyhudWxsKTtcbiAgICAgICAgICBzZXRGb2N1c1RhZyhudWxsKTtcblxuICAgICAgICAgIC8vIE5vdGlmeSBwYXJlbnQgdGhhdCB3ZSd2ZSBjbGVhcmVkIHRoZSBzZWxlY3Rpb25cbiAgICAgICAgICBjb25zdCBtc2c6IENoaWxkVG9QYXJlbnQgPSB7XG4gICAgICAgICAgICB0eXBlOiBDSEFOTkVMLFxuICAgICAgICAgICAgbXNnOiBcIkhJVFwiLFxuICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICB0YWc6IG51bGwsXG4gICAgICAgICAgICByZWN0OiBudWxsLFxuICAgICAgICAgIH07XG4gICAgICAgICAgcG9zdE1lc3NhZ2VEZWR1cChtc2cpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBjbGVhciBpbmxpbmUgc3R5bGVzIG1lc3NhZ2VcbiAgICAgIGlmIChlLmRhdGEubXNnID09PSBcIkNMRUFSX0lOTElORV9TVFlMRVNcIiAmJiBcImVsZW1lbnRJZFwiIGluIGUuZGF0YSkge1xuICAgICAgICAvLyBGaW5kIEFMTCBlbGVtZW50cyB3aXRoIHRoZSBzYW1lIG9yY2hpZHMgSURcbiAgICAgICAgY29uc3QgYWxsTWF0Y2hpbmdFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgICAgYFtkYXRhLW9yY2hpZHMtaWQ9XCIke2UuZGF0YS5lbGVtZW50SWR9XCJdYFxuICAgICAgICApIGFzIE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+O1xuXG4gICAgICAgIGFsbE1hdGNoaW5nRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgIC8vIENsZWFyIG9ubHkgdGhlIGlubGluZSBzdHlsZXMgd2UgdHJhY2sgKHR5cG9ncmFwaHksIHNwYWNpbmcsIGFuZCBiYWNrZ3JvdW5kKVxuICAgICAgICAgIGNvbnN0IHN0eWxlc1RvQ2xlYXIgPSBbXG4gICAgICAgICAgICBcImZvbnRTaXplXCIsXG4gICAgICAgICAgICBcImNvbG9yXCIsXG4gICAgICAgICAgICBcImZvbnRXZWlnaHRcIixcbiAgICAgICAgICAgIFwiZm9udFN0eWxlXCIsXG4gICAgICAgICAgICBcInRleHREZWNvcmF0aW9uXCIsXG4gICAgICAgICAgICBcInRleHRBbGlnblwiLFxuICAgICAgICAgICAgXCJwYWRkaW5nTGVmdFwiLFxuICAgICAgICAgICAgXCJwYWRkaW5nUmlnaHRcIixcbiAgICAgICAgICAgIFwicGFkZGluZ1RvcFwiLFxuICAgICAgICAgICAgXCJwYWRkaW5nQm90dG9tXCIsXG4gICAgICAgICAgICBcIm1hcmdpbkxlZnRcIixcbiAgICAgICAgICAgIFwibWFyZ2luUmlnaHRcIixcbiAgICAgICAgICAgIFwibWFyZ2luVG9wXCIsXG4gICAgICAgICAgICBcIm1hcmdpbkJvdHRvbVwiLFxuICAgICAgICAgICAgXCJiYWNrZ3JvdW5kQ29sb3JcIixcbiAgICAgICAgICAgIFwiYmFja2dyb3VuZEltYWdlXCIsXG4gICAgICAgICAgXTtcblxuICAgICAgICAgIHN0eWxlc1RvQ2xlYXIuZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgICAgICAgICAgKGVsZW1lbnQuc3R5bGUgYXMgYW55KVtwcm9wXSA9IFwiXCI7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENsZWFyIGZyb20gb3VyIHRyYWNraW5nXG4gICAgICAgIGFwcGxpZWRTdHlsZXNSZWYuY3VycmVudC5kZWxldGUoZS5kYXRhLmVsZW1lbnRJZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBzaG93IGVsZW1lbnQgaG92ZXIgbWVzc2FnZVxuICAgICAgaWYgKGUuZGF0YS5tc2cgPT09IFwiU0hPV19FTEVNRU5UX0hPVkVSXCIgJiYgXCJlbGVtZW50SWRcIiBpbiBlLmRhdGEpIHtcbiAgICAgICAgY29uc3QgeyBlbGVtZW50SWQgfSA9IGUuZGF0YTtcblxuICAgICAgICBpZiAoIWVsZW1lbnRJZCkge1xuICAgICAgICAgIC8vIENsZWFyIGhvdmVyIGJveGVzIGlmIG5vIGVsZW1lbnQgSURcbiAgICAgICAgICBzZXRIb3ZlckJveGVzKFtdKTtcbiAgICAgICAgICBzZXRIb3ZlclRhZyhudWxsKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaW5kIEFMTCBlbGVtZW50cyB3aXRoIHRoZSBzYW1lIG9yY2hpZHMgSURcbiAgICAgICAgY29uc3QgYWxsTWF0Y2hpbmdFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgICAgYFtkYXRhLW9yY2hpZHMtaWQ9XCIke2VsZW1lbnRJZH1cIl1gXG4gICAgICAgICkgYXMgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG5cbiAgICAgICAgaWYgKGFsbE1hdGNoaW5nRWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGJveGVzOiBCb3hbXSA9IFtdO1xuICAgICAgICAgIGxldCB0YWdOYW1lID0gXCJcIjtcblxuICAgICAgICAgIGFsbE1hdGNoaW5nRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgLy8gU2tpcCBpZiB0aGlzIGVsZW1lbnQgaXMgdGhlIGZvY3VzZWQgb25lXG4gICAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gZm9jdXNlZEVsZW1lbnRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgYm94ZXMucHVzaChleHBhbmRCb3gocmVjdCkpO1xuXG4gICAgICAgICAgICBpZiAoIXRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgdGFnTmFtZSA9XG4gICAgICAgICAgICAgICAgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW9yY2hpZHMtbmFtZVwiKSB8fFxuICAgICAgICAgICAgICAgIGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gU2V0IGhvdmVyIGJveGVzIGZvciBhbGwgbWF0Y2hpbmcgZWxlbWVudHNcbiAgICAgICAgICBzZXRIb3ZlckJveGVzKGJveGVzKTtcbiAgICAgICAgICBzZXRIb3ZlclRhZyhib3hlcy5sZW5ndGggPiAwID8gdGFnTmFtZSA6IG51bGwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHNjcm9sbCBldmVudHMgdG8gdXBkYXRlIGhvdmVyIGJveCBwb3NpdGlvblxuICAgIGZ1bmN0aW9uIG9uU2Nyb2xsKCkge1xuICAgICAgaWYgKGlzUmVzaXppbmdSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgLy8gT25seSB1cGRhdGUgaG92ZXIgYm94IGlmIHZpc3VhbCBlZGl0IG1vZGUgaXMgYWN0aXZlXG4gICAgICBpZiAoIWlzVmlzdWFsRWRpdE1vZGVSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgICAvLyBIaWRlIGhvdmVyIGJveGVzIHdoaWxlIHNjcm9sbGluZ1xuICAgICAgc2V0SXNTY3JvbGxpbmcodHJ1ZSk7XG4gICAgICBzZXRIb3ZlckJveChudWxsKTtcbiAgICAgIHNldEhvdmVyQm94ZXMoW10pO1xuXG4gICAgICAvLyBOb3RpZnkgcGFyZW50IHRoYXQgc2Nyb2xsaW5nIGhhcyBzdGFydGVkXG4gICAgICBjb25zdCBzY3JvbGxNc2c6IENoaWxkVG9QYXJlbnQgPSB7XG4gICAgICAgIHR5cGU6IENIQU5ORUwsXG4gICAgICAgIG1zZzogXCJTQ1JPTExfU1RBUlRFRFwiLFxuICAgICAgfTtcbiAgICAgIHBvc3RNZXNzYWdlRGVkdXAoc2Nyb2xsTXNnKTtcblxuICAgICAgLy8gUmVzZXQgdGhlIG5vdGlmaWNhdGlvbiBmbGFnIGFmdGVyIHNjcm9sbGluZyBzdG9wc1xuICAgICAgaWYgKHNjcm9sbFRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIHNjcm9sbFRpbWVvdXRSZWYuY3VycmVudCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc2V0SXNTY3JvbGxpbmcoZmFsc2UpO1xuICAgICAgICBjb25zdCBzY3JvbGxTdG9wTXNnOiBDaGlsZFRvUGFyZW50ID0ge1xuICAgICAgICAgIHR5cGU6IENIQU5ORUwsXG4gICAgICAgICAgbXNnOiBcIlNDUk9MTF9TVE9QUEVEXCIsXG4gICAgICAgIH07XG4gICAgICAgIHBvc3RNZXNzYWdlRGVkdXAoc2Nyb2xsU3RvcE1zZyk7XG4gICAgICB9LCAxNik7IC8vIE9uZSBmcmFtZSAoMTZtcykgZm9yIGluc3RhbnQgcmVzdG9yYXRpb25cbiAgICB9XG5cbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXJzXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIG9uUG9pbnRlck1vdmUsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmxlYXZlXCIsIG9uUG9pbnRlckxlYXZlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG9uTW91c2VEb3duQ2FwdHVyZSwge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25DbGlja0NhcHR1cmUsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25Nc2cpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIG9uU2Nyb2xsLCB0cnVlKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgb25Qb2ludGVyTW92ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmxlYXZlXCIsIG9uUG9pbnRlckxlYXZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgb25Nb3VzZURvd25DYXB0dXJlLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvbkNsaWNrQ2FwdHVyZSwgdHJ1ZSk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25Nc2cpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgb25TY3JvbGwsIHRydWUpO1xuICAgICAgaWYgKHNjcm9sbFRpbWVvdXRSZWYuY3VycmVudCkgY2xlYXJUaW1lb3V0KHNjcm9sbFRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgfTtcbiAgfSwgW2ZvY3VzZWRFbGVtZW50SWQsIGlzUmVzaXppbmddKTsgLy8gQWRkZWQgZm9jdXNlZEVsZW1lbnRJZCBhbmQgaXNSZXNpemluZyBhcyBkZXBlbmRlbmNpZXNcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7LyogSG92ZXIgYm94IC0gc2hvd3Mgb24gaG92ZXIgd2l0aCBibHVlIG92ZXJsYXkgKi99XG4gICAgICB7aXNWaXN1YWxFZGl0TW9kZSAmJiAhaXNSZXNpemluZyAmJiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgey8qIFJlbmRlciBhbGwgaG92ZXIgYm94ZXMgZm9yIGVsZW1lbnRzIHdpdGggc2FtZSBJRCAqL31cbiAgICAgICAgICB7aG92ZXJCb3hlc1xuICAgICAgICAgICAgLmZpbHRlcigoYm94KTogYm94IGlzIE5vbk51bGxhYmxlPEJveD4gPT4gYm94ICE9PSBudWxsKVxuICAgICAgICAgICAgLm1hcCgoYm94LCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2IGtleT17aW5kZXh9PlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9yY2hpZHMtaG92ZXItYm94XCJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogMTAwMDAwLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBib3gubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBib3gudG9wLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogYm94LndpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGJveC5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgey8qIFRhZyBsYWJlbCBvbiBlYWNoIGhvdmVyIGJveCAqL31cbiAgICAgICAgICAgICAgICB7aG92ZXJUYWcgJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcmNoaWRzLWhvdmVyLXRhZ1wiXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgekluZGV4OiAxMDAwMDEsXG4gICAgICAgICAgICAgICAgICAgICAgbGVmdDogYm94LmxlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgdG9wOiBib3gudG9wIC0gMjAsXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtob3ZlclRhZ31cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgIDwvPlxuICAgICAgKX1cblxuICAgICAgey8qIEZvY3VzIGJveCAtIHNob3dzIG9uIGNsaWNrIHdpdGgganVzdCBib3JkZXIsIG5vIG92ZXJsYXkgKi99XG4gICAgICB7aXNWaXN1YWxFZGl0TW9kZSAmJiBmb2N1c0JveCAmJiAoXG4gICAgICAgIDw+XG4gICAgICAgICAge2ZvY3VzVGFnICYmIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib3JjaGlkcy1mb2N1cy10YWdcIlxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIHpJbmRleDogMTAwMDAzLFxuICAgICAgICAgICAgICAgIGxlZnQ6IGZvY3VzQm94LmxlZnQgLSA0LFxuICAgICAgICAgICAgICAgIHRvcDogZm9jdXNCb3gudG9wIC0gMTYsXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtmb2N1c1RhZ31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJvcmNoaWRzLWZvY3VzLWJveFwiXG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICB6SW5kZXg6IDEwMDAwMSxcbiAgICAgICAgICAgICAgbGVmdDogZm9jdXNCb3gubGVmdCxcbiAgICAgICAgICAgICAgdG9wOiBmb2N1c0JveC50b3AsXG4gICAgICAgICAgICAgIHdpZHRoOiBmb2N1c0JveC53aWR0aCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBmb2N1c0JveC5oZWlnaHQsXG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICB7LyogUmVzaXplIGhhbmRsZXMgKi99XG4gICAgICAgICAgeyFpc1Jlc2l6aW5nICYmIChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHsvKiBDb3JuZXIgaGFuZGxlcyAqL31cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9yY2hpZHMtcmVzaXplLWhhbmRsZSBvcmNoaWRzLXJlc2l6ZS1oYW5kbGUtbncgcmVzaXplLWhhbmRsZVwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgIHpJbmRleDogMTAwMDAyLFxuICAgICAgICAgICAgICAgICAgbGVmdDogZm9jdXNCb3gubGVmdCAtIDQsXG4gICAgICAgICAgICAgICAgICB0b3A6IGZvY3VzQm94LnRvcCAtIDQsXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17KGUpID0+IGhhbmRsZVJlc2l6ZVN0YXJ0KGUsIFwibndcIil9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcmNoaWRzLXJlc2l6ZS1oYW5kbGUgb3JjaGlkcy1yZXNpemUtaGFuZGxlLW5lIHJlc2l6ZS1oYW5kbGVcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICB6SW5kZXg6IDEwMDAwMixcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IGZvY3VzQm94LmxlZnQgKyBmb2N1c0JveC53aWR0aCAtIDQsXG4gICAgICAgICAgICAgICAgICB0b3A6IGZvY3VzQm94LnRvcCAtIDQsXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17KGUpID0+IGhhbmRsZVJlc2l6ZVN0YXJ0KGUsIFwibmVcIil9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcmNoaWRzLXJlc2l6ZS1oYW5kbGUgb3JjaGlkcy1yZXNpemUtaGFuZGxlLXN3IHJlc2l6ZS1oYW5kbGVcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICB6SW5kZXg6IDEwMDAwMixcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IGZvY3VzQm94LmxlZnQgLSA0LFxuICAgICAgICAgICAgICAgICAgdG9wOiBmb2N1c0JveC50b3AgKyBmb2N1c0JveC5oZWlnaHQgLSA0LFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiBoYW5kbGVSZXNpemVTdGFydChlLCBcInN3XCIpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib3JjaGlkcy1yZXNpemUtaGFuZGxlIG9yY2hpZHMtcmVzaXplLWhhbmRsZS1zZSByZXNpemUtaGFuZGxlXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgekluZGV4OiAxMDAwMDIsXG4gICAgICAgICAgICAgICAgICBsZWZ0OiBmb2N1c0JveC5sZWZ0ICsgZm9jdXNCb3gud2lkdGggLSA0LFxuICAgICAgICAgICAgICAgICAgdG9wOiBmb2N1c0JveC50b3AgKyBmb2N1c0JveC5oZWlnaHQgLSA0LFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiBoYW5kbGVSZXNpemVTdGFydChlLCBcInNlXCIpfVxuICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgIHsvKiBFZGdlIGhhbmRsZXMgKi99XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcmNoaWRzLXJlc2l6ZS1oYW5kbGUgb3JjaGlkcy1yZXNpemUtaGFuZGxlLW4gcmVzaXplLWhhbmRsZVwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgIHpJbmRleDogMTAwMDAyLFxuICAgICAgICAgICAgICAgICAgbGVmdDogZm9jdXNCb3gubGVmdCArIGZvY3VzQm94LndpZHRoIC8gMiAtIDQsXG4gICAgICAgICAgICAgICAgICB0b3A6IGZvY3VzQm94LnRvcCAtIDQsXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17KGUpID0+IGhhbmRsZVJlc2l6ZVN0YXJ0KGUsIFwiblwiKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9yY2hpZHMtcmVzaXplLWhhbmRsZSBvcmNoaWRzLXJlc2l6ZS1oYW5kbGUtcyByZXNpemUtaGFuZGxlXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgekluZGV4OiAxMDAwMDIsXG4gICAgICAgICAgICAgICAgICBsZWZ0OiBmb2N1c0JveC5sZWZ0ICsgZm9jdXNCb3gud2lkdGggLyAyIC0gNCxcbiAgICAgICAgICAgICAgICAgIHRvcDogZm9jdXNCb3gudG9wICsgZm9jdXNCb3guaGVpZ2h0IC0gNCxcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXsoZSkgPT4gaGFuZGxlUmVzaXplU3RhcnQoZSwgXCJzXCIpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib3JjaGlkcy1yZXNpemUtaGFuZGxlIG9yY2hpZHMtcmVzaXplLWhhbmRsZS13IHJlc2l6ZS1oYW5kbGVcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICB6SW5kZXg6IDEwMDAwMixcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IGZvY3VzQm94LmxlZnQgLSA0LFxuICAgICAgICAgICAgICAgICAgdG9wOiBmb2N1c0JveC50b3AgKyBmb2N1c0JveC5oZWlnaHQgLyAyIC0gNCxcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXsoZSkgPT4gaGFuZGxlUmVzaXplU3RhcnQoZSwgXCJ3XCIpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib3JjaGlkcy1yZXNpemUtaGFuZGxlIG9yY2hpZHMtcmVzaXplLWhhbmRsZS1lIHJlc2l6ZS1oYW5kbGVcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICB6SW5kZXg6IDEwMDAwMixcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IGZvY3VzQm94LmxlZnQgKyBmb2N1c0JveC53aWR0aCAtIDQsXG4gICAgICAgICAgICAgICAgICB0b3A6IGZvY3VzQm94LnRvcCArIGZvY3VzQm94LmhlaWdodCAvIDIgLSA0LFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiBoYW5kbGVSZXNpemVTdGFydChlLCBcImVcIil9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICA8Lz5cbiAgICAgICl9XG4gICAgPC8+XG4gICk7XG59XG5cbiJdLCJuYW1lcyI6WyJoYW5kbGUiLCJtc2ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/orchids-visual-edits/dist/messenger.js\n");

/***/ })

};
;